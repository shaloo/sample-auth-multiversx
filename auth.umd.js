!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).arcana=t.arcana||{},t.arcana.auth={}))}(this,(function(t){"use strict";function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(r){if("default"!==r&&!(r in t)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}))})),Object.freeze(t)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function r(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var s={},a={},u=p;p.default=p,p.stable=w,p.stableStringify=w;var c="[...]",h="[Circular]",l=[],d=[];function f(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function p(t,e,r,n){var i;void 0===n&&(n=f()),m(t,"",0,[],void 0,0,n);try{i=0===d.length?JSON.stringify(t,e,r):JSON.stringify(t,v(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==l.length;){var o=l.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function g(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:t}),l.push([n,r,e,i])):d.push([e,r,t]):(n[r]=t,l.push([n,r,e]))}function m(t,e,r,n,i,o,s){var a;if(o+=1,"object"==typeof t&&null!==t){for(a=0;a<n.length;a++)if(n[a]===t)return void g(h,t,e,i);if(void 0!==s.depthLimit&&o>s.depthLimit)return void g(c,t,e,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void g(c,t,e,i);if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)m(t[a],a,a,n,t,o,s);else{var u=Object.keys(t);for(a=0;a<u.length;a++){var l=u[a];m(t[l],l,a,n,t,o,s)}}n.pop()}}function y(t,e){return t<e?-1:t>e?1:0}function w(t,e,r,n){void 0===n&&(n=f());var i,o=b(t,"",0,[],void 0,0,n)||t;try{i=0===d.length?JSON.stringify(o,e,r):JSON.stringify(o,v(e),r)}catch(t){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==l.length;){var s=l.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function b(t,e,r,n,i,o,s){var a;if(o+=1,"object"==typeof t&&null!==t){for(a=0;a<n.length;a++)if(n[a]===t)return void g(h,t,e,i);try{if("function"==typeof t.toJSON)return}catch(t){return}if(void 0!==s.depthLimit&&o>s.depthLimit)return void g(c,t,e,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void g(c,t,e,i);if(n.push(t),Array.isArray(t))for(a=0;a<t.length;a++)b(t[a],a,a,n,t,o,s);else{var u={},d=Object.keys(t).sort(y);for(a=0;a<d.length;a++){var f=d[a];b(t[f],f,a,n,t,o,s),u[f]=t[f]}if(void 0===i)return u;l.push([i,e,t]),i[e]=u}n.pop()}}function v(t){return t=void 0!==t?t:function(t,e){return e},function(e,r){if(d.length>0)for(var n=0;n<d.length;n++){var i=d[n];if(i[1]===e&&i[0]===r){r=i[2],d.splice(n,1);break}}return t.call(this,e,r)}}Object.defineProperty(a,"__esModule",{value:!0}),a.EthereumProviderError=a.EthereumRpcError=void 0;const _=u;class k extends Error{constructor(t,e,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||"string"!=typeof e)throw new Error('"message" must be a nonempty string.');super(e),this.code=t,void 0!==r&&(this.data=r)}serialize(){const t={code:this.code,message:this.message};return void 0!==this.data&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return _.default(this.serialize(),S,2)}}a.EthereumRpcError=k;function S(t,e){if("[Circular]"!==e)return e}a.EthereumProviderError=class extends k{constructor(t,e,r){if(!function(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,r)}};var x={},E={};Object.defineProperty(E,"__esModule",{value:!0}),E.errorValues=E.errorCodes=void 0,E.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},E.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=E,r=a,n=e.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:n,message:s(n)};function s(r,n=i){if(Number.isInteger(r)){const n=r.toString();if(l(e.errorValues,n))return e.errorValues[n].message;if(c(r))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function u(t){if(!Number.isInteger(t))return!1;const r=t.toString();return!!e.errorValues[r]||!!c(t)}function c(t){return t>=-32099&&t<=-32e3}function h(t){return t&&"object"==typeof t&&!Array.isArray(t)?Object.assign({},t):t}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=u,t.serializeError=function(t,{fallbackError:e=o,shouldIncludeStack:n=!1}={}){var i,a;if(!e||!Number.isInteger(e.code)||"string"!=typeof e.message)throw new Error("Must provide fallback error with integer number code and string message.");if(t instanceof r.EthereumRpcError)return t.serialize();const c={};if(t&&"object"==typeof t&&!Array.isArray(t)&&l(t,"code")&&u(t.code)){const e=t;c.code=e.code,e.message&&"string"==typeof e.message?(c.message=e.message,l(e,"data")&&(c.data=e.data)):(c.message=s(c.code),c.data={originalError:h(t)})}else{c.code=e.code;const r=null===(i=t)||void 0===i?void 0:i.message;c.message=r&&"string"==typeof r?r:e.message,c.data={originalError:h(t)}}const d=null===(a=t)||void 0===a?void 0:a.stack;return n&&t&&d&&"string"==typeof d&&(c.stack=d),c}}(x);var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.ethErrors=void 0;const M=a,A=x,B=E;function P(t,e){const[r,n]=R(e);return new M.EthereumRpcError(t,r||A.getMessageFromCode(t),n)}function O(t,e){const[r,n]=R(e);return new M.EthereumProviderError(t,r||A.getMessageFromCode(t),n)}function R(t){if(t){if("string"==typeof t)return[t];if("object"==typeof t&&!Array.isArray(t)){const{message:e,data:r}=t;if(e&&"string"!=typeof e)throw new Error("Must specify string message.");return[e||void 0,r]}}return[]}I.ethErrors={rpc:{parse:t=>P(B.errorCodes.rpc.parse,t),invalidRequest:t=>P(B.errorCodes.rpc.invalidRequest,t),invalidParams:t=>P(B.errorCodes.rpc.invalidParams,t),methodNotFound:t=>P(B.errorCodes.rpc.methodNotFound,t),internal:t=>P(B.errorCodes.rpc.internal,t),server:t=>{if(!t||"object"!=typeof t||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return P(e,t)},invalidInput:t=>P(B.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>P(B.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>P(B.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>P(B.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>P(B.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>P(B.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>O(B.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>O(B.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>O(B.errorCodes.provider.unsupportedMethod,t),disconnected:t=>O(B.errorCodes.provider.disconnected,t),chainDisconnected:t=>O(B.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||"object"!=typeof t||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:r,data:n}=t;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new M.EthereumProviderError(e,r,n)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=a;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const r=x;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=I;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=E;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(s);var L,T={},C={exports:{}},N="object"==typeof Reflect?Reflect:null,U=N&&"function"==typeof N.apply?N.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};L=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var z=Number.isNaN||function(t){return t!=t};function W(){W.init.call(this)}C.exports=W,C.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}Z(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&Z(t,"error",e,r)}(t,i,{once:!0})}))},W.EventEmitter=W,W.prototype._events=void 0,W.prototype._eventsCount=0,W.prototype._maxListeners=void 0;var j=10;function q(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function K(t){return void 0===t._maxListeners?W.defaultMaxListeners:t._maxListeners}function F(t,e,r,n){var i,o,s,a;if(q(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=K(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return t}function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=D.bind(n);return i.listener=r,n.wrapFn=i,i}function H(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):G(i,i.length)}function V(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function G(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Z(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(W,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(t){if("number"!=typeof t||t<0||z(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j=t}}),W.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},W.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||z(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},W.prototype.getMaxListeners=function(){return K(this)},W.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)U(a,this,e);else{var u=a.length,c=G(a,u);for(r=0;r<u;++r)U(c[r],this,e)}return!0},W.prototype.addListener=function(t,e){return F(this,t,e,!1)},W.prototype.on=W.prototype.addListener,W.prototype.prependListener=function(t,e){return F(this,t,e,!0)},W.prototype.once=function(t,e){return q(e),this.on(t,$(this,t,e)),this},W.prototype.prependOnceListener=function(t,e){return q(e),this.prependListener(t,$(this,t,e)),this},W.prototype.removeListener=function(t,e){var r,n,i,o,s;if(q(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},W.prototype.listeners=function(t){return H(this,t,!0)},W.prototype.rawListeners=function(t){return H(this,t,!1)},W.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):V.call(t,e)},W.prototype.listenerCount=V,W.prototype.eventNames=function(){return this._eventsCount>0?L(this._events):[]},Object.defineProperty(T,"__esModule",{value:!0});const J=C.exports;function Y(t,e,r){try{Reflect.apply(t,e,r)}catch(t){setTimeout((()=>{throw t}))}}class X extends J.EventEmitter{emit(t,...e){let r="error"===t;const n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){let t;if(e.length>0&&([t]=e),t instanceof Error)throw t;const r=new Error("Unhandled error."+(t?` (${t.message})`:""));throw r.context=t,r}const i=n[t];if(void 0===i)return!1;if("function"==typeof i)Y(i,this,e);else{const t=i.length,r=function(t){const e=t.length,r=new Array(e);for(let n=0;n<e;n+=1)r[n]=t[n];return r}(i);for(let n=0;n<t;n+=1)Y(r[n],this,e)}return!0}}var Q=T.default=X;class tt extends Error{constructor(t,e){super(t),this.message=e,this.message=`[XAR_AUTH_SDK] error: [${t}] ${e}`}}const et=new tt("user_not_logged_in","User is not logged in"),rt=new tt("wallet_not_initialized","AuthProvider is not initialized. Please run `await auth.init(...)` before calling functions"),nt=new class{constructor(t,e){this.message=`[XAR_AUTH_SDK] warning: [${t}] ${e}`}log(){console.warn(this.message)}}("duplicate_iframe","Duplicate iframe detected, please keep a single instance of AuthProvider"),it=1,ot=2,st=3,at=4,ut=5,ct=t=>{dt.exceptionReporter&&dt.exceptionReporter(t)},ht=t=>{dt.logLevel=t},lt=()=>dt.logger;const dt={logger:new class{constructor(){this.prefix="[XAR_AUTH_SDK]"}info(t,e={}){this.internalLog(ot,t,e)}debug(t,e={}){this.internalLog(it,t,e)}warn(t,e={}){this.internalLog(st,t,e)}error(t,e){if(e instanceof Error)return this.internalLog(at,t,e.message),void ct(JSON.stringify({message:t,error:e.message}));"string"==typeof e&&(this.internalLog(at,t,e),ct(JSON.stringify({message:t,error:e})))}internalLog(t,e,r){const n=`${this.prefix}\nMessage: ${e} \nParams: ${JSON.stringify(r)}`;this.consoleLog(t,n)}consoleLog(t,e){if(!(t<dt.logLevel))switch(t){case it:console.debug(e);break;case st:console.warn(e);break;case at:console.error(e);break;case ot:console.info(e);break;default:console.log(e)}}},logLevel:ut,exceptionReporter:null};class ft{constructor(t){this.url=t,this.requestHandler=()=>new Promise((t=>{let e=!1;const n=window.setInterval((()=>{var r;try{if(!e&&(null===(r=this.window)||void 0===r?void 0:r.closed))return t({id:1,jsonrpc:"2.0",error:"user_closed_popup"})}catch(t){}}),500),i=o=>r(this,void 0,void 0,(function*(){var r;if("json_rpc_response"==o.data.type)return e=!0,this.clear(i,n),null===(r=this.window)||void 0===r||r.close(),t(o.data.response)}));window.addEventListener("message",i,!1)}))}open(){const t=gt();return this.window=window.open(this.url,"_blank",t),this.getWindowResponse()}getWindowResponse(){return new Promise(((t,e)=>{let n=!1;const i=window.setInterval((()=>{var t;!n&&(null===(t=this.window)||void 0===t?void 0:t.closed)&&e("User closed the popup")}),500),o=s=>r(this,void 0,void 0,(function*(){var r,a,u;if(!(null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.status))return;const c=s.data;return n=!0,this.clear(o,i),"success"===c.status?(null===(a=this.window)||void 0===a||a.close(),t("success")):"error"==c.status?(null===(u=this.window)||void 0===u||u.close(),e(c.error)):"done"===c.status?t("done"):void console.log("Unexpected event")}));window.addEventListener("message",o,!1)}))}clear(t,e){window.removeEventListener("message",t),window.clearInterval(e)}}const pt={titlebar:0,toolbar:0,status:0,menubar:0,resizable:0,height:1200,width:700,popup:1},gt=()=>{const t=[];for(const e in pt)t.push(`${e}=${pt[e]}`);return t.join(",")};class mt{constructor(t){this.url=t,this.requestCount=0,this.emitter=new Q,this.ready=!1,this.cleanExit=!1,this.requestHandler=t=>new Promise((e=>{this.cleanExit=!1;const r=window.setInterval((()=>{var n;try{(null===(n=this.window)||void 0===n?void 0:n.closed)&&(this.cleanExit||this.emitter.emit(t,{id:t,jsonrpc:"2.0",error:"user_closed_popup"}),window.clearInterval(r),e("ok"))}catch(t){}}),500)})),this.handler=t=>r(this,void 0,void 0,(function*(){"json_rpc_response"==t.data.type&&(this.cleanExit=!0,this.emitter.emit(t.data.response.id,t.data.response))}))}sendRequest(t){return r(this,void 0,void 0,(function*(){if(this.window||(this.ready=!1,this.requestCount=0,this.window=window.open(this.url,"_blank",gt()),yield yt(),window.addEventListener("message",this.handler,!1)),this.window){this.requestCount++,this.window.postMessage({type:"json_rpc_request",data:t},this.url),this.window.focus(),this.requestHandler(String(t.request.id));return yield new Promise((e=>this.emitter.once(String(t.request.id),(t=>{var r;return this.requestCount--,this.requestCount<=0&&(window.removeEventListener("message",this.handler),null===(r=this.window)||void 0===r||r.close(),this.window=null),e(t)}))))}throw Error("error while opening popup")}))}}const yt=()=>new Promise((t=>{const e=r=>{"READY_TO_RECEIVE"===r.data.type&&(window.removeEventListener("message",e),t("ok"))};window.addEventListener("message",e,!1)})),wt="data:image/svg+xml,%3Csvg width='116' height='116' viewBox='0 0 116 116' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M115.341 58.0094C115.341 89.6796 89.6673 115.354 57.9967 115.354C26.3265 115.354 0.652344 89.6796 0.652344 58.0094C0.652344 26.3392 26.3265 0.665039 57.9967 0.665039C89.6673 0.665039 115.341 26.3392 115.341 58.0094Z' fill='%23B43030'/%3E%3Cpath d='M78.7969 37.2041L37.1953 78.8057' stroke='white' stroke-width='5.74' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M78.7969 78.8057L37.1953 37.2041' stroke='white' stroke-width='5.74' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A",bt=t=>"string"==typeof t&&t.trim().length>0,vt=t=>40===kt(t).length,_t="0x",kt=t=>t.startsWith(_t)?t.substring(2):t,St=(t,e=!0)=>{const r=t.toString(16);return e?(t=>t.startsWith(_t)?t:_t+t)(r):kt(r)},xt=()=>window.location.origin+window.location.pathname,Et=4294967295;let It=Math.floor(Math.random()*Et);function Mt(t){return String.fromCharCode(parseInt(t.slice(1),16))}function At(t){return e=JSON.stringify(t),window.btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,Mt));var e}class Bt extends Error{constructor(t,e,r=""){super(e),this.code=t,this.message=e,this.data=r}}const Pt=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_decrypt"];class Ot extends Q{constructor(t){super(),this.authUrl=t,this.connected=!1,this.logger=lt(),this.onResponse=(t,e)=>{this.subscriber.emit(`result:${t}:${e.id}`,e)},this.handleEvents=(t,e)=>{switch(t){case Rt.ACCOUNTS_CHANGED:this.emit(t,[e]);break;case Rt.CHAIN_CHANGED:this.setChainId(e),this.emit(t,St(e.chainId));break;case Rt.CONNECT:this.chainId="object"==typeof e?e.chainId:"",this.connected=!0,this.emit(t,e);break;case Rt.DISCONNECT:this.iframe.handleDisconnect(),this.connected=!1,this.emit(t,e);break;case Rt.MESSAGE:console.log({t:t,val:e}),this.emit(t,e)}},this.subscriber=new Q}isArcana(){return!0}init(t,e){return r(this,void 0,void 0,(function*(){this.auth=e,this.popup=new mt(this.createRequestUrl(e.appId)),this.iframe=t;const{communication:r}=yield this.iframe.setConnectionMethods({onEvent:this.handleEvents,onMethodResponse:this.onResponse,getParentUrl:xt,getAppMode:()=>this.iframe.appMode,getAppConfig:this.iframe.getAppConfig,getWalletPosition:this.iframe.getWalletPlace,getRpcConfig:()=>{},sendPendingRequestCount:this.iframe.onReceivingPendingRequestCount,triggerSocialLogin:e.loginWithSocial,triggerPasswordlessLogin:e.loginWithLink,getPopupState:()=>this.iframe.getState(),setIframeStyle:this.iframe.setIframeStyle,setSessionID:this.iframe.setSessionID,getSDKVersion:()=>"v3"});this.communication=r}))}isLoggedIn(){return r(this,void 0,void 0,(function*(){try{return(yield this.getCommunication("isLoggedIn")).isLoggedIn()}catch(t){return this.logger.error("isLoggedIn",t),!1}}))}connect(){return this.auth.connect()}isConnected(){return r(this,void 0,void 0,(function*(){return this.connected}))}isLoginAvailable(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("isLoginAvailable"),r=yield e.isLoginAvailable(t);return this.logger.debug("loginAvailable",{[t]:r}),r}))}requestUserInfo(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getUserInfo");if(!(yield t.isLoggedIn()))throw et;return yield t.getUserInfo()}))}getReconnectionUrl(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getReconnectionUrl");return yield t.getReconnectionUrl()}))}initOTPLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("initOTPLogin");return yield e.initOTPLogin(t)}))}completeOTPLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("completeOTPLogin");yield e.completeOTPLogin(t)}))}getPublicKey(t,e){return r(this,void 0,void 0,(function*(){return(yield this.getCommunication("getPublicKey")).getPublicKey(t,e)}))}getAvailableLogins(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getAvailableLogins");return yield t.getAvailableLogins()}))}triggerLogout(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("triggerLogout");yield t.triggerLogout(!0)}))}initPasswordlessLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("initPasswordlessLogin");return yield e.initPasswordlessLogin(t)}))}initSocialLogin(t){return r(this,void 0,void 0,(function*(){const e=yield this.getCommunication("initSocialLogin");return yield e.initSocialLogin(t)}))}expandWallet(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("expandWallet");return yield t.expandWallet()}))}getKeySpaceConfigType(){return r(this,void 0,void 0,(function*(){const t=yield this.getCommunication("getKeySpaceConfigType");return yield t.getKeySpaceConfigType()}))}getCommunication(t="sendRequest"){return r(this,void 0,void 0,(function*(){if(this.communication){const e=yield this.communication.promise;if(!e[t])throw new tt("fn_not_available",`The requested fn ${t} is not available in this context`);return e}throw new tt("connection_not_available","The connection is not available yet")}))}request(t){return r(this,void 0,void 0,(function*(){if(!t||"object"!=typeof t||Array.isArray(t))throw s.ethErrors.rpc.invalidRequest({message:"Invalid request arguments",data:t});const{method:e,params:n}=t;if(!e)throw s.ethErrors.rpc.invalidRequest({message:"Invalid method argument",data:t});const i={method:e,params:n,jsonrpc:"2.0",id:(It=(It+1)%Et,It)},o=yield this.getKeySpaceConfigType(),a=yield this.getCommunication("addToActivity");return new Promise(((t,n)=>{Pt.includes(e)&&"global"===o?(this.popup.sendRequest({chainId:this.chainId,request:i}).then((e=>{const r=e.error;if(!r){const r=e.result;return a.addToActivity({req:i,result:r,chainId:this.chainId}),t(r)}if(a.addToActivity({req:i,error:r,chainId:this.chainId}),"user_closed_popup"!==r)return n(Lt(r))})),this.getCommunication().then((o=>r(this,void 0,void 0,(function*(){this.getResponse(e,i.id).then(t,n),yield o.sendRequest(i,"auth-verify")}))),n)):this.getCommunication().then((o=>r(this,void 0,void 0,(function*(){this.getResponse(e,i.id).then(t,n),yield o.sendRequest(i)}))),n)}))}))}getResponse(t,e){return new Promise(((r,n)=>{this.subscriber.once(`result:${t}:${e}`,(t=>t.error?n(Lt(t.error)):r(t.result)))}))}createRequestUrl(t){return new URL(`/${t}/permission/`,this.authUrl).href}setChainId(t){t&&"object"==typeof t&&"chainId"in t&&"number"==typeof t.chainId&&(this.chainId=St(t.chainId))}}const Rt={ACCOUNTS_CHANGED:"accountsChanged",CHAIN_CHANGED:"chainChanged",CONNECT:"connect",DISCONNECT:"disconnect",MESSAGE:"message"},Lt=t=>{switch(lt().error("getError",t),t){case"user_deny":return new Bt(4001,"User rejected the request.");case"user_closed_popup":return new Bt(4001,"User closed the popup.");case"operation_not_supported":return new Bt(4200,"The requested method is not supported by this provider.");case"all_disconnected":return new Bt(4900,"The provider is disconnected from all chains. Login is pending.");default:return"string"!=typeof t?new Bt(t.code,t.message,t.data):s.ethErrors.rpc.internal(t)}};var Tt,Ct,Nt,Ut,zt,Wt,jt,qt;!function(t){t[t.CREATED=0]="CREATED",t[t.RUNNING=1]="RUNNING",t[t.DONE=2]="DONE"}(Tt||(Tt={})),function(t){t.evm_secp256k1="evm_secp256k1",t.solana_cv25519="solana_cv25519"}(Ct||(Ct={})),t.BearerAuthentication=void 0,(t.BearerAuthentication||(t.BearerAuthentication={})).firebase="firebase",function(t){t[t.NoUI=0]="NoUI",t[t.Widget=1]="Widget",t[t.Full=2]="Full"}(Nt||(Nt={})),function(t){t.Call="call",t.Reply="reply",t.Syn="syn",t.SynAck="synAck",t.Ack="ack"}(Ut||(Ut={})),function(t){t.Fulfilled="fulfilled",t.Rejected="rejected"}(zt||(zt={})),function(t){t.ConnectionDestroyed="ConnectionDestroyed",t.ConnectionTimeout="ConnectionTimeout",t.NoIframeSrc="NoIframeSrc"}(Wt||(Wt={})),function(t){t.DataCloneError="DataCloneError"}(jt||(jt={})),function(t){t.Message="message"}(qt||(qt={}));const Kt={"http:":"80","https:":"443"},Ft=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,Dt=["file:","data:"];const $t=({name:t,message:e,stack:r})=>({name:t,message:e,stack:r});let Ht=0;var Vt=()=>++Ht;const Gt=t=>t?t.split("."):[],Zt=(t,e,r)=>{const n=Gt(e);return n.reduce(((t,e,i)=>(void 0===t[e]&&(t[e]={}),i===n.length-1&&(t[e]=r),t[e])),t),t},Jt=(t,e)=>{const r={};return Object.keys(t).forEach((n=>{const i=t[n],o=((t,e)=>{const r=Gt(e||"");return r.push(t),(t=>t.join("."))(r)})(n,e);"object"==typeof i&&Object.assign(r,Jt(i,o)),"function"==typeof i&&(r[o]=i)})),r};var Yt=(t,e,r,n,i)=>{const{localName:o,local:s,remote:a,originForSending:u,originForReceiving:c}=e;let h=!1;i(`${o}: Connecting call sender`);const l=t=>(...e)=>{let r;i(`${o}: Sending ${t}() call`);try{a.closed&&(r=!0)}catch(t){r=!0}if(r&&n(),h){const e=new Error(`Unable to send ${t}() call due to destroyed connection`);throw e.code=Wt.ConnectionDestroyed,e}return new Promise(((r,n)=>{const h=Vt(),l=e=>{if(e.source!==a||e.data.penpal!==Ut.Reply||e.data.id!==h)return;if("*"!==c&&e.origin!==c)return void i(`${o} received message from origin ${e.origin} which did not match expected origin ${c}`);const u=e.data;i(`${o}: Received ${t}() reply`),s.removeEventListener(qt.Message,l);let d=u.returnValue;u.returnValueIsError&&(d=(t=>{const e=new Error;return Object.keys(t).forEach((r=>e[r]=t[r])),e})(d)),(u.resolution===zt.Fulfilled?r:n)(d)};s.addEventListener(qt.Message,l);const d={penpal:Ut.Call,id:h,methodName:t,args:e};a.postMessage(d,u)}))},d=r.reduce(((t,e)=>(t[e]=l(e),t)),{});return Object.assign(t,(t=>{const e={};for(const r in t)Zt(e,r,t[r]);return e})(d)),()=>{h=!0}},Xt=(t,e,r,n,i)=>{const{destroy:o,onDestroy:s}=n;let a,u;const c={};return n=>{if("*"!==e&&n.origin!==e)return void i(`Parent: Handshake - Received ACK message from origin ${n.origin} which did not match expected origin ${e}`);i("Parent: Handshake - Received ACK");const h={localName:"Parent",local:window,remote:n.source,originForSending:r,originForReceiving:e};a&&a(),a=((t,e,r)=>{const{localName:n,local:i,remote:o,originForSending:s,originForReceiving:a}=t;let u=!1;const c=t=>{if(t.source!==o||t.data.penpal!==Ut.Call)return;if("*"!==a&&t.origin!==a)return void r(`${n} received message from origin ${t.origin} which did not match expected origin ${a}`);const i=t.data,{methodName:c,args:h,id:l}=i;r(`${n}: Received ${c}() call`);const d=t=>e=>{if(r(`${n}: Sending ${c}() reply`),u)return void r(`${n}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:Ut.Reply,id:l,resolution:t,returnValue:e};t===zt.Rejected&&e instanceof Error&&(i.returnValue=$t(e),i.returnValueIsError=!0);try{o.postMessage(i,s)}catch(t){if(t.name===jt.DataCloneError){const e={penpal:Ut.Reply,id:l,resolution:zt.Rejected,returnValue:$t(t),returnValueIsError:!0};o.postMessage(e,s)}throw t}};new Promise((t=>t(e[c].apply(e,h)))).then(d(zt.Fulfilled),d(zt.Rejected))};return i.addEventListener(qt.Message,c),()=>{u=!0,i.removeEventListener(qt.Message,c)}})(h,t,i),s(a),u&&u.forEach((t=>{delete c[t]})),u=n.data.methodNames;const l=Yt(c,h,u,o,i);return s(l),c}};var Qt=t=>{let{iframe:e,methods:r={},childOrigin:n,timeout:i,debug:o=!1}=t;const s=(t=>(...e)=>{t&&console.log("[Penpal]",...e)})(o),a=((t,e)=>{const r=[];let n=!1;return{destroy(i){n||(n=!0,e(`${t}: Destroying connection`),r.forEach((t=>{t(i)})))},onDestroy(t){n?t():r.push(t)}}})("Parent",s),{onDestroy:u,destroy:c}=a;n||((t=>{if(!t.src&&!t.srcdoc){const t=new Error("Iframe must have src or srcdoc property defined.");throw t.code=Wt.NoIframeSrc,t}})(e),n=(t=>{if(t&&Dt.find((e=>t.startsWith(e))))return"null";const e=document.location,r=Ft.exec(t);let n,i,o;return r?(n=r[1]?r[1]:e.protocol,i=r[2],o=r[4]):(n=e.protocol,i=e.hostname,o=e.port),`${n}//${i}${o&&o!==Kt[n]?`:${o}`:""}`})(e.src));const h="null"===n?"*":n,l=Jt(r),d=((t,e,r,n)=>i=>{if(!i.source)return;if("*"!==r&&i.origin!==r)return void t(`Parent: Handshake - Received SYN message from origin ${i.origin} which did not match expected origin ${r}`);t("Parent: Handshake - Received SYN, responding with SYN-ACK");const o={penpal:Ut.SynAck,methodNames:Object.keys(e)};i.source.postMessage(o,n)})(s,l,n,h),f=Xt(l,n,h,a,s),p=new Promise(((t,r)=>{const n=((t,e)=>{let r;return void 0!==t&&(r=window.setTimeout((()=>{const r=new Error(`Connection timed out after ${t}ms`);r.code=Wt.ConnectionTimeout,e(r)}),t)),()=>{clearTimeout(r)}})(i,c),o=r=>{if(r.source===e.contentWindow&&r.data)if(r.data.penpal!==Ut.Syn)if(r.data.penpal!==Ut.Ack);else{const e=f(r);e&&(n(),t(e))}else d(r)};window.addEventListener(qt.Message,o),s("Parent: Awaiting handshake"),((t,e)=>{const{destroy:r,onDestroy:n}=e,i=setInterval((()=>{t.isConnected||(clearInterval(i),r())}),6e4);n((()=>{clearInterval(i)}))})(e,a),u((t=>{window.removeEventListener(qt.Message,o),t&&r(t)}))}));return{promise:p,destroy(){c()}}};const te={border:"none",position:"fixed",height:0,width:0,right:0,bottom:0,zIndex:2147483648},ee="xar-wallet";class re{constructor(t){this.params=t,this.getSessionID=()=>{const t=window.localStorage.getItem(`arcana-auth-${this.getIframeUrl()}-sessionID`);return t?JSON.parse(t):null},this.setSessionID=(t,e)=>{window.localStorage.setItem(`arcana-auth-${this.getIframeUrl()}-sessionID`,JSON.stringify({id:t,expiry:e}))},this.clearSessionID=()=>{window.localStorage.removeItem(`arcana-auth-${this.getIframeUrl()}-sessionID`)},this.setIframeStyle=t=>{var e;if(1==(null===(e=this.params.standaloneMode)||void 0===e?void 0:e.mode))this.widgetIframe.style.height=t.height?t.height:"80vh",this.widgetIframe.style.maxWidth="100%",this.widgetIframe.style.width="430px",this.widgetIframe.style.bottom="0",this.widgetIframe.style.right="0";else for(const e in t)this.widgetIframe.style[e]=t[e]},this.getWalletPlace=()=>this.params.position,this.getAppConfig=()=>this.params.appConfig,this.checkDuplicateIframe(),this.checkSecureOrigin()}setConnectionMethods(t){return r(this,void 0,void 0,(function*(){try{return this.iframeCommunication||(this.iframeCommunication=Qt({iframe:this.widgetIframe,methods:Object.assign(Object.assign({},t),{uiEvent:(t,e)=>{var r;(null===(r=this.params.standaloneMode)||void 0===r?void 0:r.handler)&&this.params.standaloneMode.handler(t,e)}}),childOrigin:this.params.iframeUrl}),yield this.iframeCommunication.promise),{iframe:this.widgetIframe,communication:this.iframeCommunication}}catch(t){throw new Error("Could not set connection methods")}}))}triggerBearerAuthentication(t,e){return r(this,void 0,void 0,(function*(){return(yield this.iframeCommunication.promise).triggerBearerLogin(t,e)}))}setWalletType(t){this.appMode=null!=t?t:Nt.Full,this.initWalletUI()}getState(){return this.state}handleDisconnect(){this.widgetIframe.src=this.getIframeUrl(),this.clearSessionID()}onReceivingPendingRequestCount(t){const e=document.getElementById("req-count-badge");e&&(t>0?(e.style.display="flex",e.textContent=`${t}`):e.style.display="none")}getIframeUrl(){var t,e;const r=At({standaloneMode:(null===(t=this.params.standaloneMode)||void 0===t?void 0:t.mode)?null===(e=this.params.standaloneMode)||void 0===e?void 0:e.mode:0}),n=new URL(`/${this.params.appId}/v2/login`,this.params.iframeUrl);return n.hash=r,n.toString()}createWidgetIframe(){return((t,e,...r)=>{const n=document.createElement(t);e&&(Object.assign(n,e),e.style&&Object.assign(n.style,e.style));for(const t of r)"string"!=typeof t?n.appendChild(t):n.appendChild(document.createTextNode(t));return n})("iframe",{style:te,src:this.getIframeUrl(),allow:"clipboard-write",className:ee})}checkDuplicateIframe(){[].slice.call(document.querySelectorAll(`.${ee}`)).length>0&&nt.log()}initWalletUI(){this.widgetIframe=this.createWidgetIframe(),document.body.appendChild(this.widgetIframe)}checkSecureOrigin(){const t="localhost"===location.hostname||"127.0.0.1"===location.hostname,e="https:"===location.protocol;if(!(t||e))throw new Error("Insecure origin")}}const ne={authUrl:"https://verify.dev.arcana.network",gatewayUrl:"https://gateway-dev.arcana.network",walletUrl:"https://wallet.dev.arcana.network"},ie={authUrl:"https://verify.beta.arcana.network",gatewayUrl:"https://gateway001-testnet.arcana.network",walletUrl:"https://wallet.beta.arcana.network"},oe={authUrl:"https://auth.arcana.network",gatewayUrl:"https://gateway.arcana.network",walletUrl:"https://wallet.arcana.network"};function se(t,e){return r(this,void 0,void 0,(function*(){const r=new URL(`/api/v1/get-app-theme/?id=${t}`,e);return yield(yield fetch(r.toString())).json()}))}function ae(t,e){return r(this,void 0,void 0,(function*(){const r=new URL(`/api/v1/get-app-config/?id=${t}`,e);return yield(yield fetch(r.toString())).json()}))}var ue,ce,he,le,de,fe={},pe=[],ge=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function me(t,e){for(var r in e)t[r]=e[r];return t}function ye(t){var e=t.parentNode;e&&e.removeChild(t)}function we(t,e,r,n,i){var o={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++he:i};return null==i&&null!=ce.vnode&&ce.vnode(o),o}function be(t){return t.children}function ve(t,e){this.props=t,this.context=e}function _e(t,e){if(null==e)return t.__?_e(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?_e(t):null}function ke(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return ke(t)}}function Se(t){(!t.__d&&(t.__d=!0)&&le.push(t)&&!xe.__r++||de!==ce.debounceRendering)&&((de=ce.debounceRendering)||setTimeout)(xe)}function xe(){for(var t;xe.__r=le.length;)t=le.sort((function(t,e){return t.__v.__b-e.__v.__b})),le=[],t.some((function(t){var e,r,n,i,o,s;t.__d&&(o=(i=(e=t).__v).__e,(s=e.__P)&&(r=[],(n=me({},i)).__v=i.__v+1,Re(s,i,n,e.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,r,null==o?_e(i):o,i.__h),Le(r,i),i.__e!=o&&ke(i)))}))}function Ee(t,e,r,n,i,o,s,a,u,c){var h,l,d,f,p,g,m,y=n&&n.__k||pe,w=y.length;for(r.__k=[],h=0;h<e.length;h++)if(null!=(f=r.__k[h]=null==(f=e[h])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?we(null,f,null,null,f):Array.isArray(f)?we(be,{children:f},null,null,null):f.__b>0?we(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=r,f.__b=r.__b+1,null===(d=y[h])||d&&f.key==d.key&&f.type===d.type)y[h]=void 0;else for(l=0;l<w;l++){if((d=y[l])&&f.key==d.key&&f.type===d.type){y[l]=void 0;break}d=null}Re(t,f,d=d||fe,i,o,s,a,u,c),p=f.__e,(l=f.ref)&&d.ref!=l&&(m||(m=[]),d.ref&&m.push(d.ref,null,f),m.push(l,f.__c||p,f)),null!=p?(null==g&&(g=p),"function"==typeof f.type&&f.__k===d.__k?f.__d=u=Ie(f,u,t):u=Me(t,f,d,y,p,u),"function"==typeof r.type&&(r.__d=u)):u&&d.__e==u&&u.parentNode!=t&&(u=_e(d))}for(r.__e=g,h=w;h--;)null!=y[h]&&Ne(y[h],y[h]);if(m)for(h=0;h<m.length;h++)Ce(m[h],m[++h],m[++h])}function Ie(t,e,r){for(var n,i=t.__k,o=0;i&&o<i.length;o++)(n=i[o])&&(n.__=t,e="function"==typeof n.type?Ie(n,e,r):Me(r,n,n,i,n.__e,e));return e}function Me(t,e,r,n,i,o){var s,a,u;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==r||i!=o||null==i.parentNode)t:if(null==o||o.parentNode!==t)t.appendChild(i),s=null;else{for(a=o,u=0;(a=a.nextSibling)&&u<n.length;u+=2)if(a==i)break t;t.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function Ae(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]=null==r?"":"number"!=typeof r||ge.test(e)?r:r+"px"}function Be(t,e,r,n,i){var o;t:if("style"===e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Ae(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||Ae(t.style,e,r[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?n||t.addEventListener(e,o?Oe:Pe,o):t.removeEventListener(e,o?Oe:Pe,o);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==r?"":r;break t}catch(t){}"function"==typeof r||(null==r||!1===r&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,r))}}function Pe(t){this.l[t.type+!1](ce.event?ce.event(t):t)}function Oe(t){this.l[t.type+!0](ce.event?ce.event(t):t)}function Re(t,e,r,n,i,o,s,a,u){var c,h,l,d,f,p,g,m,y,w,b,v,_,k=e.type;if(void 0!==e.constructor)return null;null!=r.__h&&(u=r.__h,a=e.__e=r.__e,e.__h=null,o=[a]),(c=ce.__b)&&c(e);try{t:if("function"==typeof k){m=e.props,y=(c=k.contextType)&&n[c.__c],w=c?y?y.props.value:c.__:n,r.__c?g=(h=e.__c=r.__c).__=h.__E:("prototype"in k&&k.prototype.render?e.__c=h=new k(m,w):(e.__c=h=new ve(m,w),h.constructor=k,h.render=Ue),y&&y.sub(h),h.props=m,h.state||(h.state={}),h.context=w,h.__n=n,l=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=k.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=me({},h.__s)),me(h.__s,k.getDerivedStateFromProps(m,h.__s))),d=h.props,f=h.state;for(c=0;c<h._sb.length;c++)h.__h.push(h._sb[c]),h._sb=[];if(l)null==k.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==k.getDerivedStateFromProps&&m!==d&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,w),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,w)||e.__v===r.__v){h.props=m,h.state=h.__s,e.__v!==r.__v&&(h.__d=!1),h.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach((function(t){t&&(t.__=e)})),h.__h.length&&s.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,w),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(d,f,p)}))}if(h.context=w,h.props=m,h.__v=e,h.__P=t,b=ce.__r,v=0,"prototype"in k&&k.prototype.render)h.state=h.__s,h.__d=!1,b&&b(e),c=h.render(h.props,h.state,h.context);else do{h.__d=!1,b&&b(e),c=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++v<25);h.state=h.__s,null!=h.getChildContext&&(n=me(me({},n),h.getChildContext())),l||null==h.getSnapshotBeforeUpdate||(p=h.getSnapshotBeforeUpdate(d,f)),_=null!=c&&c.type===be&&null==c.key?c.props.children:c,Ee(t,Array.isArray(_)?_:[_],e,r,n,i,o,s,a,u),h.base=e.__e,e.__h=null,h.__h.length&&s.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==o&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Te(r.__e,e,r,n,i,o,s,u);(c=ce.diffed)&&c(e)}catch(t){e.__v=null,(u||null!=o)&&(e.__e=a,e.__h=!!u,o[o.indexOf(a)]=null),ce.__e(t,e,r)}}function Le(t,e){ce.__c&&ce.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){ce.__e(t,e.__v)}}))}function Te(t,e,r,n,i,o,s,a){var u,c,h,l=r.props,d=e.props,f=e.type,p=0;if("svg"===f&&(i=!0),null!=o)for(;p<o.length;p++)if((u=o[p])&&"setAttribute"in u==!!f&&(f?u.localName===f:3===u.nodeType)){t=u,o[p]=null;break}if(null==t){if(null===f)return document.createTextNode(d);t=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,d.is&&d),o=null,a=!1}if(null===f)l===d||a&&t.data===d||(t.data=d);else{if(o=o&&ue.call(t.childNodes),c=(l=r.props||fe).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!a){if(null!=o)for(l={},p=0;p<t.attributes.length;p++)l[t.attributes[p].name]=t.attributes[p].value;(h||c)&&(h&&(c&&h.__html==c.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,r,n,i){var o;for(o in r)"children"===o||"key"===o||o in e||Be(t,o,null,r[o],n);for(o in e)i&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||r[o]===e[o]||Be(t,o,e[o],r[o],n)}(t,d,l,i,a),h)e.__k=[];else if(p=e.props.children,Ee(t,Array.isArray(p)?p:[p],e,r,n,i&&"foreignObject"!==f,o,s,o?o[0]:r.__k&&_e(r,0),a),null!=o)for(p=o.length;p--;)null!=o[p]&&ye(o[p]);a||("value"in d&&void 0!==(p=d.value)&&(p!==t.value||"progress"===f&&!p||"option"===f&&p!==l.value)&&Be(t,"value",p,l.value,!1),"checked"in d&&void 0!==(p=d.checked)&&p!==t.checked&&Be(t,"checked",p,l.checked,!1))}return t}function Ce(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){ce.__e(t,r)}}function Ne(t,e,r){var n,i;if(ce.unmount&&ce.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||Ce(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){ce.__e(t,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Ne(n[i],e,r||"function"!=typeof t.type);r||null==t.__e||ye(t.__e),t.__=t.__e=t.__d=void 0}function Ue(t,e,r){return this.constructor(t,r)}function ze(t,e,r){var n,i,o;ce.__&&ce.__(t,e),i=(n="function"==typeof r)?null:r&&r.__k||e.__k,o=[],Re(e,t=(!n&&r||e).__k=function(t,e,r){var n,i,o,s={};for(o in e)"key"==o?n=e[o]:"ref"==o?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?ue.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return we(t,s,n,i,null)}(be,null,[t]),i||fe,fe,void 0!==e.ownerSVGElement,!n&&r?[r]:i?null:e.firstChild?ue.call(e.childNodes):null,o,!n&&r?r:i?i.__e:e.firstChild,n),Le(o,t)}ue=pe.slice,ce={__e:function(t,e,r,n){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(t,n||{}),s=i.__d),s)return i.__E=i}catch(e){t=e}throw t}},he=0,ve.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=me({},this.state),"function"==typeof t&&(t=t(me({},r),this.props)),t&&me(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),Se(this))},ve.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Se(this))},ve.prototype.render=be,le=[],xe.__r=0;var We=0;function je(t,e,r,n,i){var o,s,a={};for(s in e)"ref"==s?o=e[s]:a[s]=e[s];var u={type:t,props:a,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--We,__source:i,__self:n};if("function"==typeof t&&(o=t.defaultProps))for(s in o)void 0===a[s]&&(a[s]=o[s]);return ce.vnode&&ce.vnode(u),u}var qe,Ke,Fe,De,$e=0,He=[],Ve=[],Ge=ce.__b,Ze=ce.__r,Je=ce.diffed,Ye=ce.__c,Xe=ce.unmount;function Qe(t,e){ce.__h&&ce.__h(Ke,t,$e||e),$e=0;var r=Ke.__H||(Ke.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:Ve}),r.__[t]}function tr(t){return $e=1,er(hr,t)}function er(t,e,r){var n=Qe(qe++,2);if(n.t=t,!n.__c&&(n.__=[r?r(e):hr(void 0,e),function(t){var e=n.__N?n.__N[0]:n.__[0],r=n.t(e,t);e!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=Ke,!Ke.u)){Ke.u=!0;var i=Ke.shouldComponentUpdate;Ke.shouldComponentUpdate=function(t,e,r){if(!n.__c.__H)return!0;var o=n.__c.__H.__.filter((function(t){return t.__c}));if(o.every((function(t){return!t.__N})))return!i||i.call(this,t,e,r);var s=!1;return o.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(s=!0)}})),!(!s&&n.__c.props===t)&&(!i||i.call(this,t,e,r))}}return n.__N||n.__}function rr(t,e){var r=Qe(qe++,3);!ce.__s&&cr(r.__H,e)&&(r.__=t,r.i=e,Ke.__H.__h.push(r))}function nr(t){return $e=5,function(t,e){var r=Qe(qe++,7);return cr(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}((function(){return{current:t}}),[])}function ir(){for(var t;t=He.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ar),t.__H.__h.forEach(ur),t.__H.__h=[]}catch(e){t.__H.__h=[],ce.__e(e,t.__v)}}ce.__b=function(t){"function"!=typeof t.type||t.__m||t.type===be?t.__m||(t.__m=t.__&&t.__.__m?t.__.__m:""):t.__m=(t.__&&t.__.__m?t.__.__m:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),Ke=null,Ge&&Ge(t)},ce.__r=function(t){Ze&&Ze(t),qe=0;var e=(Ke=t.__c).__H;e&&(Fe===Ke?(e.__h=[],Ke.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=Ve,t.__N=t.i=void 0}))):(e.__h.forEach(ar),e.__h.forEach(ur),e.__h=[])),Fe=Ke},ce.diffed=function(t){Je&&Je(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==He.push(e)&&De===ce.requestAnimationFrame||((De=ce.requestAnimationFrame)||sr)(ir)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==Ve&&(t.__=t.__V),t.i=void 0,t.__V=Ve}))),Fe=Ke=null},ce.__c=function(t,e){e.some((function(t){try{t.__h.forEach(ar),t.__h=t.__h.filter((function(t){return!t.__||ur(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],ce.__e(r,t.__v)}})),Ye&&Ye(t,e)},ce.unmount=function(t){Xe&&Xe(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{ar(t)}catch(t){e=t}})),r.__H=void 0,e&&ce.__e(e,r.__v))};var or="function"==typeof requestAnimationFrame;function sr(t){var e,r=function(){clearTimeout(n),or&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);or&&(e=requestAnimationFrame(r))}function ar(t){var e=Ke,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),Ke=e}function ur(t){var e=Ke;t.__c=t.__(),Ke=e}function cr(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function hr(t,e){return"function"==typeof e?e(t):e}const lr="https://auth-icons.s3.ap-south-1.amazonaws.com",dr={google:`${lr}/google.png`,twitter:`${lr}/twitter.png`,github:`${lr}/github-light.png`,github_light:`${lr}/github.png`,twitch:`${lr}/twitch.png`,discord:`${lr}/discord.png`,aws:`${lr}/aws.png`,aws_light:`${lr}/aws_light.png`,steam:`${lr}/steam.png`};const fr={light:`${lr}/secured-by-arcana-light.svg`,dark:`${lr}/secured-by-arcana-dark.svg`};function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function gr(t){if(!("string"==typeof t||t instanceof String)){var e=pr(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}}function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function yr(t,e){var r,n;gr(t),"object"===mr(e)?(r=e.min||0,n=e.max):(r=arguments[1],n=arguments[2]);var i=encodeURI(t).split(/%..|./).length-1;return i>=r&&(void 0===n||i<=n)}function wr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}var br={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};var vr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",_r="(".concat(vr,"[.]){3}").concat(vr),kr=new RegExp("^".concat(_r,"$")),Sr="(?:[0-9a-fA-F]{1,4})",xr=new RegExp("^("+"(?:".concat(Sr,":){7}(?:").concat(Sr,"|:)|")+"(?:".concat(Sr,":){6}(?:").concat(_r,"|:").concat(Sr,"|:)|")+"(?:".concat(Sr,":){5}(?::").concat(_r,"|(:").concat(Sr,"){1,2}|:)|")+"(?:".concat(Sr,":){4}(?:(:").concat(Sr,"){0,1}:").concat(_r,"|(:").concat(Sr,"){1,3}|:)|")+"(?:".concat(Sr,":){3}(?:(:").concat(Sr,"){0,2}:").concat(_r,"|(:").concat(Sr,"){1,4}|:)|")+"(?:".concat(Sr,":){2}(?:(:").concat(Sr,"){0,3}:").concat(_r,"|(:").concat(Sr,"){1,5}|:)|")+"(?:".concat(Sr,":){1}(?:(:").concat(Sr,"){0,4}:").concat(_r,"|(:").concat(Sr,"){1,6}|:)|")+"(?::((?::".concat(Sr,"){0,5}:").concat(_r,"|(?::").concat(Sr,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function Er(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return gr(t),(e=String(e))?"4"===e?kr.test(t):"6"===e&&xr.test(t):Er(t,4)||Er(t,6)}var Ir={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},Mr=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,Ar=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,Br=/^[a-z\d]+$/,Pr=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,Or=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,Rr=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function Lr(t,e){if(gr(t),(e=wr(e,Ir)).require_display_name||e.allow_display_name){var r=t.match(Mr);if(r){var n=r[1];if(t=t.replace(n,"").replace(/(^<|>$)/g,""),n.endsWith(" ")&&(n=n.slice(0,-1)),!function(t){var e=t.replace(/^"(.+)"$/,"$1");if(!e.trim())return!1;if(/[\.";<>]/.test(e)){if(e===t)return!1;if(e.split('"').length!==e.split('\\"').length)return!1}return!0}(n))return!1}else if(e.require_display_name)return!1}if(!e.ignore_max_length&&t.length>254)return!1;var i=t.split("@"),o=i.pop(),s=o.toLowerCase();if(e.host_blacklist.includes(s))return!1;if(e.host_whitelist.length>0&&!e.host_whitelist.includes(s))return!1;var a=i.join("@");if(e.domain_specific_validation&&("gmail.com"===s||"googlemail.com"===s)){var u=(a=a.toLowerCase()).split("+")[0];if(!yr(u.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=u.split("."),h=0;h<c.length;h++)if(!Br.test(c[h]))return!1}if(!(!1!==e.ignore_max_length||yr(a,{max:64})&&yr(o,{max:254})))return!1;if(!function(t,e){gr(t),(e=wr(e,br)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1)),!0===e.allow_wildcard&&0===t.indexOf("*.")&&(t=t.substring(2));var r=t.split("."),n=r[r.length-1];if(e.require_tld){if(r.length<2)return!1;if(!e.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1;if(/\s/.test(n))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(n))&&r.every((function(t){return!(t.length>63&&!e.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)||/[\uff01-\uff5e]/.test(t)||/^-|-$/.test(t)||!e.allow_underscores&&/_/.test(t))}))}(o,{require_tld:e.require_tld,ignore_max_length:e.ignore_max_length,allow_underscores:e.allow_underscores})){if(!e.allow_ip_domain)return!1;if(!Er(o)){if(!o.startsWith("[")||!o.endsWith("]"))return!1;var l=o.slice(1,-1);if(0===l.length||!Er(l))return!1}}if('"'===a[0])return a=a.slice(1,a.length-1),e.allow_utf8_local_part?Rr.test(a):Pr.test(a);for(var d=e.allow_utf8_local_part?Or:Ar,f=a.split("."),p=0;p<f.length;p++)if(!d.test(f[p]))return!1;return!e.blacklisted_chars||-1===a.search(new RegExp("[".concat(e.blacklisted_chars,"]+"),"g"))}function Tr(t){const e=t.width?t.width:t.compact?60:80,{stroke:r=8,secondaryColor:n}=t;return je("div",Object.assign({"aria-label":"oval-loading"},{children:je("svg",Object.assign({width:e,height:e,viewBox:Cr(Number(r),20),xmlns:"http://www.w3.org/2000/svg",className:"xar-loader-circle","data-testid":"oval-svg"},{children:je("g",Object.assign({fill:"none",fillRule:"evenodd"},{children:je("g",Object.assign({transform:"translate(1 1)","stroke-width":r,"data-testid":"oval-secondary-group"},{children:[je("circle",{strokeOpacity:".5",cx:"0",cy:"0",r:20,stroke:n,"stroke-width":r,opacity:.3}),je("path",Object.assign({d:Nr(20),stroke:t.strokeColor},{children:je("animateTransform",{attributeName:"transform",type:"rotate",from:"0 0 0",to:"360 0 0",dur:"1s",repeatCount:"indefinite"})}))]}))}))}))}))}const Cr=(t,e)=>{const r=-e-t/2+1,n=2*e+t;return[r,r,n,n].join(" ")},Nr=t=>["M"+t+" 0c0-9.94-8.06",t,t,t].join("-");!function(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}("@import url('https://fonts.googleapis.com/css2?family=Sora:wght@100;400;600;700&display=block');\n@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Sora:wght@400;600&display=block');\n\n.xar-light-mode {\n  --fg: #333333;\n  --bg: #eff1f3;\n  --background: #fcfcfc;\n  --inputShadow: 0 0 8px 3px rgba(126, 126, 126, 0.25);\n  --text-color: #101010;\n  --otp-bg: #eeeeee;\n  --otp-shadow: 1px 1px 2px 0px #aeaec033 inset,\n    -1px -1px 1px 0px #ffffffb2 inset;\n}\n\n.xar-dark-mode {\n  --fg: #ffffff;\n  --bg: #313131;\n  --background: #262626;\n  --inputShadow: 0 0 8px 3px rgba(0, 0, 0, 0.05);\n  --text-color: #f7f7f7;\n  --otp-bg: linear-gradient(141.48deg, #161616 -4.56%, #151515 135.63%);\n  --otp-shadow: -50px 49px 29px 22px #1c1c1cd6 inset,\n    5px 5px 10px 0px #0b0b0b80 inset;\n}\n\n.compact {\n  --modal-height: 235px;\n  --loader-font-size: 14px;\n  --loader-font-weight: 400;\n  --success-img-width: 70px;\n  --action-link-size: 12px;\n}\n\n.full {\n  --modal-height: 480px;\n  --loader-font-size: 20px;\n  --loader-font-weight: 700;\n  --success-img-width: 100px;\n  --action-link-size: 15px;\n}\n\n#xar-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  z-index: 2147483648;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background: rgba(10, 10, 10, 0.7);\n  backdrop-filter: blur(16px);\n  font-family: Sora, sans-serif;\n}\n\n.xar-header-logo__container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid var(--fg);\n}\n\n.xar-header-logo__empty-container {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.xar-header-logo {\n  max-width: 60px;\n  max-height: 60px;\n  margin: 0 auto;\n  display: inline-block;\n}\n\n.xar-header-heading {\n  font-family: 'Sora', sans-serif;\n  text-align: center;\n}\n\n.xar-header-subtext {\n  font-family: 'Sora', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  max-width: 200px;\n}\n\n.xar-email-login {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.xar-email-login > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-email-login__label {\n  text-align: left;\n  font-size: 14px;\n  color: var(--fg);\n  font-weight: 400;\n}\n\n.xar-success__img {\n  max-width: var(--success-img-width);\n}\n\n.xar-email-login__input {\n  height: 45px;\n  padding: 0 16px;\n  font-family: 'Sora', sans-serif;\n  font-size: 14px;\n  font-weight: 400;\n  color: var(--fg);\n  background: var(--bg);\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  box-shadow: var(--inputShadow);\n}\n\n.xar-social-container {\n  display: flex;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n\n.xar-social-icon__wrapper {\n  display: flex;\n  background: var(--fg);\n  width: 42px;\n  height: 42px;\n  border-radius: 50%;\n  align-items: center;\n}\n\n.xar-social-icon__wrapper:hover {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.15, 1.15);\n}\n\n.xar-social-icon {\n  margin: 0 auto;\n  width: 24px;\n  max-height: 24px;\n}\n\n.xar-container {\n  padding: 30px 30px 20px;\n  width: 325px;\n  min-height: var(--modal-height);\n  background-color: var(--background);\n  color: var(--fg);\n  margin: 0 auto;\n  font-family: 'Sora', sans-serif;\n  box-shadow: 4px 5px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 10px;\n  box-sizing: content-box;\n  transition: all 1s ease;\n}\n\n.xar-inner-container {\n  min-height: inherit;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n}\n\n.xar-inner-container > *:not(:first-child) {\n  margin-top: 20px;\n}\n\n.xar-btn {\n  margin: 0 auto;\n  padding: 0;\n  width: 100%;\n  height: 2.75rem;\n  font-size: 14px;\n  font-weight: 600;\n  text-transform: uppercase;\n  color: var(--bg);\n  background: var(--fg);\n  border: none;\n  border-radius: 5px;\n}\n\n.xar-btn:disabled {\n  opacity: 0.7;\n}\n\n.xar-btn:hover:enabled {\n  cursor: pointer;\n  transition: all 0.5s;\n  transform: scale(1.05, 1.15);\n}\n\n.xar-btn:disabled,\n.xar-btn[disabled] {\n  cursor: not-allowed;\n}\n\n.xar-footer {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 1rem;\n}\n\n.xar-footer-text {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.xar-footer-img__link {\n  height: 15px;\n}\n\n.xar-footer-img {\n  display: block;\n}\n\n.xar-separator {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  text-align: center;\n}\n\n.xar-separator:before,\n.xar-separator:after {\n  content: '';\n  flex: 1 1 auto;\n  border-bottom: 1px solid var(--fg);\n}\n\n.xar-separator:before {\n  margin-right: 1rem;\n}\n\n.xar-separator:after {\n  margin-left: 1rem;\n}\n\n.xar-action__link {\n  border: 0;\n  background: none;\n  text-underline-offset: 3px;\n  text-transform: uppercase;\n  text-decoration: underline;\n  color: #3e9aff;\n  font-weight: 700;\n  font-size: var(--action-link-size);\n  line-height: 19px;\n  cursor: pointer;\n}\n\n.xar-action__link:disabled {\n  color: #667b91;\n  cursor: not-allowed;\n}\n\n.xar-loader__text {\n  font-size: var(--loader-font-size);\n  font-weight: var(--loader-font-weight);\n}\n\n.xar-loader-circle {\n  stroke: var(--fg);\n}\n\n.xar-otp-box {\n  display: flex;\n  gap: 0.5em;\n}\n\n.xar-otp-input {\n  color: var(--fg);\n  font-size: 20px;\n  font-weight: 400;\n  border: none;\n  outline: none;\n  text-align: center;\n  width: 30px;\n  height: 35px;\n  border-radius: 10px;\n  background: var(--otp-bg);\n  box-shadow: var(--otp-shadow);\n}\n\n.xar-invalid-otp {\n  border: 1px solid #b43030;\n}\n\n.xar-invalid-otp-text {\n  color: #b43030;\n}\n\n.xar-otp-input:disabled {\n  opacity: 0.5;\n}\n\n.xar-otp-heading {\n  font-family: 'Montserrat', sans-serif;\n  font-size: 24px;\n  font-weight: 700;\n  text-align: center;\n  color: var(--text-color);\n}\n\n.xar-otp-sub-heading {\n  font-family: 'Montserrat', sans-serif;\n  font-size: 12px;\n  font-weight: 400;\n  text-align: center;\n  color: var(--text-color);\n}\n\n.xar-otp-error-heading {\n  color: var(--fg);\n  font-weight: 700;\n  font-size: 24px;\n  font-family: 'Montserrat', sans-serif;\n}\n.xar-otp-error-subheading {\n  color: var(--text-color);\n  font-weight: 400;\n  font-size: 12px;\n  font-family: 'Montserrat', sans-serif;\n}\n");const Ur=({compact:t,logo:e})=>{const[r,n]=tr(!1);return je(be,{children:[r?"":je("div",{className:"xar-header-logo__empty-container"}),je("div",Object.assign({className:"xar-header-logo__container",style:r?{}:{display:"none"}},{children:je("img",{className:"xar-header-logo",src:e,alt:"app-logo",onLoad:()=>{n(!1)}})})),t?"":je("div",Object.assign({className:"xar-header-text"},{children:[je("h1",Object.assign({className:"xar-header-heading"},{children:"Welcome"})),je("p",Object.assign({className:"xar-header-subtext"},{children:"We’ll email you a login link for a password-free sign in."}))]}))]})},zr=({loginWithOTPStart:t,email:e,setEmail:n})=>{const[i,o]=tr(!0);return rr((()=>{o(!Lr(e))}),[]),je("form",Object.assign({className:"xar-email-login"},{children:[je("input",{value:e,onInput:t=>{n(t.currentTarget.value),o(!Lr(t.currentTarget.value))},className:"xar-email-login__input",type:"text",placeholder:"Enter your email"}),je("button",Object.assign({disabled:i,onClick:n=>r(void 0,void 0,void 0,(function*(){if(n.preventDefault(),!e)return;o(!0);const r=yield t(e);yield r.begin(),o(!1)})),className:"xar-btn"},{children:"Get Login OTP"}))]}))},Wr=({text:t})=>je("div",Object.assign({className:"xar-separator"},{children:t})),jr=({loginWithSocial:t,loginList:e,mode:r})=>je("div",Object.assign({className:"xar-social-container"},{children:e.map((e=>{return je("div",Object.assign({className:"xar-social-icon__wrapper",onClick:()=>(e=>t(e))(e)},{children:je("img",{src:(n=e,i=r,dr[`${n}_${i}`]?dr[`${n}_${i}`]:dr[n]),alt:`${e} logo`,className:"xar-social-icon"})}));var n,i}))})),qr=({mode:t})=>{const e=fr[t];return je("div",Object.assign({className:"xar-footer"},{children:je("a",Object.assign({href:"https://arcana.network",target:"_blank",className:"xar-footer-img__link"},{children:je("img",{className:"xar-footer-img",src:e,alt:"Secured By Arcana"})}))}))},Kr=t=>je(be,{children:[t.header?t.header:je(Tr,{compact:t.compact,stroke:8,secondaryColor:"#8D8D8D"}),t.text?je("p",Object.assign({className:"xar-loader__text"},{children:t.text})):"",t.children?je(be,{children:t.children}):""]}),Fr=({loginWithOtpStart:t,loginWithOtpComplete:e,setError:n,closeFunc:i,compact:o})=>{const{counter:s,resetCounter:a}=Dr(30),[u,c]=tr(3),[h,l]=tr(!1),[d,f]=tr({loading:!1,text:""}),[p,g]=tr(""),[m,y]=tr(0),w=nr([]),b=()=>p?p.toString().split(""):[],v=()=>{i()};rr((()=>{6==p.length&&(l(!1),_(),f({loading:!0,text:"Processing..."}),e(p,v).then((()=>f({loading:!1,text:""}))).catch((t=>{console.log(t),c((t=>t-1)),l(!0),f({loading:!1,text:""}),g(""),k()})))}),[p]),rr((()=>{0==u&&n()}),[u]),rr((()=>{var t;null===(t=w.current[0])||void 0===t||t.focus()}),[]);const _=()=>{for(let t=0;t<6;t++){const e=w.current[t];e&&(e.disabled=!0)}},k=()=>{for(let t=0;t<6;t++){const e=w.current[t];e&&(e.disabled=!1)}},S=t=>{const e=b();e[m]=t[0],x(e)},x=t=>{const e=t.join("");g(e)},E=t=>{const e=t.target;var r;r=e.value,isNaN(Number(r))||1!==r.trim().length?(null===t.data&&"deleteContentBackward"===t.inputType&&(t.preventDefault(),S(""),M(m-1)),e.value=""):(S(e.value),M(m+1))},I=t=>{const e=b();[t.code,t.key].includes("Backspace")?(t.preventDefault(),S(""),M(m-1)):"Delete"===t.code?(t.preventDefault(),S("")):"ArrowLeft"===t.code?(t.preventDefault(),M(m-1)):"ArrowRight"===t.code||t.key===e[m]?(t.preventDefault(),M(m+1)):"Spacebar"!==t.code&&"Space"!==t.code&&"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault()},M=t=>{var e,r;const n=Math.max(Math.min(5,t),0);w.current[n]&&(null===(e=w.current[n])||void 0===e||e.focus(),null===(r=w.current[n])||void 0===r||r.select(),y(n))},A=t=>{var e;t.preventDefault();const r=b();let n=m;if(!t.clipboardData)return;const i=t.clipboardData.getData("text/plain").slice(0,6-m).split("");if(!i.some((t=>isNaN(Number(t))))){for(let t=0;t<6;++t)t>=m&&i.length>0&&(r[t]=null!==(e=i.shift())&&void 0!==e?e:"",n++);M(n),x(r)}};return d.loading?je(be,{children:[je(Tr,{stroke:8,secondaryColor:"#8D8D8D",compact:o}),je("div",Object.assign({class:"xar-loader__text"},{children:d.text}))]}):je(be,{children:[je("div",Object.assign({class:"xar-otp-heading"},{children:"Verification"})),je("div",Object.assign({class:"xar-otp-sub-heading"},{children:["Please enter the OTP that was sent to your ",je("br",{}),"email address"]})),je("div",Object.assign({className:"xar-otp-box"},{children:Array(6).fill(null).map(((t,e)=>{var r;return je("input",{value:null!==(r=b()[e])&&void 0!==r?r:"",type:"text",maxLength:1,autoComplete:"off",ref:t=>w.current[e]=t,onFocus:t=>(t=>e=>{y(e),t.target.select()})(t)(e),onInput:E,onKeyDown:I,onPaste:A,className:h?"xar-otp-input xar-invalid-otp":"xar-otp-input"},e)}))})),h?je("div",{children:je("p",Object.assign({class:"xar-invalid-otp-text"},{children:["Incorrect OTP. ",u," attempts left."]}))}):"",je("div",{children:je(Vr,{disabled:s>0,text:s>0?`Resend code in ${s} seconds`:"Resend code",method:()=>r(void 0,void 0,void 0,(function*(){f({loading:!0,text:"Sending OTP to your email address"}),yield t(),a(),f({loading:!1,text:""})}))})})]})},Dr=(t=60)=>{const[e,r]=tr(t);return rr((()=>{if(0==e)return void r(0);const t=setInterval((()=>{r(e-1)}),1e3);return()=>clearInterval(t)}),[e]),{counter:e,resetCounter:()=>r(t)}},$r=({action:t})=>je(be,{children:[je("img",{class:"xar-header-logo",src:wt,alt:"failed"}),je("h2",Object.assign({class:"xar-otp-error-heading"},{children:"Login Failed"})),je("p",Object.assign({class:"xar-otp-error-subheading"},{children:"Please check credentials and try again"})),je("button",Object.assign({className:"xar-btn",onClick:t},{children:"Go Home"}))]}),Hr=({children:t,mode:e})=>je("div",Object.assign({class:"xar-container"},{children:[je("div",Object.assign({class:"xar-inner-container"},{children:t})),je(qr,{mode:e})]})),Vr=({text:t,method:e,disabled:r=!1})=>je("div",Object.assign({class:"xar-action-container"},{children:je("button",Object.assign({disabled:r,onClick:()=>e(),className:"xar-action__link"},{children:t}))})),Gr="xar-modal",Zr=t=>je("div",Object.assign({id:Gr,onClick:e=>{var r;(null===(r=e.target)||void 0===r?void 0:r.id)==Gr&&t.closeFunc&&t.closeFunc(new Error("User closed the connect modal"))}},{children:t.children})),Jr={SOCIAL:"Please complete the login to proceed",OTP_INIT:"Sending login OTP to your email address",OTP_SENT:"",OTP_SENT_GLOBAL:"Please complete the login to proceed",OTP_ERROR:"Invalid OTP, please try again"},Yr={text:"",loading:!1,type:""},Xr=(t,e)=>"OTP_SENT_GLOBAL"==e||"SOCIAL"==e||"OTP_SENT"==e||"OTP_INIT"==e||"OTP_ERROR"==e?{text:Jr[e],type:e,loading:"OTP_ERROR"!=e}:"RESET"==e?Yr:t,Qr=t=>{const[e,n]=er(Xr,Yr),[i,o]=tr("");return e.loading?je(Zr,{children:je(Hr,Object.assign({mode:t.mode},{children:"OTP_SENT"==e.type?je(Fr,{loginWithOtpStart:()=>t.loginWithOTPStart(i),setError:()=>n("OTP_ERROR"),closeFunc:t.closeFunc,loginWithOtpComplete:t.loginWithOTPComplete,compact:t.options.compact}):je(Kr,{compact:t.options.compact,text:e.text,mode:t.mode})}))}):je(Zr,Object.assign({closeFunc:t.closeFunc},{children:je(Hr,Object.assign({mode:t.mode},{children:"OTP_ERROR"==e.type?je($r,{action:()=>n("RESET")}):je(be,{children:[je(Ur,{compact:t.options.compact,logo:t.logo}),je(zr,{email:i,setEmail:o,loginWithOTPStart:e=>r(void 0,void 0,void 0,(function*(){n("OTP_INIT");const r=yield t.loginWithOTPStart(e);return n(r.isCompleteRequired?"OTP_SENT":"OTP_SENT_GLOBAL"),r}))}),t.loginList.length>0?je(be,{children:[je(Wr,{text:"or continue with"}),je(jr,{loginWithSocial:e=>r(void 0,void 0,void 0,(function*(){n("SOCIAL"),t.loginWithSocial(e).finally((()=>{n("RESET")}))})),loginList:t.loginList,mode:t.mode})]}):null]})}))}))};class tn{constructor(t){this.status="closed",this.close=t=>{"closed"!==this.status&&(this.onClose(t),this.status="closed",ze(null,this.container))},this.params={loginList:t.loginList.filter((t=>"passwordless"!==t)),loginWithSocial:t.loginWithSocial,loginWithOTPStart:t.loginWithOTPStart,loginWithOTPComplete:t.loginWithOTPComplete,mode:t.mode,closeFunc:this.close,logo:t.logo,options:t.options},this.createContainer()}open(t){"open"!==this.status&&(this.onClose=t,this.status="open",ze(je(Qr,Object.assign({},this.params)),this.container))}createContainer(){const t=this.params.options.compact?"compact":"full";this.container=document.createElement("div"),this.container.setAttribute("id","xar-login-container"),this.container.classList.add(`xar-${this.params.mode}-mode`),this.container.classList.add(t),document.body.appendChild(this.container)}}class en{constructor(t,e,r){this.p=t,this.web3Module=e,this.bs58Module=r}static create(t){return r(this,void 0,void 0,(function*(){const[e,r]=yield Promise.all([Promise.resolve().then((function(){return cf})),Promise.resolve().then((function(){return df}))]);return new en(t,e,r)}))}get isConnected(){return this.p.connected}request(t){return r(this,void 0,void 0,(function*(){const e=structuredClone(t);if("signMessage"===e.method){const t=e.params;t.message instanceof Uint8Array&&(t.message=this.bs58Module.encode(t.message))}const r=yield this.p.request(e);switch(e.method){case"signMessage":return this.parseSignatureResponse(r);case"signTransaction":return this.web3Module.VersionedTransaction.deserialize(this.bs58Module.decode(r));case"signAllTransactions":return r.map((t=>this.web3Module.VersionedTransaction.deserialize(this.bs58Module.decode(t))));default:return r}}))}parseSignatureResponse(t){return{signature:this.bs58Module.decode(t.signature),publicKey:new this.web3Module.PublicKey(t.publicKey)}}signMessage(t,e){return this.request({method:"signMessage",params:{message:this.bs58Module.encode(t),display:e}})}signTransaction(t){return this.request({method:"signTransaction",params:{message:this.bs58Module.encode(t.serialize())}})}signAndSendTransaction(t){return this.request({method:"signAndSendTransaction",params:{message:this.bs58Module.encode(t.serialize())}})}signAllTransactions(t){return this.request({method:"signAllTransactions",params:{message:t.map((t=>this.bs58Module.encode(t.serialize())))}})}}for(var rn={},nn={byteLength:function(t){var e=hn(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=hn(t),i=n[0],o=n[1],s=new an(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),a=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=sn[t.charCodeAt(r)]<<18|sn[t.charCodeAt(r+1)]<<12|sn[t.charCodeAt(r+2)]<<6|sn[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===o&&(e=sn[t.charCodeAt(r)]<<2|sn[t.charCodeAt(r+1)]>>4,s[a++]=255&e);1===o&&(e=sn[t.charCodeAt(r)]<<10|sn[t.charCodeAt(r+1)]<<4|sn[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(ln(t,s,s+o>a?a:s+o));1===n?(e=t[r-1],i.push(on[e>>2]+on[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(on[e>>10]+on[e>>4&63]+on[e<<2&63]+"="));return i.join("")}},on=[],sn=[],an="undefined"!=typeof Uint8Array?Uint8Array:Array,un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cn=0;cn<64;++cn)on[cn]=un[cn],sn[un.charCodeAt(cn)]=cn;function hn(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function ln(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(on[(i=n)>>18&63]+on[i>>12&63]+on[i>>6&63]+on[63&i]);return o.join("")}sn["-".charCodeAt(0)]=62,sn["_".charCodeAt(0)]=63;var dn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function fn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function pn(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function gn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mn(t,e){pn(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}dn.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,h=-7,l=r?i-1:0,d=r?-1:1,f=t[e+l];for(l+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+l],l+=d,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=c}return(f?-1:1)*s*Math.pow(2,o-n)},dn.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+f]=255&s,f+=p,s/=256,c-=8);t[r+f-p]|=128*g},
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
function(t){const e=nn,r=dn,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|f(t,e);let n=o(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(V(t,Uint8Array)){const e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(V(t,ArrayBuffer)||t&&V(t.buffer,ArrayBuffer))return l(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(V(t,SharedArrayBuffer)||t&&V(t.buffer,SharedArrayBuffer)))return l(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);const i=function(t){if(s.isBuffer(t)){const e=0|d(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||G(t.length)?o(0):h(t);if("Buffer"===t.type&&Array.isArray(t.data))return h(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|d(t))}function h(t){const e=t.length<0?0:0|d(t.length),r=o(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function d(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||V(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return $(t).length;default:if(i)return n?-1:D(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return M(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),G(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function w(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(G(n))return s;t[r+s]=n}return s}function b(t,e,r,n){return H(D(e,t.length-r),t,r,n)}function v(t,e,r,n){return H(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return H($(e),t,r,n)}function k(t,e,r,n){return H(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function S(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function x(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(u=(31&e)<<6|63&r,u>127&&(o=u));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(u=(15&e)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return a(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},s.allocUnsafe=function(t){return c(t)},s.allocUnsafeSlow=function(t){return c(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(V(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),V(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=s.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(V(e,Uint8Array))i+e.length>n.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,i){if(V(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0);const u=Math.min(o,a),c=this.slice(n,i),h=t.slice(e,r);for(let t=0;t<u;++t)if(c[t]!==h[t]){o=c[t],a=h[t];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":case"latin1":case"binary":return v(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function I(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function M(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=Z[t[n]];return i}function B(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function L(t,e,r,n,i){j(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function T(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,n,i,o){return e=+e,n>>>=0,o||T(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function N(t,e,n,i,o){return e=+e,n>>>=0,o||T(t,0,n,8),r.write(t,e,n,i,52,8),n+8}s.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=J((function(t){q(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),s.prototype.readBigUInt64BE=J((function(t){q(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=J((function(t){q(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),s.prototype.readBigInt64BE=J((function(t){q(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||K(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){O(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=J((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=J((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);O(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=J((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=J((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=s.isBuffer(t)?t:s.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%a]}return this};const U={};function z(t,e,r){U[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function W(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function j(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new U.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){q(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||K(e,t.length-(r+1))}(n,i,o)}function q(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,r){if(Math.floor(t)!==t)throw q(t,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),z("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const F=/[^+/0-9A-Za-z-_]/g;function D(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function V(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function G(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Y:t}function Y(){throw new Error("BigInt not supported")}}(rn);const yn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,wn=t=>t instanceof Uint8Array,bn=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),vn=(t,e)=>t<<32-e|t>>>e;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function _n(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function kn(t){if("string"==typeof t&&(t=_n(t)),!wn(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function Sn(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!wn(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}class xn{clone(){return this._cloneInto()}}function En(t){const e=e=>t().update(kn(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function In(t=32){if(yn&&"function"==typeof yn.getRandomValues)return yn.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Mn extends xn{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=bn(this.buffer)}update(t){gn(this);const{view:e,buffer:r,blockLen:n}=this,i=(t=kn(t)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=bn(t);for(;n<=i-o;o+=n)this.process(e,o)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){gn(this),mn(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let t=o;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,c=n?0:4;t.setUint32(e+u,s,n),t.setUint32(e+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=bn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<u;t++)s.setUint32(4*t,c[t],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return t.length=n,t.pos=s,t.finished=i,t.destroyed=o,n%e&&t.buffer.set(r),t}}const An=BigInt(2**32-1),Bn=BigInt(32);function Pn(t,e=!1){return e?{h:Number(t&An),l:Number(t>>Bn&An)}:{h:0|Number(t>>Bn&An),l:0|Number(t&An)}}function On(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:o,l:s}=Pn(t[i],e);[r[i],n[i]]=[o,s]}return[r,n]}const Rn=(t,e,r)=>t<<r|e>>>32-r,Ln=(t,e,r)=>e<<r|t>>>32-r,Tn=(t,e,r)=>e<<r-32|t>>>64-r,Cn=(t,e,r)=>t<<r-32|e>>>64-r;const Nn={fromBig:Pn,split:On,toBig:(t,e)=>BigInt(t>>>0)<<Bn|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:Rn,rotlSL:Ln,rotlBH:Tn,rotlBL:Cn,add:function(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:0|i}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,add5H:(t,e,r,n,i,o)=>e+r+n+i+o+(t/2**32|0)|0,add5L:(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[Un,zn]=(()=>Nn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),Wn=new Uint32Array(80),jn=new Uint32Array(80);class qn extends Mn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:h,Fl:l,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[t,e,r,n,i,o,s,a,u,c,h,l,d,f,p,g]}set(t,e,r,n,i,o,s,a,u,c,h,l,d,f,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|h,this.Fl=0|l,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)Wn[r]=t.getUint32(e),jn[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|Wn[t-15],r=0|jn[t-15],n=Nn.rotrSH(e,r,1)^Nn.rotrSH(e,r,8)^Nn.shrSH(e,r,7),i=Nn.rotrSL(e,r,1)^Nn.rotrSL(e,r,8)^Nn.shrSL(e,r,7),o=0|Wn[t-2],s=0|jn[t-2],a=Nn.rotrSH(o,s,19)^Nn.rotrBH(o,s,61)^Nn.shrSH(o,s,6),u=Nn.rotrSL(o,s,19)^Nn.rotrBL(o,s,61)^Nn.shrSL(o,s,6),c=Nn.add4L(i,u,jn[t-7],jn[t-16]),h=Nn.add4H(c,n,a,Wn[t-7],Wn[t-16]);Wn[t]=0|h,jn[t]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:c,Eh:h,El:l,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let t=0;t<80;t++){const e=Nn.rotrSH(h,l,14)^Nn.rotrSH(h,l,18)^Nn.rotrBH(h,l,41),w=Nn.rotrSL(h,l,14)^Nn.rotrSL(h,l,18)^Nn.rotrBL(h,l,41),b=h&d^~h&p,v=l&f^~l&g,_=Nn.add5L(y,w,v,zn[t],jn[t]),k=Nn.add5H(_,m,e,b,Un[t],Wn[t]),S=0|_,x=Nn.rotrSH(r,n,28)^Nn.rotrBH(r,n,34)^Nn.rotrBH(r,n,39),E=Nn.rotrSL(r,n,28)^Nn.rotrBL(r,n,34)^Nn.rotrBL(r,n,39),I=r&i^r&s^i&s,M=n&o^n&a^o&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|h,f=0|l,({h:h,l:l}=Nn.add(0|u,0|c,0|k,0|S)),u=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const A=Nn.add3L(S,E,M);r=Nn.add3H(A,k,x,I),n=0|A}({h:r,l:n}=Nn.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Nn.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Nn.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=Nn.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:h,l:l}=Nn.add(0|this.Eh,0|this.El,0|h,0|l)),({h:d,l:f}=Nn.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=Nn.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Nn.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,o,s,a,u,c,h,l,d,f,p,g,m,y)}roundClean(){Wn.fill(0),jn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Kn=En((()=>new qn)),Fn=BigInt(0),Dn=BigInt(1),$n=BigInt(2),Hn=t=>t instanceof Uint8Array,Vn=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gn(t){if(!Hn(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Vn[t[r]];return e}function Zn(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Jn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function Yn(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[e]=o}return r}function Xn(t){return Jn(Gn(t))}function Qn(t){if(!Hn(t))throw new Error("Uint8Array expected");return Jn(Gn(Uint8Array.from(t).reverse()))}function ti(t,e){return Yn(t.toString(16).padStart(2*e,"0"))}function ei(t,e){return ti(t,e).reverse()}function ri(t,e,r){let n;if("string"==typeof e)try{n=Yn(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!Hn(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function ni(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Hn(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const ii=t=>($n<<BigInt(t-1))-Dn,oi=t=>new Uint8Array(t),si=t=>Uint8Array.from(t);function ai(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=oi(t),i=oi(t),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...t)=>r(i,n,...t),u=(t=oi())=>{i=a(si([0]),t),n=a(),0!==t.length&&(i=a(si([1]),t),n=a())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return ni(...r)};return(t,e)=>{let r;for(s(),u(t);!(r=e(c()));)u();return s(),r}}const ui={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function ci(t,e,r={}){const n=(e,r,n)=>{const i=ui[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=t[e];if(!(n&&void 0===o||i(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}var hi=Object.freeze({__proto__:null,bytesToHex:Gn,numberToHexUnpadded:Zn,hexToNumber:Jn,hexToBytes:Yn,bytesToNumberBE:Xn,bytesToNumberLE:Qn,numberToBytesBE:ti,numberToBytesLE:ei,numberToVarBytesBE:function(t){return Yn(Zn(t))},ensureBytes:ri,concatBytes:ni,equalBytes:function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},utf8ToBytes:function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))},bitLen:function(t){let e;for(e=0;t>Fn;t>>=Dn,e+=1);return e},bitGet:function(t,e){return t>>BigInt(e)&Dn},bitSet:(t,e,r)=>t|(r?Dn:Fn)<<BigInt(e),bitMask:ii,createHmacDrbg:ai,validateObject:ci});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const li=BigInt(0),di=BigInt(1),fi=BigInt(2),pi=BigInt(3),gi=BigInt(4),mi=BigInt(5),yi=BigInt(8);function wi(t,e){const r=t%e;return r>=li?r:e+r}function bi(t,e,r){if(r<=li||e<li)throw new Error("Expected power/modulo > 0");if(r===di)return li;let n=di;for(;e>li;)e&di&&(n=n*t%r),t=t*t%r,e>>=di;return n}function vi(t,e,r){let n=t;for(;e-- >li;)n*=n,n%=r;return n}function _i(t,e){if(t===li||e<=li)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=wi(t,e),n=e,i=li,o=di;for(;r!==li;){const t=n%r,e=i-o*(n/r);n=r,r=t,i=o,o=e}if(n!==di)throw new Error("invert: does not exist");return wi(i,e)}function ki(t){if(t%gi===pi){const e=(t+di)/gi;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%yi===mi){const e=(t-mi)/yi;return function(t,r){const n=t.mul(r,fi),i=t.pow(n,e),o=t.mul(r,i),s=t.mul(t.mul(o,fi),i),a=t.mul(o,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-di)/fi;let r,n,i;for(r=t-di,n=0;r%fi===li;r/=fi,n++);for(i=fi;i<t&&bi(i,e,t)!==t-di;i++);if(1===n){const e=(t+di)/gi;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+di)/fi;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=n,u=t.pow(t.mul(t.ONE,i),r),c=t.pow(s,o),h=t.pow(s,r);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(u,di<<BigInt(a-e-1));u=t.sqr(r),c=t.mul(c,r),h=t.mul(h,u),a=e}return c}}(t)}BigInt(9),BigInt(16);const Si=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function xi(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ei(t,e,r=!1,n={}){if(t<=li)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:o}=xi(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=ki(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:o,MASK:ii(i),ZERO:li,ONE:di,create:e=>wi(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return li<=e&&e<t},is0:t=>t===li,isOdd:t=>(t&di)===di,neg:e=>wi(-e,t),eql:(t,e)=>t===e,sqr:e=>wi(e*e,t),add:(e,r)=>wi(e+r,t),sub:(e,r)=>wi(e-r,t),mul:(e,r)=>wi(e*r,t),pow:(t,e)=>function(t,e,r){if(r<li)throw new Error("Expected power > 0");if(r===li)return t.ONE;if(r===di)return e;let n=t.ONE,i=e;for(;r>li;)r&di&&(n=t.mul(n,i)),i=t.sqr(i),r>>=di;return n}(a,t,e),div:(e,r)=>wi(e*_i(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>_i(e,t),sqrt:n.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n))),t.ONE),i=t.inv(n);return e.reduceRight(((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n))),i),r}(a,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?ei(t,o):ti(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return r?Qn(t):Xn(t)}});return Object.freeze(a)}function Ii(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Mi(t){const e=Ii(t);return e+Math.ceil(e/2)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ai=BigInt(0),Bi=BigInt(1);function Pi(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,i=e;for(;r>Ai;)r&Bi&&(n=n.add(i)),i=i.double(),r>>=Bi;return n},precomputeWindow(t,e){const{windows:r,windowSize:i}=n(e),o=[];let s=t,a=s;for(let t=0;t<r;t++){a=s,o.push(a);for(let t=1;t<i;t++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(e,i,o){const{windows:s,windowSize:a}=n(e);let u=t.ZERO,c=t.BASE;const h=BigInt(2**e-1),l=2**e,d=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let n=Number(o&h);o>>=d,n>a&&(n-=l,o+=Bi);const s=e,f=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?c=c.add(r(p,i[s])):u=u.add(r(g,i[f]))}return{p:u,f:c}},wNAFCached(t,e,r,n){const i=t._WINDOW_SIZE||1;let o=e.get(t);return o||(o=this.precomputeWindow(t,i),1!==i&&e.set(t,n(o))),this.wNAF(i,o,r)}}}function Oi(t){return ci(t.Fp,Si.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ci(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...xi(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ri=BigInt(0),Li=BigInt(1),Ti=BigInt(2),Ci=BigInt(8),Ni={zip215:!0};function Ui(t){const e=function(t){const e=Oi(t);return ci(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}(t),{Fp:r,n:n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=e,c=Ti<<BigInt(8*a)-Li,h=r.create,l=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(t*r.inv(e))}}catch(t){return{isValid:!1,value:Ri}}}),d=e.adjustScalarBytes||(t=>t),f=e.domain||((t,e,r)=>{if(e.length||r)throw new Error("Contexts/pre-hash are not supported");return t}),p=t=>"bigint"==typeof t&&Ri<t,g=(t,e)=>p(t)&&p(e)&&t<e,m=t=>t===Ri||g(t,c);function y(t,e){if(g(t,e))return t;throw new Error(`Expected valid scalar < ${e}, got ${typeof t} ${t}`)}function w(t){return t===Ri?t:y(t,n)}const b=new Map;function v(t){if(!(t instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(t,e,r,n){if(this.ex=t,this.ey=e,this.ez=r,this.et=n,!m(t))throw new Error("x required");if(!m(e))throw new Error("y required");if(!m(r))throw new Error("z required");if(!m(n))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof _)throw new Error("extended point not allowed");const{x:e,y:r}=t||{};if(!m(e)||!m(r))throw new Error("invalid affine point");return new _(e,r,Li,h(e*r))}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.ez)));return t.map(((t,r)=>t.toAffine(e[r]))).map(_.fromAffine)}_setWindowSize(t){this._WINDOW_SIZE=t,b.delete(this)}assertValidity(){const{a:t,d:r}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:s}=this,a=h(n*n),u=h(i*i),c=h(o*o),l=h(c*c),d=h(a*t);if(h(c*h(d+u))!==h(l+h(r*h(a*u))))throw new Error("bad point: equation left != right (1)");if(h(n*i)!==h(o*s))throw new Error("bad point: equation left != right (2)")}equals(t){v(t);const{ex:e,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=t,a=h(e*s),u=h(i*n),c=h(r*s),l=h(o*n);return a===u&&c===l}is0(){return this.equals(_.ZERO)}negate(){return new _(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:t}=e,{ex:r,ey:n,ez:i}=this,o=h(r*r),s=h(n*n),a=h(Ti*h(i*i)),u=h(t*o),c=r+n,l=h(h(c*c)-o-s),d=u+s,f=d-a,p=u-s,g=h(l*f),m=h(d*p),y=h(l*p),w=h(f*d);return new _(g,m,w,y)}add(t){v(t);const{a:r,d:n}=e,{ex:i,ey:o,ez:s,et:a}=this,{ex:u,ey:c,ez:l,et:d}=t;if(r===BigInt(-1)){const t=h((o-i)*(c+u)),e=h((o+i)*(c-u)),r=h(e-t);if(r===Ri)return this.double();const n=h(s*Ti*d),f=h(a*Ti*l),p=f+n,g=e+t,m=f-n,y=h(p*r),w=h(g*m),b=h(p*m),v=h(r*g);return new _(y,w,v,b)}const f=h(i*u),p=h(o*c),g=h(a*n*d),m=h(s*l),y=h((i+o)*(u+c)-f-p),w=m-g,b=m+g,k=h(p-r*f),S=h(y*w),x=h(b*k),E=h(y*k),I=h(w*b);return new _(S,x,I,E)}subtract(t){return this.add(t.negate())}wNAF(t){return x.wNAFCached(this,b,t,_.normalizeZ)}multiply(t){const{p:e,f:r}=this.wNAF(y(t,n));return _.normalizeZ([e,r])[0]}multiplyUnsafe(t){let e=w(t);return e===Ri?S:this.equals(S)||e===Li?this:this.equals(k)?this.wNAF(e).p:x.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return x.unsafeLadder(this,n).is0()}toAffine(t){const{ex:e,ey:n,ez:i}=this,o=this.is0();null==t&&(t=o?Ci:r.inv(i));const s=h(e*t),a=h(n*t),u=h(i*t);if(o)return{x:Ri,y:Li};if(u!==Li)throw new Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){const{h:t}=e;return t===Li?this:this.multiplyUnsafe(t)}static fromHex(t,n=!1){const{d:i,a:o}=e,s=r.BYTES,a=(t=ri("pointHex",t,s)).slice(),u=t[s-1];a[s-1]=-129&u;const d=Qn(a);d===Ri||y(d,n?c:r.ORDER);const f=h(d*d),p=h(f-Li),g=h(i*f-o);let{isValid:m,value:w}=l(p,g);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const b=(w&Li)===Li,v=0!=(128&u);if(!n&&w===Ri&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==b&&(w=h(-w)),_.fromAffine({x:w,y:d})}static fromPrivateKey(t){return M(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),n=ei(e,r.BYTES);return n[n.length-1]|=t&Li?128:0,n}toHex(){return Gn(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,Li,h(e.Gx*e.Gy)),_.ZERO=new _(Ri,Li,Li,Ri);const{BASE:k,ZERO:S}=_,x=Pi(_,8*a);function E(t){return wi(t,n)}function I(t){return E(Qn(t))}function M(t){const e=a;t=ri("private key",t,e);const r=ri("hashed private key",o(t),2*e),n=d(r.slice(0,e)),i=r.slice(e,2*e),s=I(n),u=k.multiply(s),c=u.toRawBytes();return{head:n,prefix:i,scalar:s,point:u,pointBytes:c}}function A(t=new Uint8Array,...e){const r=ni(...e);return I(o(f(r,ri("context",t),!!i)))}const B=Ni;k._setWindowSize(8);return{CURVE:e,getPublicKey:function(t){return M(t).pointBytes},sign:function(t,e,n={}){t=ri("message",t),i&&(t=i(t));const{prefix:o,scalar:s,pointBytes:u}=M(e),c=A(n.context,o,t),h=k.multiply(c).toRawBytes(),l=E(c+A(n.context,h,u,t)*s);return w(l),ri("result",ni(h,ei(l,r.BYTES)),2*a)},verify:function(t,e,n,o=B){const{context:s,zip215:a}=o,u=r.BYTES;t=ri("signature",t,2*u),e=ri("message",e),i&&(e=i(e));const c=Qn(t.slice(u,2*u));let h,l,d;try{h=_.fromHex(n,a),l=_.fromHex(t.slice(0,u),a),d=k.multiplyUnsafe(c)}catch(t){return!1}if(!a&&h.isSmallOrder())return!1;const f=A(s,l.toRawBytes(),h.toRawBytes(),e);return l.add(h.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>s(r.BYTES),precompute:(t=8,e=_.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const zi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Wi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ji=BigInt(1),qi=BigInt(2),Ki=BigInt(5),Fi=BigInt(10),Di=BigInt(20),$i=BigInt(40),Hi=BigInt(80);const Vi=Ei(zi,void 0,!0),Gi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Vi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Kn,randomBytes:In,adjustScalarBytes:function(t){return t[0]&=248,t[31]&=127,t[31]|=64,t},uvRatio:function(t,e){const r=zi,n=wi(e*e*e,r),i=function(t){const e=zi,r=t*t%e*t%e,n=vi(r,qi,e)*r%e,i=vi(n,ji,e)*t%e,o=vi(i,Ki,e)*i%e,s=vi(o,Fi,e)*o%e,a=vi(s,Di,e)*s%e,u=vi(a,$i,e)*a%e,c=vi(u,Hi,e)*u%e,h=vi(c,Hi,e)*u%e,l=vi(h,Fi,e)*o%e;return{pow_p_5_8:vi(l,qi,e)*t%e,b2:r}}(t*wi(n*n*e,r)).pow_p_5_8;let o=wi(t*n*i,r);const s=wi(e*o*o,r),a=o,u=wi(o*Wi,r),c=s===t,h=s===wi(-t,r),l=s===wi(-t*Wi,r);return c&&(o=a),(h||l)&&(o=u),(wi(o,r)&di)===di&&(o=wi(-o,r)),{isValid:c||h,value:o}}},Zi=Ui(Gi);const Ji=(Vi.ORDER+BigInt(3))/BigInt(8);Vi.pow(qi,Ji),Vi.sqrt(Vi.neg(Vi.ONE)),Vi.ORDER,BigInt(5),BigInt(8),BigInt(486662),function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);t.isOdd(r)&&t.neg(r)}(Vi,Vi.neg(BigInt(486664))),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Yi={exports:{}},Xi=o(Object.freeze({__proto__:null,default:{}}));!function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Xi.Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,s=0,a=Math.min(t.length,n),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){c(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?l[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],h=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(h).toString(t);n=(p=p.idivn(h)).isZero()?g+n:l[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[f])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,w=m>>>13,b=0|s[3],v=8191&b,_=b>>>13,k=0|s[4],S=8191&k,x=k>>>13,E=0|s[5],I=8191&E,M=E>>>13,A=0|s[6],B=8191&A,P=A>>>13,O=0|s[7],R=8191&O,L=O>>>13,T=0|s[8],C=8191&T,N=T>>>13,U=0|s[9],z=8191&U,W=U>>>13,j=0|a[0],q=8191&j,K=j>>>13,F=0|a[1],D=8191&F,$=F>>>13,H=0|a[2],V=8191&H,G=H>>>13,Z=0|a[3],J=8191&Z,Y=Z>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(c+(n=Math.imul(l,q))|0)+((8191&(i=(i=Math.imul(l,K))+Math.imul(d,q)|0))<<13)|0;c=((o=Math.imul(d,K))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,K))+Math.imul(g,q)|0,o=Math.imul(g,K);var yt=(c+(n=n+Math.imul(l,D)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(d,D)|0))<<13)|0;c=((o=o+Math.imul(d,$)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,K))+Math.imul(w,q)|0,o=Math.imul(w,K),n=n+Math.imul(p,D)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,D)|0,o=o+Math.imul(g,$)|0;var wt=(c+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(d,V)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(v,q),i=(i=Math.imul(v,K))+Math.imul(_,q)|0,o=Math.imul(_,K),n=n+Math.imul(y,D)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,D)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0;var bt=(c+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,q),i=(i=Math.imul(S,K))+Math.imul(x,q)|0,o=Math.imul(x,K),n=n+Math.imul(v,D)|0,i=(i=i+Math.imul(v,$)|0)+Math.imul(_,D)|0,o=o+Math.imul(_,$)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var vt=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,q),i=(i=Math.imul(I,K))+Math.imul(M,q)|0,o=Math.imul(M,K),n=n+Math.imul(S,D)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(x,D)|0,o=o+Math.imul(x,$)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var _t=(c+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(d,rt)|0))<<13)|0;c=((o=o+Math.imul(d,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,K))+Math.imul(P,q)|0,o=Math.imul(P,K),n=n+Math.imul(I,D)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(M,D)|0,o=o+Math.imul(M,$)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(v,J)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var kt=(c+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(R,q),i=(i=Math.imul(R,K))+Math.imul(L,q)|0,o=Math.imul(L,K),n=n+Math.imul(B,D)|0,i=(i=i+Math.imul(B,$)|0)+Math.imul(P,D)|0,o=o+Math.imul(P,$)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var St=(c+(n=n+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(C,q),i=(i=Math.imul(C,K))+Math.imul(N,q)|0,o=Math.imul(N,K),n=n+Math.imul(R,D)|0,i=(i=i+Math.imul(R,$)|0)+Math.imul(L,D)|0,o=o+Math.imul(L,$)|0,n=n+Math.imul(B,V)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ct)|0;var xt=(c+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(W,q)|0,o=Math.imul(W,K),n=n+Math.imul(C,D)|0,i=(i=i+Math.imul(C,$)|0)+Math.imul(N,D)|0,o=o+Math.imul(N,$)|0,n=n+Math.imul(R,V)|0,i=(i=i+Math.imul(R,G)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(B,J)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,dt)|0;var Et=(c+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,D),i=(i=Math.imul(z,$))+Math.imul(W,D)|0,o=Math.imul(W,$),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(R,J)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,dt)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,dt)|0;var It=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,V),i=(i=Math.imul(z,G))+Math.imul(W,V)|0,o=Math.imul(W,G),n=n+Math.imul(C,J)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ct)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,dt)|0;var Mt=(c+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,J),i=(i=Math.imul(z,Y))+Math.imul(W,J)|0,o=Math.imul(W,Y),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(R,rt)|0,i=(i=i+Math.imul(R,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,dt)|0;var At=(c+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,Q),i=(i=Math.imul(z,tt))+Math.imul(W,Q)|0,o=Math.imul(W,tt),n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,dt)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,dt)|0;var Bt=(c+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(x,pt)|0))<<13)|0;c=((o=o+Math.imul(x,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(W,rt)|0,o=Math.imul(W,nt),n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,dt)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,dt)|0;var Pt=(c+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(W,ot)|0,o=Math.imul(W,st),n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,n=n+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,dt)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,dt)|0;var Ot=(c+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,ut),i=(i=Math.imul(z,ct))+Math.imul(W,ut)|0,o=Math.imul(W,ct),n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,dt)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,dt)|0;var Rt=(c+(n=n+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,dt))+Math.imul(W,lt)|0,o=Math.imul(W,dt);var Lt=(c+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Tt=(c+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,gt))+Math.imul(W,pt)|0))<<13)|0;return c=((o=Math.imul(W,gt))+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,u[0]=mt,u[1]=yt,u[2]=wt,u[3]=bt,u[4]=vt,u[5]=_t,u[6]=kt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=It,u[11]=Mt,u[12]=At,u[13]=Bt,u[14]=Pt,u[15]=Ot,u[16]=Rt,u[17]=Lt,u[18]=Tt,0!==c&&(u[19]=c,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(t,e,r){return m(t,e,r)}Math.imul||(g=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):r<63?p(this,t,e):r<1024?m(this,t,e):y(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),y(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==e){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=n.clone()._ishlnsubmul(o,1,u);0===h.negative&&(n=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(h),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(u)):(n.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new x(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,b),n(k,b),n(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return w[t]=e,e},x.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(l,new i(1).iushln(p-m-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=m}return d},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],h=u-1;h>=0;h--){var l=c>>h&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new E(t)},n(E,x),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,n)}(Yi);var Qi=Yi.exports,to={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
!function(t,e){var r=rn,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(to,to.exports);var eo=to.exports.Buffer;var ro=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return eo.alloc(0);for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;var p=eo.allocUnsafe(n+(o-f));p.fill(0,0,n);for(var g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=eo.from(e)),!eo.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},no=ro("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const io=(t,e,r)=>t&e^~t&r,oo=(t,e,r)=>t&e^t&r^e&r,so=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ao=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),uo=new Uint32Array(64);class co extends Mn{constructor(){super(64,32,8,!1),this.A=0|ao[0],this.B=0|ao[1],this.C=0|ao[2],this.D=0|ao[3],this.E=0|ao[4],this.F=0|ao[5],this.G=0|ao[6],this.H=0|ao[7]}get(){const{A:t,B:e,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[t,e,r,n,i,o,s,a]}set(t,e,r,n,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)uo[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=uo[t-15],r=uo[t-2],n=vn(e,7)^vn(e,18)^e>>>3,i=vn(r,17)^vn(r,19)^r>>>10;uo[t]=i+uo[t-7]+n+uo[t-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:c}=this;for(let t=0;t<64;t++){const e=c+(vn(s,6)^vn(s,11)^vn(s,25))+io(s,a,u)+so[t]+uo[t]|0,h=(vn(r,2)^vn(r,13)^vn(r,22))+oo(r,n,i)|0;c=u,u=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,u,c)}roundClean(){uo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ho=En((()=>new co));var lo={},fo={exports:{}};!function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Xi.Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,s=0,a=Math.min(t.length,n),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,h=r;h<a;h+=n)c=u(t,h,h+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var l=1;for(c=u(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){c(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(t){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?l[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],h=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(h).toString(t);n=(p=p.idivn(h)).isZero()?g+n:l[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var h=u>>>26,l=67108863&u,d=Math.min(c,e.length-1),f=Math.max(0,c-t.length+1);f<=d;f++){var p=c-f|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[f])+l)/67108864|0,l=67108863&s}r.words[c]=0|l,u=0|h}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,h=0|s[0],l=8191&h,d=h>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,w=m>>>13,b=0|s[3],v=8191&b,_=b>>>13,k=0|s[4],S=8191&k,x=k>>>13,E=0|s[5],I=8191&E,M=E>>>13,A=0|s[6],B=8191&A,P=A>>>13,O=0|s[7],R=8191&O,L=O>>>13,T=0|s[8],C=8191&T,N=T>>>13,U=0|s[9],z=8191&U,W=U>>>13,j=0|a[0],q=8191&j,K=j>>>13,F=0|a[1],D=8191&F,$=F>>>13,H=0|a[2],V=8191&H,G=H>>>13,Z=0|a[3],J=8191&Z,Y=Z>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,dt=ht>>>13,ft=0|a[9],pt=8191&ft,gt=ft>>>13;r.negative=t.negative^e.negative,r.length=19;var mt=(c+(n=Math.imul(l,q))|0)+((8191&(i=(i=Math.imul(l,K))+Math.imul(d,q)|0))<<13)|0;c=((o=Math.imul(d,K))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,K))+Math.imul(g,q)|0,o=Math.imul(g,K);var yt=(c+(n=n+Math.imul(l,D)|0)|0)+((8191&(i=(i=i+Math.imul(l,$)|0)+Math.imul(d,D)|0))<<13)|0;c=((o=o+Math.imul(d,$)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,K))+Math.imul(w,q)|0,o=Math.imul(w,K),n=n+Math.imul(p,D)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,D)|0,o=o+Math.imul(g,$)|0;var wt=(c+(n=n+Math.imul(l,V)|0)|0)+((8191&(i=(i=i+Math.imul(l,G)|0)+Math.imul(d,V)|0))<<13)|0;c=((o=o+Math.imul(d,G)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(v,q),i=(i=Math.imul(v,K))+Math.imul(_,q)|0,o=Math.imul(_,K),n=n+Math.imul(y,D)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,D)|0,o=o+Math.imul(w,$)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,G)|0;var bt=(c+(n=n+Math.imul(l,J)|0)|0)+((8191&(i=(i=i+Math.imul(l,Y)|0)+Math.imul(d,J)|0))<<13)|0;c=((o=o+Math.imul(d,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(S,q),i=(i=Math.imul(S,K))+Math.imul(x,q)|0,o=Math.imul(x,K),n=n+Math.imul(v,D)|0,i=(i=i+Math.imul(v,$)|0)+Math.imul(_,D)|0,o=o+Math.imul(_,$)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,J)|0,o=o+Math.imul(g,Y)|0;var vt=(c+(n=n+Math.imul(l,Q)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(d,Q)|0))<<13)|0;c=((o=o+Math.imul(d,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(I,q),i=(i=Math.imul(I,K))+Math.imul(M,q)|0,o=Math.imul(M,K),n=n+Math.imul(S,D)|0,i=(i=i+Math.imul(S,$)|0)+Math.imul(x,D)|0,o=o+Math.imul(x,$)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,G)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var _t=(c+(n=n+Math.imul(l,rt)|0)|0)+((8191&(i=(i=i+Math.imul(l,nt)|0)+Math.imul(d,rt)|0))<<13)|0;c=((o=o+Math.imul(d,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,K))+Math.imul(P,q)|0,o=Math.imul(P,K),n=n+Math.imul(I,D)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(M,D)|0,o=o+Math.imul(M,$)|0,n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,G)|0,n=n+Math.imul(v,J)|0,i=(i=i+Math.imul(v,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,o=o+Math.imul(g,nt)|0;var kt=(c+(n=n+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(d,ot)|0))<<13)|0;c=((o=o+Math.imul(d,st)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(R,q),i=(i=Math.imul(R,K))+Math.imul(L,q)|0,o=Math.imul(L,K),n=n+Math.imul(B,D)|0,i=(i=i+Math.imul(B,$)|0)+Math.imul(P,D)|0,o=o+Math.imul(P,$)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,G)|0,n=n+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(x,J)|0,o=o+Math.imul(x,Y)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(w,rt)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var St=(c+(n=n+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(d,ut)|0))<<13)|0;c=((o=o+Math.imul(d,ct)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(C,q),i=(i=Math.imul(C,K))+Math.imul(N,q)|0,o=Math.imul(N,K),n=n+Math.imul(R,D)|0,i=(i=i+Math.imul(R,$)|0)+Math.imul(L,D)|0,o=o+Math.imul(L,$)|0,n=n+Math.imul(B,V)|0,i=(i=i+Math.imul(B,G)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(v,rt)|0,i=(i=i+Math.imul(v,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,ct)|0;var xt=(c+(n=n+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,dt)|0)+Math.imul(d,lt)|0))<<13)|0;c=((o=o+Math.imul(d,dt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(z,q),i=(i=Math.imul(z,K))+Math.imul(W,q)|0,o=Math.imul(W,K),n=n+Math.imul(C,D)|0,i=(i=i+Math.imul(C,$)|0)+Math.imul(N,D)|0,o=o+Math.imul(N,$)|0,n=n+Math.imul(R,V)|0,i=(i=i+Math.imul(R,G)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(B,J)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,ct)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,dt)|0)+Math.imul(g,lt)|0,o=o+Math.imul(g,dt)|0;var Et=(c+(n=n+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,gt)|0)+Math.imul(d,pt)|0))<<13)|0;c=((o=o+Math.imul(d,gt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,D),i=(i=Math.imul(z,$))+Math.imul(W,D)|0,o=Math.imul(W,$),n=n+Math.imul(C,V)|0,i=(i=i+Math.imul(C,G)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(R,J)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Y)|0,n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(y,lt)|0,i=(i=i+Math.imul(y,dt)|0)+Math.imul(w,lt)|0,o=o+Math.imul(w,dt)|0;var It=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;c=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,V),i=(i=Math.imul(z,G))+Math.imul(W,V)|0,o=Math.imul(W,G),n=n+Math.imul(C,J)|0,i=(i=i+Math.imul(C,Y)|0)+Math.imul(N,J)|0,o=o+Math.imul(N,Y)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,n=n+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,ct)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ct)|0,n=n+Math.imul(v,lt)|0,i=(i=i+Math.imul(v,dt)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,dt)|0;var Mt=(c+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;c=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,J),i=(i=Math.imul(z,Y))+Math.imul(W,J)|0,o=Math.imul(W,Y),n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(R,rt)|0,i=(i=i+Math.imul(R,nt)|0)+Math.imul(L,rt)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,n=n+Math.imul(S,lt)|0,i=(i=i+Math.imul(S,dt)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,dt)|0;var At=(c+(n=n+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,gt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,Q),i=(i=Math.imul(z,tt))+Math.imul(W,Q)|0,o=Math.imul(W,tt),n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,n=n+Math.imul(B,ut)|0,i=(i=i+Math.imul(B,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,n=n+Math.imul(I,lt)|0,i=(i=i+Math.imul(I,dt)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,dt)|0;var Bt=(c+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,gt)|0)+Math.imul(x,pt)|0))<<13)|0;c=((o=o+Math.imul(x,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(z,rt),i=(i=Math.imul(z,nt))+Math.imul(W,rt)|0,o=Math.imul(W,nt),n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,n=n+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,ct)|0,n=n+Math.imul(B,lt)|0,i=(i=i+Math.imul(B,dt)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,dt)|0;var Pt=(c+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,gt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(W,ot)|0,o=Math.imul(W,st),n=n+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,ct)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,n=n+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,dt)|0)+Math.imul(L,lt)|0,o=o+Math.imul(L,dt)|0;var Ot=(c+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,gt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,ut),i=(i=Math.imul(z,ct))+Math.imul(W,ut)|0,o=Math.imul(W,ct),n=n+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,dt)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,dt)|0;var Rt=(c+(n=n+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,gt)|0)+Math.imul(L,pt)|0))<<13)|0;c=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(z,lt),i=(i=Math.imul(z,dt))+Math.imul(W,lt)|0,o=Math.imul(W,dt);var Lt=(c+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,gt)|0)+Math.imul(N,pt)|0))<<13)|0;c=((o=o+Math.imul(N,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Tt=(c+(n=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,gt))+Math.imul(W,pt)|0))<<13)|0;return c=((o=Math.imul(W,gt))+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,u[0]=mt,u[1]=yt,u[2]=wt,u[3]=bt,u[4]=vt,u[5]=_t,u[6]=kt,u[7]=St,u[8]=xt,u[9]=Et,u[10]=It,u[11]=Mt,u[12]=At,u[13]=Bt,u[14]=Pt,u[15]=Ot,u[16]=Rt,u[17]=Lt,u[18]=Tt,0!==c&&(u[19]=c,r.length++),r};function m(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),d=67108863&l;a=67108863&(d=d+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function y(t,e,r){return m(t,e,r)}Math.imul||(g=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):r<63?p(this,t,e):r<1024?m(this,t,e):y(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),y(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==e){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=n.clone()._ishlnsubmul(o,1,u);0===h.negative&&(n=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var d=67108864*(0|n.words[o.length+l])+(0|n.words[o.length+l-1]);for(d=Math.min(d/s|0,67108863),n._ishlnsubmul(o,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(h),s.isub(l)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(u)):(n.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0==(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,d=1;0==(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new x(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},n(v,b),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,b),n(k,b),n(S,b),S.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new _;else if("p192"===t)e=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return w[t]=e,e},x.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();r(m<p);var y=this.pow(l,new i(1).iushln(p-m-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=m}return d},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],h=u-1;h>=0;h--){var l=c>>h&1;o!==r[0]&&(o=this.sqr(o)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===n&&0===h)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new E(t)},n(E,x),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,n)}(fo);var po=to.exports.Buffer;var go=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return po.alloc(0);for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;var p=po.allocUnsafe(n+(o-f));p.fill(0,0,n);for(var g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=po.from(e)),!po.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},mo=go("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function yo(t,e,r){return e<=t&&t<=r}function wo(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function bo(t){this.tokens=[].slice.call(t)}bo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var vo=-1;function _o(t,e){if(t)throw TypeError("Decoder error");return e||65533}var ko="utf-8";function So(t,e){if(!(this instanceof So))return new So(t,e);if((t=void 0!==t?String(t).toLowerCase():ko)!==ko)throw new Error("Encoding not supported. Only utf-8 is supported");e=wo(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function xo(t,e){if(!(this instanceof xo))return new xo(t,e);if((t=void 0!==t?String(t).toLowerCase():ko)!==ko)throw new Error("Encoding not supported. Only utf-8 is supported");e=wo(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Eo(t){var e=t.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,_o(e);if(-1===a)return vo;if(0===i){if(yo(a,0,127))return a;if(yo(a,194,223))i=1,r=a-192;else if(yo(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,r=a-224;else{if(!yo(a,240,244))return _o(e);240===a&&(o=144),244===a&&(s=143),i=3,r=a-240}return r<<=6*i,null}if(!yo(a,o,s))return r=i=n=0,o=128,s=191,t.prepend(a),_o(e);if(o=128,s=191,r+=a-128<<6*(i-(n+=1)),n!==i)return null;var u=r;return r=i=n=0,u}}function Io(t){t.fatal,this.handler=function(t,e){if(-1===e)return vo;if(yo(e,0,127))return e;var r,n;yo(e,128,2047)?(r=1,n=192):yo(e,2048,65535)?(r=2,n=224):yo(e,65536,1114111)&&(r=3,n=240);for(var i=[(e>>6*r)+n];r>0;){var o=e>>6*(r-1);i.push(128|63&o),r-=1}return i}}So.prototype={decode:function(t,e){var r;r="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=wo(e),this._streaming||(this._decoder=new Eo({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var n,i=new bo(r),o=[];!i.endOfStream()&&(n=this._decoder.handler(i,i.read()))!==vo;)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if((n=this._decoder.handler(i,i.read()))===vo)break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(o)}},xo.prototype={encode:function(t,e){t=t?String(t):"",e=wo(e),this._streaming||(this._encoder=new Io(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],i=new bo(function(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(t));!i.endOfStream()&&(r=this._encoder.handler(i,i.read()))!==vo;)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;(r=this._encoder.handler(i,i.read()))!==vo;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};var Mo=o(Object.freeze({__proto__:null,TextEncoder:xo,TextDecoder:So})),Ao=n&&n.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),Bo=n&&n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Po=n&&n.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Oo=n&&n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.hasOwnProperty.call(t,r)&&Ao(e,t,r);return Bo(e,t),e},Ro=n&&n.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});var Lo=lo.deserializeUnchecked=Zo=lo.deserialize=Ho=lo.serialize=lo.BinaryReader=lo.BinaryWriter=lo.BorshError=lo.baseDecode=lo.baseEncode=void 0;const To=Ro(fo.exports),Co=Ro(mo),No=Oo(Mo),Uo=new("function"!=typeof TextDecoder?No.TextDecoder:TextDecoder)("utf-8",{fatal:!0});lo.baseEncode=function(t){return"string"==typeof t&&(t=Buffer.from(t,"utf8")),Co.default.encode(Buffer.from(t))},lo.baseDecode=function(t){return Buffer.from(Co.default.decode(t))};const zo=1024;class Wo extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lo.BorshError=Wo;class jo{constructor(){this.buf=Buffer.alloc(zo),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(zo)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new To.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new To.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new To.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new To.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(zo)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}function qo(t,e,r){const n=r.value;r.value=function(...t){try{return n.apply(this,t)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new Wo("Reached the end of buffer when deserializing")}throw t}}}lo.BinaryWriter=jo;class Ko{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new To.default(t,"le")}readU128(){const t=this.readBuffer(16);return new To.default(t,"le")}readU256(){const t=this.readBuffer(32);return new To.default(t,"le")}readU512(){const t=this.readBuffer(64);return new To.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Wo(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Uo.decode(e)}catch(t){throw new Wo(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let n=0;n<e;++n)r.push(t());return r}}function Fo(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Do(t,e,r,n,i){try{if("string"==typeof n)i[`write${Fo(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new Wo(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new Wo(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let e=0;e<n[1];e++)Do(t,null,r[e],n[0],i)}else i.writeArray(r,(r=>{Do(t,e,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),Do(t,e,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,o)=>{Do(t,e,o,n.key,i),Do(t,e,r,n.value,i)}));break;default:throw new Wo(`FieldType ${n} unrecognized`)}else $o(t,r,i)}catch(t){throw t instanceof Wo&&t.addToFieldPath(e),t}}function $o(t,e,r){if("function"==typeof e.borshSerialize)return void e.borshSerialize(r);const n=t.get(e.constructor);if(!n)throw new Wo(`Class ${e.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{Do(t,n,e[n],i,r)}));else{if("enum"!==n.kind)throw new Wo(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`);{const i=e[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),Do(t,s,e[s],a,r);break}}}}}Po([qo],Ko.prototype,"readU8",null),Po([qo],Ko.prototype,"readU16",null),Po([qo],Ko.prototype,"readU32",null),Po([qo],Ko.prototype,"readU64",null),Po([qo],Ko.prototype,"readU128",null),Po([qo],Ko.prototype,"readU256",null),Po([qo],Ko.prototype,"readU512",null),Po([qo],Ko.prototype,"readString",null),Po([qo],Ko.prototype,"readFixedArray",null),Po([qo],Ko.prototype,"readArray",null),lo.BinaryReader=Ko;var Ho=lo.serialize=function(t,e,r=jo){const n=new r;return $o(t,e,n),n.toArray()};function Vo(t,e,r,n){try{if("string"==typeof r)return n[`read${Fo(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const e=[];for(let i=0;i<r[1];i++)e.push(Vo(t,null,r[0],n));return e}return n.readArray((()=>Vo(t,e,r[0],n)))}if("option"===r.kind){return n.readU8()?Vo(t,e,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=Vo(t,e,r.key,n),s=Vo(t,e,r.value,n);i.set(o,s)}return i}return Go(t,r,n)}catch(t){throw t instanceof Wo&&t.addToFieldPath(e),t}}function Go(t,e,r){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(r);const n=t.get(e);if(!n)throw new Wo(`Class ${e.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of t.get(e).fields)n[i]=Vo(t,i,o,r);return new e(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new Wo(`Enum index: ${i} is out of range`);const[o,s]=n.values[i];return new e({[o]:Vo(t,o,s,r)})}throw new Wo(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}var Zo=lo.deserialize=function(t,e,r,n=Ko){const i=new n(r),o=Go(t,e,i);if(i.offset<r.length)throw new Wo(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o};Lo=lo.deserializeUnchecked=function(t,e,r,n=Ko){return Go(t,e,new n(r))};var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.s16=Jo.s8=Jo.nu64be=Jo.u48be=Jo.u40be=Jo.u32be=Jo.u24be=Jo.u16be=zs=Jo.nu64=Jo.u48=Jo.u40=Us=Jo.u32=Jo.u24=Ns=Jo.u16=Cs=Jo.u8=Ts=Jo.offset=Jo.greedy=Jo.Constant=Jo.UTF8=Jo.CString=Jo.Blob=Jo.Boolean=Jo.BitField=Jo.BitStructure=Jo.VariantLayout=Jo.Union=Jo.UnionLayoutDiscriminator=Jo.UnionDiscriminator=Jo.Structure=Jo.Sequence=Jo.DoubleBE=Jo.Double=Jo.FloatBE=Jo.Float=Jo.NearInt64BE=Jo.NearInt64=Jo.NearUInt64BE=Jo.NearUInt64=Jo.IntBE=Jo.Int=Jo.UIntBE=Jo.UInt=Jo.OffsetLayout=Jo.GreedyCount=Jo.ExternalLayout=Jo.bindConstructorLayout=Jo.nameWithProperty=Jo.Layout=Jo.uint8ArrayToBuffer=Jo.checkUint8Array=void 0,Jo.constant=Jo.utf8=Jo.cstr=Ks=Jo.blob=Jo.unionLayoutDiscriminator=Jo.union=qs=Jo.seq=Jo.bits=js=Jo.struct=Jo.f64be=Jo.f64=Jo.f32be=Jo.f32=Jo.ns64be=Jo.s48be=Jo.s40be=Jo.s32be=Jo.s24be=Jo.s16be=Ws=Jo.ns64=Jo.s48=Jo.s40=Jo.s32=Jo.s24=void 0;const Yo=rn;function Xo(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function Qo(t){return Xo(t),Yo.Buffer.from(t.buffer,t.byteOffset,t.length)}Jo.checkUint8Array=Xo,Jo.uint8ArrayToBuffer=Qo;class ts{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function es(t,e){return e.property?t+"["+e.property+"]":t}Jo.Layout=ts,Jo.nameWithProperty=es,Jo.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof ts))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,r)=>e.decode(t,r),writable:!0})};class rs extends ts{isCount(){throw new Error("ExternalLayout is abstract")}}Jo.ExternalLayout=rs;class ns extends rs{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Xo(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}Jo.GreedyCount=ns;class is extends rs{constructor(t,e=0,r){if(!(t instanceof ts))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof os||this.layout instanceof ss}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}Jo.OffsetLayout=is;class os extends ts{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Qo(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Qo(e).writeUIntLE(t,r,this.span),this.span}}Jo.UInt=os;class ss extends ts{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Qo(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Qo(e).writeUIntBE(t,r,this.span),this.span}}Jo.UIntBE=ss;class as extends ts{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Qo(t).readIntLE(e,this.span)}encode(t,e,r=0){return Qo(e).writeIntLE(t,r,this.span),this.span}}Jo.Int=as;class us extends ts{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Qo(t).readIntBE(e,this.span)}encode(t,e,r=0){return Qo(e).writeIntBE(t,r,this.span),this.span}}Jo.IntBE=us;const cs=Math.pow(2,32);function hs(t){const e=Math.floor(t/cs);return{hi32:e,lo32:t-e*cs}}function ls(t,e){return t*cs+e}class ds extends ts{constructor(t){super(8,t)}decode(t,e=0){const r=Qo(t),n=r.readUInt32LE(e);return ls(r.readUInt32LE(e+4),n)}encode(t,e,r=0){const n=hs(t),i=Qo(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}Jo.NearUInt64=ds;class fs extends ts{constructor(t){super(8,t)}decode(t,e=0){const r=Qo(t);return ls(r.readUInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=hs(t),i=Qo(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Jo.NearUInt64BE=fs;class ps extends ts{constructor(t){super(8,t)}decode(t,e=0){const r=Qo(t),n=r.readUInt32LE(e);return ls(r.readInt32LE(e+4),n)}encode(t,e,r=0){const n=hs(t),i=Qo(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}Jo.NearInt64=ps;class gs extends ts{constructor(t){super(8,t)}decode(t,e=0){const r=Qo(t);return ls(r.readInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=hs(t),i=Qo(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}Jo.NearInt64BE=gs;class ms extends ts{constructor(t){super(4,t)}decode(t,e=0){return Qo(t).readFloatLE(e)}encode(t,e,r=0){return Qo(e).writeFloatLE(t,r),4}}Jo.Float=ms;class ys extends ts{constructor(t){super(4,t)}decode(t,e=0){return Qo(t).readFloatBE(e)}encode(t,e,r=0){return Qo(e).writeFloatBE(t,r),4}}Jo.FloatBE=ys;class ws extends ts{constructor(t){super(8,t)}decode(t,e=0){return Qo(t).readDoubleLE(e)}encode(t,e,r=0){return Qo(e).writeDoubleLE(t,r),8}}Jo.Double=ws;class bs extends ts{constructor(t){super(8,t)}decode(t,e=0){return Qo(t).readDoubleBE(e)}encode(t,e,r=0){return Qo(e).writeDoubleBE(t,r),8}}Jo.DoubleBE=bs;class vs extends ts{constructor(t,e,r){if(!(t instanceof ts))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof rs&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof rs)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof rs&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;for(i instanceof rs&&(i=i.decode(t,e));n<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce(((t,i)=>t+n.encode(i,e,r+t)),0);return this.count instanceof rs&&this.count.encode(t.length,e,r),i}}Jo.Sequence=vs;class _s extends ts{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof ts),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i}),0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e=0){Xo(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,o=0;for(const n of this.fields){let s=n.span;if(o=0<s?s:0,void 0!==n.property){const i=t[n.property];void 0!==i&&(o=n.encode(i,e,r),0>s&&(s=n.getSpan(e,r)))}i=r,r+=s}return i+o-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}Jo.Structure=_s;class ks{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}Jo.UnionDiscriminator=ks;class Ss extends ks{constructor(t,e){if(!(t instanceof rs&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}Jo.UnionLayoutDiscriminator=Ss;class xs extends ts{constructor(t,e,r){let n;if(t instanceof os||t instanceof ss)n=new Ss(new is(t));else if(t instanceof rs&&t.isCount())n=new Ss(t);else{if(!(t instanceof ks))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof ts))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof os||t instanceof ss)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof os||t instanceof ss,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,i=n.decode(t,e),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(t,e+s)}else r=o.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(t[n.property],e,r),o+i.encode(t[i.property],e,r+o)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new Es(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}Jo.Union=xs;class Es extends ts{constructor(t,e,r,n){if(!(t instanceof xs))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof ts))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function Is(t){return 0>t&&(t+=4294967296),t}Jo.VariantLayout=Es;class Ms extends ts{constructor(t,e,r){if(!(t instanceof os||t instanceof ss))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=Is(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const e of this.fields)if(void 0!==e.property){const r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new As(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Bs(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}Jo.BitStructure=Ms;class As{constructor(t,e,r){if(!(t instanceof Ms))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=Is(this.valueMask<<this.start),this.property=r}decode(t,e){return Is(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==Is(t&this.valueMask))throw new TypeError(es("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Is(t<<this.start);this.container._packedSetValue(Is(e&~this.wordMask)|r)}}Jo.BitField=As;class Bs extends As{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}Jo.Boolean=Bs;class Ps extends ts{constructor(t,e){if(!(t instanceof rs&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof rs||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Qo(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof rs&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(es("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Qo(t);return Qo(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof rs&&this.length.encode(n,e,r),n}}Jo.Blob=Ps;class Os extends ts{constructor(t){super(-1,t)}getSpan(t,e=0){Xo(t);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Qo(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=Yo.Buffer.from(t,"utf8"),i=n.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=Qo(e);return n.copy(o,r),o[r+i]=0,i+1}}Jo.CString=Os;class Rs extends ts{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Xo(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Qo(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=Yo.Buffer.from(t,"utf8"),i=n.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(Qo(e),r),i}}Jo.UTF8=Rs;class Ls extends ts{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}Jo.Constant=Ls,Jo.greedy=(t,e)=>new ns(t,e);var Ts=Jo.offset=(t,e,r)=>new is(t,e,r),Cs=Jo.u8=t=>new os(1,t),Ns=Jo.u16=t=>new os(2,t);Jo.u24=t=>new os(3,t);var Us=Jo.u32=t=>new os(4,t);Jo.u40=t=>new os(5,t),Jo.u48=t=>new os(6,t);var zs=Jo.nu64=t=>new ds(t);Jo.u16be=t=>new ss(2,t),Jo.u24be=t=>new ss(3,t),Jo.u32be=t=>new ss(4,t),Jo.u40be=t=>new ss(5,t),Jo.u48be=t=>new ss(6,t),Jo.nu64be=t=>new fs(t),Jo.s8=t=>new as(1,t),Jo.s16=t=>new as(2,t),Jo.s24=t=>new as(3,t),Jo.s32=t=>new as(4,t),Jo.s40=t=>new as(5,t),Jo.s48=t=>new as(6,t);var Ws=Jo.ns64=t=>new ps(t);Jo.s16be=t=>new us(2,t),Jo.s24be=t=>new us(3,t),Jo.s32be=t=>new us(4,t),Jo.s40be=t=>new us(5,t),Jo.s48be=t=>new us(6,t),Jo.ns64be=t=>new gs(t),Jo.f32=t=>new ms(t),Jo.f32be=t=>new ys(t),Jo.f64=t=>new ws(t),Jo.f64be=t=>new bs(t);var js=Jo.struct=(t,e,r)=>new _s(t,e,r);Jo.bits=(t,e,r)=>new Ms(t,e,r);var qs=Jo.seq=(t,e,r)=>new vs(t,e,r);Jo.union=(t,e,r)=>new xs(t,e,r),Jo.unionLayoutDiscriminator=(t,e)=>new Ss(t,e);var Ks=Jo.blob=(t,e)=>new Ps(t,e);Jo.cstr=t=>new Os(t),Jo.utf8=(t,e)=>new Rs(t,e),Jo.constant=(t,e)=>new Ls(t,e);var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var Ds=Fs.toBigIntLE=function(t){{const e=Buffer.from(t);e.reverse();const r=e.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}};Fs.toBigIntBE=function(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}};var $s,Hs=Fs.toBufferLE=function(t,e){{const r=t.toString(16),n=Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex");return n.reverse(),n}};Fs.toBufferBE=function(t,e){{const r=t.toString(16);return Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex")}};class Vs extends TypeError{constructor(t,e){let r;const{message:n,...i}=t,{path:o}=t;super(0===o.length?n:"At path: "+o.join(".")+" -- "+n),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function Gs(t){return"object"==typeof t&&null!=t}function Zs(t){return"string"==typeof t?JSON.stringify(t):""+t}function Js(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:o}=e,{type:s}=r,{refinement:a,message:u="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+Zs(n)+"`"}=t;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:u}}function*Ys(t,e,r,n){var i;Gs(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const i of t){const t=Js(i,e,r,n);t&&(yield t)}}function*Xs(t,e,r={}){const{path:n=[],branch:i=[t],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(t=e.coercer(t,a),s&&"type"!==e.type&&Gs(e.schema)&&Gs(t)&&!Array.isArray(t)))for(const r in t)void 0===e.schema[r]&&delete t[r];let u=!0;for(const r of e.validator(t,a))u=!1,yield[r,void 0];for(let[r,c,h]of e.entries(t,a)){const e=Xs(c,h,{path:void 0===r?n:[...n,r],branch:void 0===r?i:[...i,c],coerce:o,mask:s});for(const n of e)n[0]?(u=!1,yield[n[0],void 0]):o&&(c=n[1],void 0===r?t=c:t instanceof Map?t.set(r,c):t instanceof Set?t.add(c):Gs(t)&&(t[r]=c))}if(u)for(const r of e.refiner(t,a))u=!1,yield[r,void 0];u&&(yield[void 0,t])}class Qs{constructor(t){const{type:e,schema:r,validator:n,refiner:i,coercer:o=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(t,e)=>Ys(n(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>Ys(i(t,e),e,this,t):()=>[]}assert(t){return ta(t,this)}create(t){return ea(t,this)}is(t){return ra(t,this)}mask(t){return function(t,e){const r=na(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(t,this)}validate(t,e={}){return na(t,this,e)}}function ta(t,e){const r=na(t,e);if(r[0])throw r[0]}function ea(t,e){const r=na(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function ra(t,e){return!na(t,e)[0]}function na(t,e,r={}){const n=Xs(t,e,r),i=function(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);if(i[0]){const t=new Vs(i[0],(function*(){for(const t of n)t[0]&&(yield t[0])}));return[t,void 0]}return[void 0,i[1]]}function ia(t,e){return new Qs({type:t,schema:null,validator:e})}function oa(t){return new Qs({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+Zs(t)})}function sa(){return ia("boolean",(t=>"boolean"==typeof t))}function aa(t){return ia("instance",(e=>e instanceof t||"Expected a `"+t.name+"` instance, but received: "+Zs(e)))}function ua(t){const e=Zs(t),r=typeof t;return new Qs({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||"Expected the literal `"+e+"`, but received: "+Zs(r)})}function ca(t){return new Qs({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function ha(){return ia("number",(t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+Zs(t)))}function la(t){return new Qs({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function da(t,e){return new Qs({type:"record",schema:null,*entries(r){if(Gs(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator:t=>Gs(t)||"Expected an object, but received: "+Zs(t)})}function fa(){return ia("string",(t=>"string"==typeof t||"Expected a string, but received: "+Zs(t)))}function pa(t){const e=ia("never",(()=>!1));return new Qs({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator:t=>Array.isArray(t)||"Expected an array, but received: "+Zs(t)})}function ga(t){const e=Object.keys(t);return new Qs({type:"type",schema:t,*entries(r){if(Gs(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>Gs(t)||"Expected an object, but received: "+Zs(t)})}function ma(t){const e=t.map((t=>t.type)).join(" | ");return new Qs({type:"union",schema:null,validator(r,n){const i=[];for(const e of t){const[...t]=Xs(r,e,n),[o]=t;if(!o[0])return[];for(const[e]of t)e&&i.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+Zs(r),...i]}})}function ya(){return ia("unknown",(()=>!0))}function wa(t,e,r){return new Qs({...t,coercer:(n,i)=>ra(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var ba=new Uint8Array(16);function va(){if(!$s&&!($s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(ba)}var _a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ka(t){return"string"==typeof t&&_a.test(t)}for(var Sa,xa,Ea=[],Ia=0;Ia<256;++Ia)Ea.push((Ia+256).toString(16).substr(1));function Ma(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Ea[t[e+0]]+Ea[t[e+1]]+Ea[t[e+2]]+Ea[t[e+3]]+"-"+Ea[t[e+4]]+Ea[t[e+5]]+"-"+Ea[t[e+6]]+Ea[t[e+7]]+"-"+Ea[t[e+8]]+Ea[t[e+9]]+"-"+Ea[t[e+10]]+Ea[t[e+11]]+Ea[t[e+12]]+Ea[t[e+13]]+Ea[t[e+14]]+Ea[t[e+15]]).toLowerCase();if(!ka(r))throw TypeError("Stringified UUID is invalid");return r}var Aa=0,Ba=0;function Pa(t){if(!ka(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r}function Oa(t,e,r){function n(t,n,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=Pa(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(n),s.set(t,n.length),(s=r(s))[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return Ma(s)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function Ra(t){return 14+(t+64>>>9<<4)+1}function La(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function Ta(t,e,r,n,i,o){return La((s=La(La(e,t),La(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function Ca(t,e,r,n,i,o,s){return Ta(e&r|~e&n,t,e,i,o,s)}function Na(t,e,r,n,i,o,s){return Ta(e&n|r&~n,t,e,i,o,s)}function Ua(t,e,r,n,i,o,s){return Ta(e^r^n,t,e,i,o,s)}function za(t,e,r,n,i,o,s){return Ta(r^(e|~n),t,e,i,o,s)}var Wa=Oa("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=t[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);e.push(s)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[Ra(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=r,u=n,c=i,h=o;r=Ca(r,n,i,o,t[s],7,-680876936),o=Ca(o,r,n,i,t[s+1],12,-389564586),i=Ca(i,o,r,n,t[s+2],17,606105819),n=Ca(n,i,o,r,t[s+3],22,-1044525330),r=Ca(r,n,i,o,t[s+4],7,-176418897),o=Ca(o,r,n,i,t[s+5],12,1200080426),i=Ca(i,o,r,n,t[s+6],17,-1473231341),n=Ca(n,i,o,r,t[s+7],22,-45705983),r=Ca(r,n,i,o,t[s+8],7,1770035416),o=Ca(o,r,n,i,t[s+9],12,-1958414417),i=Ca(i,o,r,n,t[s+10],17,-42063),n=Ca(n,i,o,r,t[s+11],22,-1990404162),r=Ca(r,n,i,o,t[s+12],7,1804603682),o=Ca(o,r,n,i,t[s+13],12,-40341101),i=Ca(i,o,r,n,t[s+14],17,-1502002290),r=Na(r,n=Ca(n,i,o,r,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=Na(o,r,n,i,t[s+6],9,-1069501632),i=Na(i,o,r,n,t[s+11],14,643717713),n=Na(n,i,o,r,t[s],20,-373897302),r=Na(r,n,i,o,t[s+5],5,-701558691),o=Na(o,r,n,i,t[s+10],9,38016083),i=Na(i,o,r,n,t[s+15],14,-660478335),n=Na(n,i,o,r,t[s+4],20,-405537848),r=Na(r,n,i,o,t[s+9],5,568446438),o=Na(o,r,n,i,t[s+14],9,-1019803690),i=Na(i,o,r,n,t[s+3],14,-187363961),n=Na(n,i,o,r,t[s+8],20,1163531501),r=Na(r,n,i,o,t[s+13],5,-1444681467),o=Na(o,r,n,i,t[s+2],9,-51403784),i=Na(i,o,r,n,t[s+7],14,1735328473),r=Ua(r,n=Na(n,i,o,r,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=Ua(o,r,n,i,t[s+8],11,-2022574463),i=Ua(i,o,r,n,t[s+11],16,1839030562),n=Ua(n,i,o,r,t[s+14],23,-35309556),r=Ua(r,n,i,o,t[s+1],4,-1530992060),o=Ua(o,r,n,i,t[s+4],11,1272893353),i=Ua(i,o,r,n,t[s+7],16,-155497632),n=Ua(n,i,o,r,t[s+10],23,-1094730640),r=Ua(r,n,i,o,t[s+13],4,681279174),o=Ua(o,r,n,i,t[s],11,-358537222),i=Ua(i,o,r,n,t[s+3],16,-722521979),n=Ua(n,i,o,r,t[s+6],23,76029189),r=Ua(r,n,i,o,t[s+9],4,-640364487),o=Ua(o,r,n,i,t[s+12],11,-421815835),i=Ua(i,o,r,n,t[s+15],16,530742520),r=za(r,n=Ua(n,i,o,r,t[s+2],23,-995338651),i,o,t[s],6,-198630844),o=za(o,r,n,i,t[s+7],10,1126891415),i=za(i,o,r,n,t[s+14],15,-1416354905),n=za(n,i,o,r,t[s+5],21,-57434055),r=za(r,n,i,o,t[s+12],6,1700485571),o=za(o,r,n,i,t[s+3],10,-1894986606),i=za(i,o,r,n,t[s+10],15,-1051523),n=za(n,i,o,r,t[s+1],21,-2054922799),r=za(r,n,i,o,t[s+8],6,1873313359),o=za(o,r,n,i,t[s+15],10,-30611744),i=za(i,o,r,n,t[s+6],15,-1560198380),n=za(n,i,o,r,t[s+13],21,1309151649),r=za(r,n,i,o,t[s+4],6,-145523070),o=za(o,r,n,i,t[s+11],10,-1120210379),i=za(i,o,r,n,t[s+2],15,718787259),n=za(n,i,o,r,t[s+9],21,-343485551),r=La(r,a),n=La(n,u),i=La(i,c),o=La(o,h)}return[r,n,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(Ra(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))})),ja=Wa;function qa(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:case 3:return e^r^n;case 2:return e&r^e&n^r&n}}function Ka(t,e){return t<<e|t>>>32-e}var Fa=Oa("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),h=0;h<16;++h)c[h]=t[64*u+4*h]<<24|t[64*u+4*h+1]<<16|t[64*u+4*h+2]<<8|t[64*u+4*h+3];a[u]=c}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<s;++l){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=a[l][f];for(var p=16;p<80;++p)d[p]=Ka(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var g=r[0],m=r[1],y=r[2],w=r[3],b=r[4],v=0;v<80;++v){var _=Math.floor(v/20),k=Ka(g,5)+qa(_,m,y,w)+b+e[_]+d[v]>>>0;b=w,w=y,y=Ka(m,30)>>>0,m=g,g=k}r[0]=r[0]+g>>>0,r[1]=r[1]+m>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),Da=Fa;var $a=Object.freeze({__proto__:null,v1:function(t,e,r){var n=e&&r||0,i=e||new Array(16),o=(t=t||{}).node||Sa,s=void 0!==t.clockseq?t.clockseq:xa;if(null==o||null==s){var a=t.random||(t.rng||va)();null==o&&(o=Sa=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=xa=16383&(a[6]<<8|a[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),c=void 0!==t.nsecs?t.nsecs:Ba+1,h=u-Aa+(c-Ba)/1e4;if(h<0&&void 0===t.clockseq&&(s=s+1&16383),(h<0||u>Aa)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Aa=u,Ba=c,xa=s;var l=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=255&l;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=255&s;for(var f=0;f<6;++f)i[n+f]=o[f];return e||Ma(i)},v3:ja,v4:function(t,e,r){var n=(t=t||{}).random||(t.rng||va)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return Ma(n)},v5:Da,NIL:"00000000-0000-0000-0000-000000000000",version:function(t){if(!ka(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)},validate:ka,stringify:Ma,parse:Pa});const Ha=$a.v4;var Va=function(t,e,r,n){if("string"!=typeof t)throw new TypeError(t+" must be a string");const i="number"==typeof(n=n||{}).version?n.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const o={method:t};if(2===i&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===r){const t="function"==typeof n.generator?n.generator:function(){return Ha()};o.id=t(o,n)}else 2===i&&null===r?n.notificationIdNull&&(o.id=null):o.id=r;return o};const Ga=$a.v4,Za=Va,Ja=function(t,e){if(!(this instanceof Ja))return new Ja(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return Ga()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};var Ya=Ja;Ja.prototype.request=function(t,e,r,n){const i=this;let o=null;const s=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&t&&"object"==typeof t&&"function"==typeof e)n=e,o=t;else{"function"==typeof r&&(n=r,r=void 0);const i="function"==typeof n;try{o=Za(t,e,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(t){if(i)return n(t);throw t}if(!i)return o}let a;try{a=JSON.stringify(o,this.options.replacer)}catch(t){return n(t)}return this.callServer(a,(function(t,e){i._parseResponse(t,e,n)})),o},Ja.prototype._parseResponse=function(t,e,r){if(t)return void r(t);if(!e)return r();let n;try{n=JSON.parse(e,this.options.reviver)}catch(t){return r(t)}if(3===r.length){if(Array.isArray(n)){const t=function(t){return void 0!==t.error},e=function(e){return!t(e)};return r(null,n.filter(t),n.filter(e))}return r(null,n.error,n.result)}r(null,n)};var Xa={},Qa={exports:{}};!function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports}(Qa);var tu,eu,ru,nu,iu={exports:{}},ou={exports:{}};function su(){return tu||(tu=1,function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(ou)),ou.exports}function au(){if(nu)return ru;nu=1;var t=(eu||(eu=1,function(t){var e=su().default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},o=Object.prototype,s=o.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(n){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),s=new L(n||[]);return a(o,"_invoke",{value:B(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}i.wrap=f;var g="suspendedStart",m="suspendedYield",y="executing",w="completed",b={};function v(){}function _(){}function k(){}var S={};d(S,c,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(T([])));E&&E!==o&&s.call(E,c)&&(S=E);var I=k.prototype=v.prototype=Object.create(S);function M(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,r){function n(i,o,a,u){var c=p(t[i],t,o);if("throw"!==c.type){var h=c.arg,l=h.value;return l&&"object"==e(l)&&s.call(l,"__await")?r.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):r.resolve(l).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,i){n(t,e,r,i)}))}return i=i?i.then(o,o):o()}})}function B(t,e,r){var i=g;return function(o,s){if(i===y)throw new Error("Generator is already running");if(i===w){if("throw"===o)throw s;return{value:n,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=P(a,r);if(u){if(u===b)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===g)throw i=w,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var c=p(t,e,r);if("normal"===c.type){if(i=r.done?w:m,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=w,r.method="throw",r.arg=c.arg)}}}function P(t,e){var r=e.method,i=t.iterator[r];if(i===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=p(i,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,b;var s=o.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,b):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(s.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}throw new TypeError(e(t)+" is not iterable")}return _.prototype=k,a(I,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:_,configurable:!0}),_.displayName=d(k,l,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,d(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},i.awrap=function(t){return{__await:t}},M(A.prototype),d(A.prototype,h,(function(){return this})),i.AsyncIterator=A,i.async=function(t,e,r,n,o){void 0===o&&(o=Promise);var s=new A(f(t,e,r,n),o);return i.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},M(I),d(I,l,"Generator"),d(I,c,(function(){return this})),d(I,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},i.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),b}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(iu)),iu.exports)();ru=t;try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return ru}var uu,cu={exports:{}};var hu,lu={exports:{}};function du(){return hu||(hu=1,function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(lu)),lu.exports}var fu,pu,gu,mu={exports:{}},yu={exports:{}},wu={exports:{}};function bu(){return fu||(fu=1,function(t){var e=su().default;t.exports=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(wu)),wu.exports}function vu(){return pu||(pu=1,function(t){var e=su().default,r=bu();t.exports=function(t){var n=r(t,"string");return"symbol"===e(n)?n:String(n)},t.exports.__esModule=!0,t.exports.default=t.exports}(yu)),yu.exports}function _u(){return gu||(gu=1,function(t){var e=vu();function r(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(mu)),mu.exports}var ku,Su,xu={exports:{}},Eu={exports:{}};function Iu(){return ku||(ku=1,function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Eu)),Eu.exports}function Mu(){return Su||(Su=1,function(t){var e=Iu();t.exports=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e(t,r)},t.exports.__esModule=!0,t.exports.default=t.exports}(xu)),xu.exports}var Au,Bu,Pu={exports:{}},Ou={exports:{}};function Ru(){return Au||(Au=1,function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}(Ou)),Ou.exports}function Lu(){return Bu||(Bu=1,function(t){var e=su().default,r=Ru();t.exports=function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Pu)),Pu.exports}var Tu,Cu={exports:{}};function Nu(){return Tu||(Tu=1,function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Cu)),Cu.exports}var Uu,zu={exports:{}};function Wu(){return Uu||(Uu=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||t,s),u=r?r+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,o),!0;case 6:return h.fn.call(h.context,e,n,i,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var d,f=h.length;for(c=0;c<f;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,i);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];h[c].fn.apply(h[c].context,u)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],h=a.length;u<h;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a}(zu)),zu.exports}!function(t){var e=Qa.exports;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(au()),n=e((uu||(uu=1,function(t){function e(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var r=this,n=arguments;return new Promise((function(i,o){var s=t.apply(r,n);function a(t){e(s,i,o,a,u,"next",t)}function u(t){e(s,i,o,a,u,"throw",t)}a(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}(cu)),cu.exports)),i=e(su()),o=e(du()),s=e(_u()),a=e(Mu()),u=e(Lu()),c=e(Nu()),h=Wu();function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,c.default)(t);if(e){var i=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,u.default)(this,r)}}var d=function(t){(0,a.default)(f,t);var e,u,c,h,d=l(f);function f(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;(0,o.default)(this,f);var s=n.autoconnect,a=void 0===s||s,u=n.reconnect,c=void 0===u||u,h=n.reconnect_interval,l=void 0===h?1e3:h,p=n.max_reconnects,g=void 0===p?5:p,m=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(n,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(e=d.call(this)).webSocketFactory=t,e.queue={},e.rpc_id=0,e.address=r,e.autoconnect=a,e.ready=!1,e.reconnect=c,e.reconnect_timer_id=void 0,e.reconnect_interval=l,e.max_reconnects=g,e.rest_options=m,e.current_reconnects=0,e.generate_request_id=i||function(){return++e.rpc_id},e.autoconnect&&e._connect(e.address,Object.assign({autoconnect:e.autoconnect,reconnect:e.reconnect,reconnect_interval:e.reconnect_interval,max_reconnects:e.max_reconnects},e.rest_options)),e}return(0,s.default)(f,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(t,e,r,n){var o=this;return n||"object"!==(0,i.default)(r)||(n=r,r=null),new Promise((function(i,s){if(!o.ready)return s(new Error("socket not ready"));var a=o.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||null,id:a};o.socket.send(JSON.stringify(u),n,(function(t){if(t)return s(t);o.queue[a]={promise:[i,s]},r&&(o.queue[a].timeout=setTimeout((function(){delete o.queue[a],s(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:(h=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("rpc.login",e);case 2:if(n=t.sent){t.next=5;break}throw new Error("authentication failed");case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"listMethods",value:(c=(0,n.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call("__listMethods");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"notify",value:function(t,e){var r=this;return new Promise((function(n,i){if(!r.ready)return i(new Error("socket not ready"));var o={jsonrpc:"2.0",method:t,params:e||null};r.socket.send(JSON.stringify(o),(function(t){if(t)return i(t);n()}))}))}},{key:"subscribe",value:(u=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"==typeof e&&(e=[e]),t.next=3,this.call("rpc.on",e);case 3:if(n=t.sent,"string"!=typeof e||"ok"===n[e]){t.next=6;break}throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"unsubscribe",value:(e=(0,n.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"==typeof e&&(e=[e]),t.next=3,this.call("rpc.off",e);case 3:if(n=t.sent,"string"!=typeof e||"ok"===n[e]){t.next=6;break}throw new Error("Failed unsubscribing from an event with: "+n);case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"close",value:function(t,e){this.socket.close(t||1e3,e)}},{key:"_connect",value:function(t,e){var r=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",(function(){r.ready=!0,r.emit("open"),r.current_reconnects=0})),this.socket.addEventListener("message",(function(t){var e=t.data;e instanceof ArrayBuffer&&(e=Buffer.from(e).toString());try{e=JSON.parse(e)}catch(t){return}if(e.notification&&r.listeners(e.notification).length){if(!Object.keys(e.params).length)return r.emit(e.notification);var n=[e.notification];if(e.params.constructor===Object)n.push(e.params);else for(var i=0;i<e.params.length;i++)n.push(e.params[i]);return Promise.resolve().then((function(){r.emit.apply(r,n)}))}if(!r.queue[e.id])return e.method&&e.params?Promise.resolve().then((function(){r.emit(e.method,e.params)})):void 0;"error"in e=="result"in e&&r.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),r.queue[e.id].timeout&&clearTimeout(r.queue[e.id].timeout),e.error?r.queue[e.id].promise[1](e.error):r.queue[e.id].promise[0](e.result),delete r.queue[e.id]})),this.socket.addEventListener("error",(function(t){return r.emit("error",t)})),this.socket.addEventListener("close",(function(n){var i=n.code,o=n.reason;r.ready&&setTimeout((function(){return r.emit("close",i,o)}),0),r.ready=!1,r.socket=void 0,1e3!==i&&(r.current_reconnects++,r.reconnect&&(r.max_reconnects>r.current_reconnects||0===r.max_reconnects)&&(r.reconnect_timer_id=setTimeout((function(){return r._connect(t,e)}),r.reconnect_interval)))}))}}]),f}(h.EventEmitter);t.default=d}(Xa);var ju=i(Xa),qu={};!function(t){var e=Qa.exports;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t,e){return new u(t,e)};var r=e(du()),n=e(_u()),i=e(Mu()),o=e(Lu()),s=e(Nu());function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,s.default)(t);if(e){var i=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}var u=function(t){(0,i.default)(o,t);var e=a(o);function o(t,n,i){var s;return(0,r.default)(this,o),(s=e.call(this)).socket=new window.WebSocket(t,i),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(t){return s.emit("message",t.data)},s.socket.onerror=function(t){return s.emit("error",t)},s.socket.onclose=function(t){s.emit("close",t.code,t.reason)},s}return(0,n.default)(o,[{key:"send",value:function(t,e,r){var n=r||e;try{this.socket.send(t),n()}catch(t){n(t)}}},{key:"close",value:function(t,e){this.socket.close(t,e)}},{key:"addEventListener",value:function(t,e,r){this.socket.addEventListener(t,e,r)}}]),o}(Wu().EventEmitter)}(qu);var Ku=i(qu);const[Fu,Du,$u]=[[],[],[]],Hu=BigInt(0),Vu=BigInt(1),Gu=BigInt(2),Zu=BigInt(7),Ju=BigInt(256),Yu=BigInt(113);for(let t=0,e=Vu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Fu.push(2*(5*n+r)),Du.push((t+1)*(t+2)/2%64);let i=Hu;for(let t=0;t<7;t++)e=(e<<Vu^(e>>Zu)*Yu)%Ju,e&Gu&&(i^=Vu<<(Vu<<BigInt(t))-Vu);$u.push(i)}const[Xu,Qu]=On($u,!0),tc=(t,e,r)=>r>32?Tn(t,e,r):Rn(t,e,r),ec=(t,e,r)=>r>32?Cn(t,e,r):Ln(t,e,r);class rc extends xn{constructor(t,e,r,n=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,fn(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)))(this.state)}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,i=(e+2)%10,o=r[i],s=r[i+1],a=tc(o,s,1)^r[n],u=ec(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=u}let e=t[2],i=t[3];for(let r=0;r<24;r++){const n=Du[r],o=tc(e,i,n),s=ec(e,i,n),a=Fu[r];e=t[a],i=t[a+1],t[a]=o,t[a+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=Xu[n],t[1]^=Qu[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){gn(this);const{blockLen:e,state:r}=this,n=(t=kn(t)).length;for(let i=0;i<n;){const o=Math.min(e-this.pos,n-i);for(let e=0;e<o;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){gn(this,!1),pn(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return fn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(mn(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return t||(t=new rc(e,r,n,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=o,t.destroyed=this.destroyed,t}}const nc=((t,e,r)=>En((()=>new rc(e,t,r))))(1,136,32);const{bytesToNumberBE:ic,hexToBytes:oc}=hi,sc={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=sc;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ic(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=sc,r="string"==typeof t?oc(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=sc._parseInt(r.subarray(2)),{d:s,l:a}=sc._parseInt(o);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),i=e(r(t.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},ac=BigInt(0),uc=BigInt(1);BigInt(2);const cc=BigInt(3);function hc(t){const e=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function(t){const e=Oi(t);ci(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const i=e.toAffine();return ni(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function o(t){const{a:n,b:i}=e,o=r.sqr(t),s=r.mul(o,t);return r.add(r.add(s,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function s(t){return"bigint"==typeof t&&ac<t&&t<e.n}function a(t){if(!s(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Gn(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let s;try{s="bigint"==typeof t?t:Xn(ri("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return i&&(s=wi(s,o)),a(s),s}const c=new Map;function h(t){if(!(t instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof l)throw new Error("projective point not allowed");const i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?l.ZERO:new l(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(l.fromAffine)}static fromHex(t){const e=l.fromAffine(i(ri("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return l.BASE.multiply(u(t))}_setWindowSize(t){this._WINDOW_SIZE=t,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(t);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){h(t);const{px:e,py:n,pz:i}=this,{px:o,py:s,pz:a}=t,u=r.eql(r.mul(e,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,i=r.mul(n,cc),{px:o,py:s,pz:a}=this;let u=r.ZERO,c=r.ZERO,h=r.ZERO,d=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),h=r.mul(o,a),h=r.add(h,h),u=r.mul(t,h),c=r.mul(i,p),c=r.add(u,c),u=r.sub(f,c),c=r.add(f,c),c=r.mul(u,c),u=r.mul(g,u),h=r.mul(i,h),p=r.mul(t,p),g=r.sub(d,p),g=r.mul(t,g),g=r.add(g,h),h=r.add(d,d),d=r.add(h,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,g),u=r.sub(u,d),h=r.mul(p,f),h=r.add(h,h),h=r.add(h,h),new l(u,c,h)}add(t){h(t);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=t;let c=r.ZERO,d=r.ZERO,f=r.ZERO;const p=e.a,g=r.mul(e.b,cc);let m=r.mul(n,s),y=r.mul(i,a),w=r.mul(o,u),b=r.add(n,i),v=r.add(s,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(n,o);let _=r.add(s,u);return v=r.mul(v,_),_=r.add(m,w),v=r.sub(v,_),_=r.add(i,o),c=r.add(a,u),_=r.mul(_,c),c=r.add(y,w),_=r.sub(_,c),f=r.mul(p,v),c=r.mul(g,w),f=r.add(c,f),c=r.sub(y,f),f=r.add(y,f),d=r.mul(c,f),y=r.add(m,m),y=r.add(y,m),w=r.mul(p,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(p,w),v=r.add(v,w),m=r.mul(y,v),d=r.add(d,m),m=r.mul(_,v),c=r.mul(b,c),c=r.sub(c,m),m=r.mul(b,y),f=r.mul(_,f),f=r.add(f,m),new l(c,d,f)}subtract(t){return this.add(t.negate())}is0(){return this.equals(l.ZERO)}wNAF(t){return f.wNAFCached(this,c,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(l.fromAffine)}))}multiplyUnsafe(t){const n=l.ZERO;if(t===ac)return n;if(a(t),t===uc)return this;const{endo:i}=e;if(!i)return f.unsafeLadder(this,t);let{k1neg:o,k1:s,k2neg:u,k2:c}=i.splitScalar(t),h=n,d=n,p=this;for(;s>ac||c>ac;)s&uc&&(h=h.add(p)),c&uc&&(d=d.add(p)),p=p.double(),s>>=uc,c>>=uc;return o&&(h=h.negate()),u&&(d=d.negate()),d=new l(r.mul(d.px,i.beta),d.py,d.pz),h.add(d)}multiply(t){a(t);let n,i,o=t;const{endo:s}=e;if(s){const{k1neg:t,k1:e,k2neg:a,k2:u}=s.splitScalar(o);let{p:c,f:h}=this.wNAF(e),{p:d,f:p}=this.wNAF(u);c=f.constTimeNegate(t,c),d=f.constTimeNegate(a,d),d=new l(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),i=h.add(p)}else{const{p:t,f:e}=this.wNAF(o);n=t,i=e}return l.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){const n=l.BASE,i=(t,e)=>e!==ac&&e!==uc&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),o=i(this,e).add(i(t,r));return o.is0()?void 0:o}toAffine(t){const{px:e,py:n,pz:i}=this,o=this.is0();null==t&&(t=o?r.ONE:r.inv(i));const s=r.mul(e,t),a=r.mul(n,t),u=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===uc)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===uc?this:r?r(l,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(l,this,t)}toHex(t=!0){return Gn(this.toRawBytes(t))}}l.BASE=new l(e.Gx,e.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const d=e.nBitLength,f=Pi(l,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function lc(t){const e=function(t){const e=Oi(t);return ci(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:n}=e,i=r.BYTES+1,o=2*r.BYTES+1;function s(t){return wi(t,n)}function a(t){return _i(t,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:h,isWithinCurveOrder:l}=hc({...e,toBytes(t,e,n){const i=e.toAffine(),o=r.toBytes(i.x),s=ni;return n?s(Uint8Array.from([e.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(t){const e=t.length,n=t[0],s=t.subarray(1);if(e!==i||2!==n&&3!==n){if(e===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const t=Xn(s);if(!(ac<(a=t)&&a<r.ORDER))throw new Error("Point is not on curve");const e=h(t);let i=r.sqrt(e);return 1==(1&n)!==((i&uc)===uc)&&(i=r.neg(i)),{x:t,y:i}}var a}}),d=t=>Gn(ti(t,e.nByteLength));function f(t){return t>n>>uc}const p=(t,e,r)=>Xn(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=ri("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=sc.toSig(ri("DER",t));return new g(e,r)}assertValidity(){if(!l(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s:i,recovery:o}=this,c=b(ri("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const h=2===o||3===o?n+e.n:n;if(h>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0==(1&o)?"02":"03",f=u.fromHex(l+d(h)),p=a(h),g=s(-c*p),m=s(i*p),y=u.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Yn(this.toDERHex())}toDERHex(){return sc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Yn(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(t){try{return c(t),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const t=Mi(e.n);return function(t,e,r=!1){const n=t.length,i=Ii(e),o=Mi(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=wi(r?Xn(t):Qn(t),e-di)+di;return r?ei(s,i):ti(s,i)}(e.randomBytes(t),e.n)},precompute:(t=8,e=u.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function y(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===i||n===o:r?n===2*i||n===2*o:t instanceof u}const w=e.bits2int||function(t){const r=Xn(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},b=e.bits2int_modN||function(t){return s(w(t))},v=ii(e.nBitLength);function _(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(ac<=t&&t<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ti(t,e.nByteLength)}function k(t,n,i=S){if(["recovered","canonical"].some((t=>t in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:h}=e;let{lowS:d,prehash:p,extraEntropy:m}=i;null==d&&(d=!0),t=ri("msgHash",t),p&&(t=ri("prehashed msgHash",o(t)));const y=b(t),v=c(n),k=[_(v),_(y)];if(null!=m){const t=!0===m?h(r.BYTES):m;k.push(ri("extraEntropy",t))}const x=ni(...k),E=y;return{seed:x,k2sig:function(t){const e=w(t);if(!l(e))return;const r=a(e),n=u.BASE.multiply(e).toAffine(),i=s(n.x);if(i===ac)return;const o=s(r*s(E+i*v));if(o===ac)return;let c=(n.x===i?0:2)|Number(n.y&uc),h=o;return d&&f(o)&&(h=function(t){return f(t)?s(-t):t}(o),c^=1),new g(i,h,c)}}}const S={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(y(t))throw new Error("first arg must be private key");if(!y(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(c(t)).toRawBytes(r)},sign:function(t,r,n=S){const{seed:i,k2sig:o}=k(t,r,n),s=e;return ai(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(t,r,n,i=x){const o=t;if(r=ri("msgHash",r),n=ri("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:h}=i;let l,d;try{if("string"==typeof o||o instanceof Uint8Array)try{l=g.fromDER(o)}catch(t){if(!(t instanceof sc.Err))throw t;l=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;l=new g(t,e)}}d=u.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;h&&(r=e.hash(r));const{r:f,s:p}=l,m=b(r),y=a(p),w=s(m*y),v=s(f*y),_=u.BASE.multiplyAndAddUnsafe(d,w,v)?.toAffine();return!!_&&s(_.x)===f},ProjectivePoint:u,Signature:g,utils:m}}BigInt(4);class dc extends xn{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");fn(t.outputLen),fn(t.blockLen)}(t);const r=kn(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return gn(this),this.iHash.update(t),this}digestInto(t){gn(this),pn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fc=(t,e,r)=>new dc(t,e).update(r).digest();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function pc(t){return{hash:t,hmac:(e,...r)=>fc(t,e,Sn(...r)),randomBytes:In}}fc.create=(t,e)=>new dc(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const gc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),yc=BigInt(1),wc=BigInt(2),bc=(t,e)=>(t+e/wc)/e;const vc=Ei(gc,void 0,void 0,{sqrt:function(t){const e=gc,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,h=c*c*t%e,l=vi(h,r,e)*h%e,d=vi(l,r,e)*h%e,f=vi(d,wc,e)*c%e,p=vi(f,i,e)*f%e,g=vi(p,o,e)*p%e,m=vi(g,a,e)*g%e,y=vi(m,u,e)*m%e,w=vi(y,a,e)*g%e,b=vi(w,r,e)*h%e,v=vi(b,s,e)*p%e,_=vi(v,n,e)*c%e,k=vi(_,wc,e);if(!vc.eql(vc.sqr(k),t))throw new Error("Cannot find square root");return k}}),_c=function(t,e){const r=e=>lc({...t,...pc(e)});return Object.freeze({...r(e),create:r})}({a:BigInt(0),b:BigInt(7),Fp:vc,n:mc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=mc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-yc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=bc(o*t,e),u=bc(-n*t,e);let c=wi(t-a*r-u*i,e),h=wi(-a*n-u*o,e);const l=c>s,d=h>s;if(l&&(c=e-c),d&&(h=e-h),c>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:c,k2neg:d,k2:h}}}},ho);BigInt(0),_c.ProjectivePoint;const kc=Zi.utils.randomPrivateKey,Sc=()=>{const t=Zi.utils.randomPrivateKey(),e=xc(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},xc=Zi.getPublicKey;function Ec(t){try{return Zi.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Ic=(t,e)=>Zi.sign(t,e.slice(0,32)),Mc=Zi.verify,Ac=t=>rn.Buffer.isBuffer(t)?t:t instanceof Uint8Array?rn.Buffer.from(t.buffer,t.byteOffset,t.byteLength):rn.Buffer.from(t);class Bc{constructor(t){Object.assign(this,t)}encode(){return rn.Buffer.from(Ho(Pc,this))}static decode(t){return Zo(Pc,this,t)}static decodeUnchecked(t){return Lo(Pc,this,t)}}const Pc=new Map;var Oc;let Rc;const Lc=32;let Tc=1;Rc=Symbol.toStringTag;class Cc extends Bc{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=no.decode(t);if(e.length!=Lc)throw new Error("Invalid public key input");this._bn=new Qi(e)}else this._bn=new Qi(t);if(this._bn.byteLength()>Lc)throw new Error("Invalid public key input")}}static unique(){const t=new Cc(Tc);return Tc+=1,new Cc(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return no.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(rn.Buffer);if(t.length===Lc)return t;const e=rn.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Rc](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const n=rn.Buffer.concat([t.toBuffer(),rn.Buffer.from(e),r.toBuffer()]),i=ho(n);return new Cc(i)}static createProgramAddressSync(t,e){let r=rn.Buffer.alloc(0);t.forEach((function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");r=rn.Buffer.concat([r,Ac(t)])})),r=rn.Buffer.concat([r,e.toBuffer(),rn.Buffer.from("ProgramDerivedAddress")]);const n=ho(r);if(Ec(n))throw new Error("Invalid seeds, address must fall off the curve");return new Cc(n)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,n=255;for(;0!=n;){try{const i=t.concat(rn.Buffer.from([n]));r=this.createProgramAddressSync(i,e)}catch(t){if(t instanceof TypeError)throw t;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return Ec(new Cc(t).toBytes())}}Oc=Cc,Cc.default=new Oc("11111111111111111111111111111111"),Pc.set(Cc,{kind:"struct",fields:[["_bn","u256"]]});const Nc=new Cc("BPFLoader1111111111111111111111111111111111"),Uc=1232,zc=127,Wc=64;class jc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(jc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class qc extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(qc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Kc extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Kc.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Fc{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach(((t,r)=>{e.set(t.toBase58(),r)}));const r=t=>{const r=e.get(t.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return t.map((t=>({programIdIndex:r(t.programId),accountKeyIndexes:t.keys.map((t=>r(t.pubkey))),data:t.data})))}}const Dc=(t="publicKey")=>Ks(32,t),$c=(t="signature")=>Ks(64,t),Hc=(t="string")=>{const e=js([Us("length"),Us("lengthPadding"),Ks(Ts(Us(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(t,e)=>r(t,e).chars.toString(),i.encode=(t,e,r)=>{const i={chars:rn.Buffer.from(t,"utf8")};return n(i,e,r)},i.alloc=t=>Us().span+Us().span+rn.Buffer.from(t,"utf8").length,i};function Vc(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return Vc({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach((t=>{n+=r(t)})),n}function Gc(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0==(128&n))break}return e}function Zc(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function Jc(t,e){if(!t)throw new Error(e||"Assertion failed")}class Yc{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const e of t){n(e.programId).isInvoked=!0;for(const t of e.keys){const e=n(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new Yc(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Jc(t.length<=256,"Max static account keys length exceeded");const e=t.filter((([,t])=>t.isSigner&&t.isWritable)),r=t.filter((([,t])=>t.isSigner&&!t.isWritable)),n=t.filter((([,t])=>!t.isSigner&&t.isWritable)),i=t.filter((([,t])=>!t.isSigner&&!t.isWritable)),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Jc(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Jc(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...e.map((([t])=>new Cc(t))),...r.map((([t])=>new Cc(t))),...n.map((([t])=>new Cc(t))),...i.map((([t])=>new Cc(t)))]]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&t.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&!t.isWritable));if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const e=new Cc(i),o=t.findIndex((t=>t.equals(e)));o>=0&&(Jc(o<256,"Max lookup table index exceeded"),r.push(o),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class Xc{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((t=>new Cc(t))),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:no.decode(t.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new Fc(this.staticAccountKeys)}static compile(t){const e=Yc.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new Fc(n).compileInstructions(t.instructions).map((t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:no.encode(t.data)})));return new Xc({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){return t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((t,e)=>!this.isProgramId(e)))}serialize(){const t=this.accountKeys.length;let e=[];Zc(e,t);const r=this.instructions.map((t=>{const{accounts:e,programIdIndex:r}=t,n=Array.from(no.decode(t.data));let i=[];Zc(i,e.length);let o=[];return Zc(o,n.length),{programIdIndex:r,keyIndicesCount:rn.Buffer.from(i),keyIndices:e,dataLength:rn.Buffer.from(o),data:n}}));let n=[];Zc(n,r.length);let i=rn.Buffer.alloc(Uc);rn.Buffer.from(n).copy(i);let o=n.length;r.forEach((t=>{const e=js([Cs("programIdIndex"),Ks(t.keyIndicesCount.length,"keyIndicesCount"),qs(Cs("keyIndex"),t.keyIndices.length,"keyIndices"),Ks(t.dataLength.length,"dataLength"),qs(Cs("userdatum"),t.data.length,"data")]).encode(t,i,o);o+=e})),i=i.slice(0,o);const s=js([Ks(1,"numRequiredSignatures"),Ks(1,"numReadonlySignedAccounts"),Ks(1,"numReadonlyUnsignedAccounts"),Ks(e.length,"keyCount"),qs(Dc("key"),t,"keys"),Dc("recentBlockhash")]),a={numRequiredSignatures:rn.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:rn.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:rn.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:rn.Buffer.from(e),keys:this.accountKeys.map((t=>Ac(t.toBytes()))),recentBlockhash:no.decode(this.recentBlockhash)};let u=rn.Buffer.alloc(2048);const c=s.encode(a,u);return i.copy(u,c),u.slice(0,c+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&zc))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=e.shift(),i=e.shift(),o=Gc(e);let s=[];for(let t=0;t<o;t++){const t=e.slice(0,Lc);e=e.slice(Lc),s.push(new Cc(rn.Buffer.from(t)))}const a=e.slice(0,Lc);e=e.slice(Lc);const u=Gc(e);let c=[];for(let t=0;t<u;t++){const t=e.shift(),r=Gc(e),n=e.slice(0,r);e=e.slice(r);const i=Gc(e),o=e.slice(0,i),s=no.encode(rn.Buffer.from(o));e=e.slice(i),c.push({programIdIndex:t,accounts:n,data:s})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:no.encode(rn.Buffer.from(a)),accountKeys:s,instructions:c};return new Xc(h)}}class Qc{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fc(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce(((t,e)=>t+e.writableIndexes.length),0);return e<n}if(t>=this.header.numRequiredSignatures){return t-e<r-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find((t=>t.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=Yc.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const t of i){const i=e.extractTableLookup(t);if(void 0!==i){const[t,{writable:e,readonly:o}]=i;r.push(t),n.writable.push(...e),n.readonly.push(...o)}}const[o,s]=e.getMessageComponents(),a=new Fc(s,n).compileInstructions(t.instructions);return new Qc({header:o,staticAccountKeys:s,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const t=Array();Zc(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Zc(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();Zc(i,this.addressTableLookups.length);const o=js([Cs("prefix"),js([Cs("numRequiredSignatures"),Cs("numReadonlySignedAccounts"),Cs("numReadonlyUnsignedAccounts")],"header"),Ks(t.length,"staticAccountKeysLength"),qs(Dc(),this.staticAccountKeys.length,"staticAccountKeys"),Dc("recentBlockhash"),Ks(r.length,"instructionsLength"),Ks(e.length,"serializedInstructions"),Ks(i.length,"addressTableLookupsLength"),Ks(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(Uc),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map((t=>t.toBytes())),recentBlockhash:no.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(Uc);for(const r of this.compiledInstructions){const n=Array();Zc(n,r.accountKeyIndexes.length);const i=Array();Zc(i,r.data.length);t+=js([Cs("programIdIndex"),Ks(n.length,"encodedAccountKeyIndexesLength"),qs(Cs(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ks(i.length,"encodedDataLength"),Ks(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Uc);for(const r of this.addressTableLookups){const n=Array();Zc(n,r.writableIndexes.length);const i=Array();Zc(i,r.readonlyIndexes.length);t+=js([Dc("accountKey"),Ks(n.length,"encodedWritableIndexesLength"),qs(Cs(),r.writableIndexes.length,"writableIndexes"),Ks(i.length,"encodedReadonlyIndexesLength"),qs(Cs(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&zc;Jc(r!==n,"Expected versioned message but received legacy message");Jc(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],s=Gc(e);for(let t=0;t<s;t++)o.push(new Cc(e.splice(0,Lc)));const a=no.encode(e.splice(0,Lc)),u=Gc(e),c=[];for(let t=0;t<u;t++){const t=e.shift(),r=Gc(e),n=e.splice(0,r),i=Gc(e),o=new Uint8Array(e.splice(0,i));c.push({programIdIndex:t,accountKeyIndexes:n,data:o})}const h=Gc(e),l=[];for(let t=0;t<h;t++){const t=new Cc(e.splice(0,Lc)),r=Gc(e),n=e.splice(0,r),i=Gc(e),o=e.splice(0,i);l.push({accountKey:t,writableIndexes:n,readonlyIndexes:o})}return new Qc({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:c,addressTableLookups:l})}}const th={deserializeMessageVersion(t){const e=t[0],r=e&zc;return r===e?"legacy":r},deserialize:t=>{const e=th.deserializeMessageVersion(t);if("legacy"===e)return Xc.from(t);if(0===e)return Qc.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let eh=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const rh=rn.Buffer.alloc(Wc).fill(0);class nh{constructor(t){this.keys=void 0,this.programId=void 0,this.data=rn.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map((({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class ih{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((t=>t.toJSON())),signers:this.signatures.map((({publicKey:t})=>t.toJSON()))}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach((t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new nh(t))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let t=0;t<e.length;t++)if(void 0===e[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const n=[],i=[];e.forEach((t=>{t.keys.forEach((t=>{i.push({...t})}));const e=t.programId.toString();n.includes(e)||n.push(e)})),n.forEach((t=>{i.push({pubkey:new Cc(t),isSigner:!1,isWritable:!1})}));const o=[];i.forEach((t=>{const e=t.pubkey.toString(),r=o.findIndex((t=>t.pubkey.toString()===e));r>-1?(o[r].isWritable=o[r].isWritable||t.isWritable,o[r].isSigner=o[r].isSigner||t.isSigner):o.push(t)})),o.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const s=o.findIndex((t=>t.pubkey.equals(r)));if(s>-1){const[t]=o.splice(s,1);t.isSigner=!0,t.isWritable=!0,o.unshift(t)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=o.findIndex((e=>e.pubkey.equals(t.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${t.publicKey.toString()}`);o[e].isSigner||(o[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,u=0,c=0;const h=[],l=[];o.forEach((({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),a+=1,r||(u+=1)):(l.push(t.toString()),r||(c+=1))}));const d=h.concat(l),f=e.map((t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map((t=>d.indexOf(t.pubkey.toString()))),data:no.encode(e)}}));return f.forEach((t=>{Jc(t.programIdIndex>=0),t.accounts.forEach((t=>Jc(t>=0)))})),new Xc({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:c},accountKeys:d,recentBlockhash:t,instructions:f})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every(((t,r)=>e[r].equals(t.publicKey)));if(r)return t}return this.signatures=e.map((t=>({signature:null,publicKey:t}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter((t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)})).map((t=>({signature:null,publicKey:t})))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}this.signatures=r.map((t=>({signature:null,publicKey:t.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const n of t){const t=n.publicKey.toString();e.has(t)||(e.add(t),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach((t=>{const e=Ic(r,t.secretKey);this._addSignature(t.publicKey,Ac(e))}))}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Jc(64===e.length);const r=this.signatures.findIndex((e=>t.equals(e.publicKey)));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=rn.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),void 0===t||t)}_verifySignatures(t,e){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(e)return!1}else if(!Mc(r,t,n.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r&&!this._verifySignatures(n,e))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];Zc(r,e.length);const n=r.length+64*e.length+t.length,i=rn.Buffer.alloc(n);return Jc(e.length<256),rn.Buffer.from(r).copy(i,0),e.forEach((({signature:t},e)=>{null!==t&&(Jc(64===t.length,"signature has invalid length"),rn.Buffer.from(t).copy(i,r.length+64*e))})),t.copy(i,r.length+64*e.length),Jc(i.length<=Uc,`Transaction too large: ${i.length} > 1232`),i}get keys(){return Jc(1===this.instructions.length),this.instructions[0].keys.map((t=>t.pubkey))}get programId(){return Jc(1===this.instructions.length),this.instructions[0].programId}get data(){return Jc(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=Gc(e);let n=[];for(let t=0;t<r;t++){const t=e.slice(0,Wc);e=e.slice(Wc),n.push(no.encode(rn.Buffer.from(t)))}return ih.populate(Xc.from(e),n)}static populate(t,e=[]){const r=new ih;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach(((e,n)=>{const i={signature:e==no.encode(rh)?null:no.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)})),t.instructions.forEach((e=>{const n=e.accounts.map((e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some((t=>t.publicKey.toString()===n.toString()))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));r.instructions.push(new nh({keys:n,programId:t.accountKeys[e.programIdIndex],data:no.decode(e.data)}))})),r._message=t,r._json=r.toJSON(),r}}class oh{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:a}=r,u=o-s;Jc(u>0,"Message header is invalid");const c=t.staticAccountKeys.length-o-a;Jc(c>=0,"Message header is invalid");const h=t.getAccountKeys(e),l=h.get(0);if(void 0===l)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const t of n){const e=[];for(const n of t.accountKeyIndexes){const t=h.get(n);if(void 0===t)throw new Error(`Failed to find key for account key index ${n}`);let i;i=n<o?n<u:n<h.staticAccountKeys.length?n-o<c:n-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:n<r.numRequiredSignatures,isWritable:i})}const n=h.get(t.programIdIndex);if(void 0===n)throw new Error(`Failed to find program id for program id index ${t.programIdIndex}`);d.push(new nh({programId:n,data:Ac(t.data),keys:e}))}return new oh({payerKey:l,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return Xc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Qc.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class sh{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Jc(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Wc));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Zc(e,this.signatures.length);const r=js([Ks(e.length,"encodedSignaturesLength"),qs($c(),this.signatures.length,"signatures"),Ks(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=Gc(e);for(let t=0;t<n;t++)r.push(new Uint8Array(e.splice(0,Wc)));const i=th.deserialize(new Uint8Array(e));return new sh(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex((t=>t.equals(n.publicKey)));Jc(t>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[t]=Ic(e,n.secretKey)}}addSignature(t,e){Jc(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((e=>e.equals(t)));Jc(r>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=e}}const ah=new Cc("SysvarC1ock11111111111111111111111111111111"),uh=new Cc("SysvarEpochSchedu1e111111111111111111111111"),ch=new Cc("Sysvar1nstructions1111111111111111111111111"),hh=new Cc("SysvarRecentB1ockHashes11111111111111111111"),lh=new Cc("SysvarRent111111111111111111111111111111111"),dh=new Cc("SysvarRewards111111111111111111111111111111"),fh=new Cc("SysvarS1otHashes111111111111111111111111111"),ph=new Cc("SysvarS1otHistory11111111111111111111111111"),gh=new Cc("SysvarStakeHistory1111111111111111111111111");async function mh(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await t.sendTransaction(e,r,i);let s;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)s=(await t.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;s=(await t.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await t.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function yh(t){return new Promise((e=>setTimeout(e,t)))}function wh(t,e){const r=t.layout.span>=0?t.layout.span:Vc(t,e),n=rn.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}function bh(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const vh=zs("lamportsPerSignature"),_h=js([Us("version"),Us("state"),Dc("authorizedPubkey"),Dc("nonce"),js([vh],"feeCalculator")]),kh=_h.span;class Sh{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=_h.decode(Ac(t),0);return new Sh({authorizedPubkey:new Cc(e.authorizedPubkey),nonce:new Cc(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const xh=(Eh=8,t=>{const e=Ks(Eh,t),{encode:r,decode:n}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(e),i=e;return i.decode=(t,e)=>{const r=n(t,e);return Ds(rn.Buffer.from(r))},i.encode=(t,e,n)=>{const i=Hs(t,Eh);return r(i,e,n)},i});var Eh;const Ih=Object.freeze({Create:{index:0,layout:js([Us("instruction"),Ws("lamports"),Ws("space"),Dc("programId")])},Assign:{index:1,layout:js([Us("instruction"),Dc("programId")])},Transfer:{index:2,layout:js([Us("instruction"),xh("lamports")])},CreateWithSeed:{index:3,layout:js([Us("instruction"),Dc("base"),Hc("seed"),Ws("lamports"),Ws("space"),Dc("programId")])},AdvanceNonceAccount:{index:4,layout:js([Us("instruction")])},WithdrawNonceAccount:{index:5,layout:js([Us("instruction"),Ws("lamports")])},InitializeNonceAccount:{index:6,layout:js([Us("instruction"),Dc("authorized")])},AuthorizeNonceAccount:{index:7,layout:js([Us("instruction"),Dc("authorized")])},Allocate:{index:8,layout:js([Us("instruction"),Ws("space")])},AllocateWithSeed:{index:9,layout:js([Us("instruction"),Dc("base"),Hc("seed"),Ws("space"),Dc("programId")])},AssignWithSeed:{index:10,layout:js([Us("instruction"),Dc("base"),Hc("seed"),Dc("programId")])},TransferWithSeed:{index:11,layout:js([Us("instruction"),xh("lamports"),Hc("seed"),Dc("programId")])},UpgradeNonceAccount:{index:12,layout:js([Us("instruction")])}});class Mh{constructor(){}static createAccount(t){const e=wh(Ih.Create,{lamports:t.lamports,space:t.space,programId:Ac(t.programId.toBuffer())});return new nh({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,r;if("basePubkey"in t){e=wh(Ih.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:Ac(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{e=wh(Ih.Transfer,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new nh({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){e=wh(Ih.AssignWithSeed,{base:Ac(t.basePubkey.toBuffer()),seed:t.seed,programId:Ac(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=wh(Ih.Assign,{programId:Ac(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new nh({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=wh(Ih.CreateWithSeed,{base:Ac(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Ac(t.programId.toBuffer())});let r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&r.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new nh({keys:r,programId:this.programId,data:e})}static createNonceAccount(t){const e=new ih;"basePubkey"in t&&"seed"in t?e.add(Mh.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:kh,programId:this.programId})):e.add(Mh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:kh,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=wh(Ih.InitializeNonceAccount,{authorized:Ac(t.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hh,isSigner:!1,isWritable:!1},{pubkey:lh,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new nh(r)}static nonceAdvance(t){const e=wh(Ih.AdvanceNonceAccount),r={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:hh,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new nh(r)}static nonceWithdraw(t){const e=wh(Ih.WithdrawNonceAccount,{lamports:t.lamports});return new nh({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:hh,isSigner:!1,isWritable:!1},{pubkey:lh,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=wh(Ih.AuthorizeNonceAccount,{authorized:Ac(t.newAuthorizedPubkey.toBuffer())});return new nh({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,r;if("basePubkey"in t){e=wh(Ih.AllocateWithSeed,{base:Ac(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Ac(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{e=wh(Ih.Allocate,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new nh({keys:r,programId:this.programId,data:e})}}Mh.programId=new Cc("11111111111111111111111111111111");class Ah{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Ah.chunkSize)+1+1)}static async load(t,e,r,n,i){{const o=await t.getMinimumBalanceForRentExemption(i.length),s=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==s){if(s.executable)return console.error("Program load failed, account is already executable"),!1;s.data.length!==i.length&&(a=a||new ih,a.add(Mh.allocate({accountPubkey:r.publicKey,space:i.length}))),s.owner.equals(n)||(a=a||new ih,a.add(Mh.assign({accountPubkey:r.publicKey,programId:n}))),s.lamports<o&&(a=a||new ih,a.add(Mh.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:o-s.lamports})))}else a=(new ih).add(Mh.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:o>0?o:1,space:i.length,programId:n}));null!==a&&await mh(t,a,[e,r],{commitment:"confirmed"})}const o=js([Us("instruction"),Us("offset"),Us("bytesLength"),Us("bytesLengthPadding"),qs(Cs("byte"),Ts(Us(),-8),"bytes")]),s=Ah.chunkSize;let a=0,u=i,c=[];for(;u.length>0;){const i=u.slice(0,s),h=rn.Buffer.alloc(s+16);o.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},h);const l=(new ih).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:h});if(c.push(mh(t,l,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await yh(1e3/t)}a+=s,u=u.slice(s)}await Promise.all(c);{const i=js([Us("instruction")]),o=rn.Buffer.alloc(i.span);i.encode({instruction:1},o);const s=(new ih).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:lh,isSigner:!1,isWritable:!1}],programId:n,data:o}),a="processed",u=await t.sendTransaction(s,[e,r],{preflightCommitment:a}),{context:c,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.recentBlockhash},a);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);for(;;){try{if(await t.getSlot({commitment:a})>c.slot)break}catch{}await new Promise((t=>setTimeout(t,Math.round(200))))}}return!0}}Ah.chunkSize=932;const Bh=new Cc("BPFLoader2111111111111111111111111111111111");function Ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oh=Object.prototype.toString,Rh=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Lh(t,e){var r,n,i,o,s,a,u;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"==typeof t.toJSON)return Lh(t.toJSON(),e);if("[object Array]"===(u=Oh.call(t))){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Lh(t[r],!0)+",";return n>-1&&(i+=Lh(t[r],!0)),i+"]"}if("[object Object]"===u){for(n=(o=Rh(t).sort()).length,i="",r=0;r<n;)void 0!==(a=Lh(t[s=o[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var Th=Ph((function(t){var e=Lh(t,!1);if(void 0!==e)return""+e}));function Ch(t){let e=0;for(;t>1;)t/=2,e++;return e}class Nh{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ch(function(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32))}(t+32+1))-Ch(32)-1;return[e,t-(this.getSlotsInEpoch(e)-32)]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+r,e%this.slotsPerEpoch]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ch(32)):this.slotsPerEpoch}}class Uh extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class zh extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Wh=globalThis.fetch;class jh extends ju{constructor(t,e,r){super((t=>{const r=Ku(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r}),t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class qh{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let r;try{r=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}(Kh,t),r=t.length-56;Jc(r>=0,"lookup table is invalid"),Jc(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=js([qs(Dc(),n,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new Cc(e.authority[0]):void 0,addresses:i.map((t=>new Cc(t)))}}}const Kh={index:1,layout:js([Us("typeIndex"),xh("deactivationSlot"),zs("lastExtendedSlot"),Cs("lastExtendedStartIndex"),Cs(),qs(Dc(),Ts(Cs(),-1),"authority")])},Fh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;const Dh=wa(aa(Cc),fa(),(t=>new Cc(t))),$h=pa([fa(),ua("base64")]),Hh=wa(aa(rn.Buffer),$h,(t=>rn.Buffer.from(t[0],"base64")));function Vh(t){let e,r;if("string"==typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function Gh(t){return ma([ga({jsonrpc:ua("2.0"),id:fa(),result:t}),ga({jsonrpc:ua("2.0"),id:fa(),error:ga({code:ya(),message:fa(),data:la(ia("any",(()=>!0)))})})])}const Zh=Gh(ya());function Jh(t){return wa(Gh(t),Zh,(e=>"error"in e?e:{...e,result:ea(e.result,t)}))}function Yh(t){return Jh(ga({context:ga({slot:ha()}),value:t}))}function Xh(t){return ga({context:ga({slot:ha()}),value:t})}function Qh(t,e){return 0===t?new Qc({header:e.header,staticAccountKeys:e.accountKeys.map((t=>new Cc(t))),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:no.decode(t.data)}))),addressTableLookups:e.addressTableLookups}):new Xc(e)}const tl=ga({foundation:ha(),foundationTerm:ha(),initial:ha(),taper:ha(),terminal:ha()}),el=Jh(oa(ca(ga({epoch:ha(),effectiveSlot:ha(),amount:ha(),postBalance:ha(),commission:la(ca(ha()))})))),rl=oa(ga({slot:ha(),prioritizationFee:ha()})),nl=ga({total:ha(),validator:ha(),foundation:ha(),epoch:ha()}),il=ga({epoch:ha(),slotIndex:ha(),slotsInEpoch:ha(),absoluteSlot:ha(),blockHeight:la(ha()),transactionCount:la(ha())}),ol=ga({slotsPerEpoch:ha(),leaderScheduleSlotOffset:ha(),warmup:sa(),firstNormalEpoch:ha(),firstNormalSlot:ha()}),sl=da(fa(),oa(ha())),al=ca(ma([ga({}),fa()])),ul=ga({err:al}),cl=ua("receivedSignature"),hl=ga({"solana-core":fa(),"feature-set":la(ha())}),ll=Yh(ga({err:ca(ma([ga({}),fa()])),logs:ca(oa(fa())),accounts:la(ca(oa(ca(ga({executable:sa(),owner:fa(),lamports:ha(),data:oa(fa()),rentEpoch:la(ha())}))))),unitsConsumed:la(ha()),returnData:la(ca(ga({programId:fa(),data:pa([fa(),ua("base64")])})))})),dl=Yh(ga({byIdentity:da(fa(),oa(ha())),range:ga({firstSlot:ha(),lastSlot:ha()})}));const fl=Jh(tl),pl=Jh(nl),gl=Jh(rl),ml=Jh(il),yl=Jh(ol),wl=Jh(sl),bl=Jh(ha()),vl=Yh(ga({total:ha(),circulating:ha(),nonCirculating:ha(),nonCirculatingAccounts:oa(Dh)})),_l=ga({amount:fa(),uiAmount:ca(ha()),decimals:ha(),uiAmountString:la(fa())}),kl=Yh(oa(ga({address:Dh,amount:fa(),uiAmount:ca(ha()),decimals:ha(),uiAmountString:la(fa())}))),Sl=Yh(oa(ga({pubkey:Dh,account:ga({executable:sa(),owner:Dh,lamports:ha(),data:Hh,rentEpoch:ha()})}))),xl=ga({program:fa(),parsed:ya(),space:ha()}),El=Yh(oa(ga({pubkey:Dh,account:ga({executable:sa(),owner:Dh,lamports:ha(),data:xl,rentEpoch:ha()})}))),Il=Yh(oa(ga({lamports:ha(),address:Dh}))),Ml=ga({executable:sa(),owner:Dh,lamports:ha(),data:Hh,rentEpoch:ha()}),Al=ga({pubkey:Dh,account:Ml}),Bl=wa(ma([aa(rn.Buffer),xl]),ma([$h,xl]),(t=>Array.isArray(t)?ea(t,Hh):t)),Pl=ga({executable:sa(),owner:Dh,lamports:ha(),data:Bl,rentEpoch:ha()}),Ol=ga({pubkey:Dh,account:Pl}),Rl=ga({state:ma([ua("active"),ua("inactive"),ua("activating"),ua("deactivating")]),active:ha(),inactive:ha()}),Ll=Jh(oa(ga({signature:fa(),slot:ha(),err:al,memo:ca(fa()),blockTime:la(ca(ha()))}))),Tl=Jh(oa(ga({signature:fa(),slot:ha(),err:al,memo:ca(fa()),blockTime:la(ca(ha()))}))),Cl=ga({subscription:ha(),result:Xh(Ml)}),Nl=ga({pubkey:Dh,account:Ml}),Ul=ga({subscription:ha(),result:Xh(Nl)}),zl=ga({parent:ha(),slot:ha(),root:ha()}),Wl=ga({subscription:ha(),result:zl}),jl=ma([ga({type:ma([ua("firstShredReceived"),ua("completed"),ua("optimisticConfirmation"),ua("root")]),slot:ha(),timestamp:ha()}),ga({type:ua("createdBank"),parent:ha(),slot:ha(),timestamp:ha()}),ga({type:ua("frozen"),slot:ha(),timestamp:ha(),stats:ga({numTransactionEntries:ha(),numSuccessfulTransactions:ha(),numFailedTransactions:ha(),maxTransactionsPerEntry:ha()})}),ga({type:ua("dead"),slot:ha(),timestamp:ha(),err:fa()})]),ql=ga({subscription:ha(),result:jl}),Kl=ga({subscription:ha(),result:Xh(ma([ul,cl]))}),Fl=ga({subscription:ha(),result:ha()}),Dl=ga({pubkey:fa(),gossip:ca(fa()),tpu:ca(fa()),rpc:ca(fa()),version:ca(fa())}),$l=ga({votePubkey:fa(),nodePubkey:fa(),activatedStake:ha(),epochVoteAccount:sa(),epochCredits:oa(pa([ha(),ha(),ha()])),commission:ha(),lastVote:ha(),rootSlot:ca(ha())}),Hl=Jh(ga({current:oa($l),delinquent:oa($l)})),Vl=ma([ua("processed"),ua("confirmed"),ua("finalized")]),Gl=ga({slot:ha(),confirmations:ca(ha()),err:al,confirmationStatus:la(Vl)}),Zl=Yh(oa(ca(Gl))),Jl=Jh(ha()),Yl=ga({accountKey:Dh,writableIndexes:oa(ha()),readonlyIndexes:oa(ha())}),Xl=ga({signatures:oa(fa()),message:ga({accountKeys:oa(fa()),header:ga({numRequiredSignatures:ha(),numReadonlySignedAccounts:ha(),numReadonlyUnsignedAccounts:ha()}),instructions:oa(ga({accounts:oa(ha()),data:fa(),programIdIndex:ha()})),recentBlockhash:fa(),addressTableLookups:la(oa(Yl))})}),Ql=ga({pubkey:Dh,signer:sa(),writable:sa(),source:la(ma([ua("transaction"),ua("lookupTable")]))}),td=ga({accountKeys:oa(Ql),signatures:oa(fa())}),ed=ga({parsed:ya(),program:fa(),programId:Dh}),rd=ga({accounts:oa(Dh),data:fa(),programId:Dh}),nd=wa(ma([rd,ed]),ma([ga({parsed:ya(),program:fa(),programId:fa()}),ga({accounts:oa(fa()),data:fa(),programId:fa()})]),(t=>ea(t,"accounts"in t?rd:ed))),id=ga({signatures:oa(fa()),message:ga({accountKeys:oa(Ql),instructions:oa(nd),recentBlockhash:fa(),addressTableLookups:la(ca(oa(Yl)))})}),od=ga({accountIndex:ha(),mint:fa(),owner:la(fa()),uiTokenAmount:_l}),sd=ga({writable:oa(Dh),readonly:oa(Dh)}),ad=ga({err:al,fee:ha(),innerInstructions:la(ca(oa(ga({index:ha(),instructions:oa(ga({accounts:oa(ha()),data:fa(),programIdIndex:ha()}))})))),preBalances:oa(ha()),postBalances:oa(ha()),logMessages:la(ca(oa(fa()))),preTokenBalances:la(ca(oa(od))),postTokenBalances:la(ca(oa(od))),loadedAddresses:la(sd),computeUnitsConsumed:la(ha())}),ud=ga({err:al,fee:ha(),innerInstructions:la(ca(oa(ga({index:ha(),instructions:oa(nd)})))),preBalances:oa(ha()),postBalances:oa(ha()),logMessages:la(ca(oa(fa()))),preTokenBalances:la(ca(oa(od))),postTokenBalances:la(ca(oa(od))),loadedAddresses:la(sd),computeUnitsConsumed:la(ha())}),cd=ma([ua(0),ua("legacy")]),hd=ga({pubkey:fa(),lamports:ha(),postBalance:ca(ha()),rewardType:ca(fa()),commission:la(ca(ha()))}),ld=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),transactions:oa(ga({transaction:Xl,meta:ca(ad),version:la(cd)})),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),dd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),fd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),transactions:oa(ga({transaction:td,meta:ca(ad),version:la(cd)})),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),pd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),transactions:oa(ga({transaction:id,meta:ca(ud),version:la(cd)})),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),gd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),transactions:oa(ga({transaction:td,meta:ca(ud),version:la(cd)})),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),md=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),rewards:la(oa(hd)),blockTime:ca(ha()),blockHeight:ca(ha())}))),yd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),transactions:oa(ga({transaction:Xl,meta:ca(ad)})),rewards:la(oa(hd)),blockTime:ca(ha())}))),wd=Jh(ca(ga({blockhash:fa(),previousBlockhash:fa(),parentSlot:ha(),signatures:oa(fa()),blockTime:ca(ha())}))),bd=Jh(ca(ga({slot:ha(),meta:ad,blockTime:la(ca(ha())),transaction:Xl,version:la(cd)}))),vd=Jh(ca(ga({slot:ha(),transaction:id,meta:ca(ud),blockTime:la(ca(ha())),version:la(cd)}))),_d=Yh(ga({blockhash:fa(),feeCalculator:ga({lamportsPerSignature:ha()})})),kd=Yh(ga({blockhash:fa(),lastValidBlockHeight:ha()})),Sd=Yh(sa()),xd=Jh(oa(ga({slot:ha(),numTransactions:ha(),numSlots:ha(),samplePeriodSecs:ha()}))),Ed=Yh(ca(ga({feeCalculator:ga({lamportsPerSignature:ha()})}))),Id=Jh(fa()),Md=Jh(fa()),Ad=ga({err:al,logs:oa(fa()),signature:fa()}),Bd=ga({result:Xh(Ad),subscription:ha()}),Pd={"solana-client":"js/0.0.0-development"};class Od{constructor(t){this._keypair=void 0,this._keypair=t??Sc()}static generate(){return new Od(Sc())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=xc(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new Od({publicKey:r,secretKey:t})}static fromSeed(t){const e=xc(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Od({publicKey:e,secretKey:r})}get publicKey(){return new Cc(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Rd=Object.freeze({CreateLookupTable:{index:0,layout:js([Us("instruction"),xh("recentSlot"),Cs("bumpSeed")])},FreezeLookupTable:{index:1,layout:js([Us("instruction")])},ExtendLookupTable:{index:2,layout:js([Us("instruction"),xh(),qs(Dc(),Ts(Us(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:js([Us("instruction")])},CloseLookupTable:{index:4,layout:js([Us("instruction")])}});class Ld{constructor(){}static createLookupTable(t){const[e,r]=Cc.findProgramAddressSync([t.authority.toBuffer(),Hs(BigInt(t.recentSlot),8)],this.programId),n=wh(Rd.CreateLookupTable,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Mh.programId,isSigner:!1,isWritable:!1}];return[new nh({programId:this.programId,keys:i,data:n}),e]}static freezeLookupTable(t){const e=wh(Rd.FreezeLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new nh({programId:this.programId,keys:r,data:e})}static extendLookupTable(t){const e=wh(Rd.ExtendLookupTable,{addresses:t.addresses.map((t=>t.toBytes()))}),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&r.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Mh.programId,isSigner:!1,isWritable:!1}),new nh({programId:this.programId,keys:r,data:e})}static deactivateLookupTable(t){const e=wh(Rd.DeactivateLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new nh({programId:this.programId,keys:r,data:e})}static closeLookupTable(t){const e=wh(Rd.CloseLookupTable),r=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new nh({programId:this.programId,keys:r,data:e})}}Ld.programId=new Cc("AddressLookupTab1e1111111111111111111111111");const Td=Object.freeze({RequestUnits:{index:0,layout:js([Cs("instruction"),Us("units"),Us("additionalFee")])},RequestHeapFrame:{index:1,layout:js([Cs("instruction"),Us("bytes")])},SetComputeUnitLimit:{index:2,layout:js([Cs("instruction"),Us("units")])},SetComputeUnitPrice:{index:3,layout:js([Cs("instruction"),xh("microLamports")])}});class Cd{constructor(){}static requestUnits(t){const e=wh(Td.RequestUnits,t);return new nh({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=wh(Td.RequestHeapFrame,t);return new nh({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=wh(Td.SetComputeUnitLimit,t);return new nh({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=wh(Td.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new nh({keys:[],programId:this.programId,data:e})}}Cd.programId=new Cc("ComputeBudget111111111111111111111111111111");const Nd=js([Cs("numSignatures"),Cs("padding"),Ns("signatureOffset"),Ns("signatureInstructionIndex"),Ns("publicKeyOffset"),Ns("publicKeyInstructionIndex"),Ns("messageDataOffset"),Ns("messageDataSize"),Ns("messageInstructionIndex")]);class Ud{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,instructionIndex:i}=t;Jc(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),Jc(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const o=Nd.span,s=o+e.length,a=s+n.length,u=rn.Buffer.alloc(a+r.length),c=null==i?65535:i;return Nd.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:c,publicKeyOffset:o,publicKeyInstructionIndex:c,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:c},u),u.fill(e,o),u.fill(n,s),u.fill(r,a),new nh({keys:[],programId:Ud.programId,data:u})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;Jc(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=Od.fromSecretKey(e),i=t.publicKey.toBytes(),o=Ic(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}Ud.programId=new Cc("Ed25519SigVerify111111111111111111111111111");_c.utils.isValidPrivateKey;const zd=_c.getPublicKey,Wd=js([Cs("numSignatures"),Ns("signatureOffset"),Cs("signatureInstructionIndex"),Ns("ethAddressOffset"),Cs("ethAddressInstructionIndex"),Ns("messageDataOffset"),Ns("messageDataSize"),Cs("messageInstructionIndex"),Ks(20,"ethAddress"),Ks(64,"signature"),Cs("recoveryId")]);class jd{constructor(){}static publicKeyToEthAddress(t){Jc(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return rn.Buffer.from(nc(Ac(t))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:o}=t;return jd.createInstructionWithEthAddress({ethAddress:jd.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:n,recoveryId:i,instructionIndex:o=0}=t;let s;s="string"==typeof e?e.startsWith("0x")?rn.Buffer.from(e.substr(2),"hex"):rn.Buffer.from(e,"hex"):e,Jc(20===s.length,`Address must be 20 bytes but received ${s.length} bytes`);const a=12+s.length,u=a+n.length+1,c=rn.Buffer.alloc(Wd.span+r.length);return Wd.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:o,signature:Ac(n),ethAddress:Ac(s),recoveryId:i},c),c.fill(Ac(r),Wd.span),new nh({keys:[],programId:jd.programId,data:c})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;Jc(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=Ac(e),i=zd(t,!1).slice(1),o=rn.Buffer.from(nc(Ac(r))),[s,a]=((t,e)=>{const r=_c.sign(t,e);return[r.toCompactRawBytes(),r.recovery]})(o,t);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,recoveryId:a,instructionIndex:n})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}var qd;jd.programId=new Cc("KeccakSecp256k11111111111111111111111111111");const Kd=new Cc("StakeConfig11111111111111111111111111111111");class Fd{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Dd{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}qd=Dd,Dd.default=new qd(0,0,Cc.default);const $d=Object.freeze({Initialize:{index:0,layout:js([Us("instruction"),((t="authorized")=>js([Dc("staker"),Dc("withdrawer")],t))(),((t="lockup")=>js([Ws("unixTimestamp"),Ws("epoch"),Dc("custodian")],t))()])},Authorize:{index:1,layout:js([Us("instruction"),Dc("newAuthorized"),Us("stakeAuthorizationType")])},Delegate:{index:2,layout:js([Us("instruction")])},Split:{index:3,layout:js([Us("instruction"),Ws("lamports")])},Withdraw:{index:4,layout:js([Us("instruction"),Ws("lamports")])},Deactivate:{index:5,layout:js([Us("instruction")])},Merge:{index:7,layout:js([Us("instruction")])},AuthorizeWithSeed:{index:8,layout:js([Us("instruction"),Dc("newAuthorized"),Us("stakeAuthorizationType"),Hc("authoritySeed"),Dc("authorityOwner")])}}),Hd=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Vd{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Dd.default,o=wh($d.Initialize,{authorized:{staker:Ac(r.staker.toBuffer()),withdrawer:Ac(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ac(i.custodian.toBuffer())}}),s={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:lh,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new nh(s)}static createAccountWithSeed(t){const e=new ih;e.add(Mh.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new ih;e.add(Mh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=wh($d.Delegate);return(new ih).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:gh,isSigner:!1,isWritable:!1},{pubkey:Kd,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=t,s=wh($d.Authorize,{newAuthorized:Ac(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new ih).add({keys:a,programId:this.programId,data:s})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:s,custodianPubkey:a}=t,u=wh($d.AuthorizeWithSeed,{newAuthorized:Ac(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:Ac(i.toBuffer())}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ah,isSigner:!1,isWritable:!1}];return a&&c.push({pubkey:a,isSigner:!1,isWritable:!1}),(new ih).add({keys:c,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,o=wh($d.Split,{lamports:i});return new nh({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t){const e=new ih;return e.add(Mh.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),e.add(this.splitInstruction(t))}static splitWithSeed(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,basePubkey:i,seed:o,lamports:s}=t,a=new ih;return a.add(Mh.allocate({accountPubkey:n,basePubkey:i,seed:o,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:s}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=wh($d.Merge);return(new ih).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:gh,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=t,s=wh($d.Withdraw,{lamports:i}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:gh,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&a.push({pubkey:o,isSigner:!1,isWritable:!1}),(new ih).add({keys:a,programId:this.programId,data:s})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=wh($d.Deactivate);return(new ih).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Vd.programId=new Cc("Stake11111111111111111111111111111111111111"),Vd.space=200;class Gd{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}const Zd=Object.freeze({InitializeAccount:{index:0,layout:js([Us("instruction"),((t="voteInit")=>js([Dc("nodePubkey"),Dc("authorizedVoter"),Dc("authorizedWithdrawer"),Cs("commission")],t))()])},Authorize:{index:1,layout:js([Us("instruction"),Dc("newAuthorized"),Us("voteAuthorizationType")])},Withdraw:{index:3,layout:js([Us("instruction"),Ws("lamports")])},AuthorizeWithSeed:{index:10,layout:js([Us("instruction"),((t="voteAuthorizeWithSeedArgs")=>js([Us("voteAuthorizationType"),Dc("currentAuthorityDerivedKeyOwnerPubkey"),Hc("currentAuthorityDerivedKeySeed"),Dc("newAuthorized")],t))()])}}),Jd=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Yd{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=wh(Zd.InitializeAccount,{voteInit:{nodePubkey:Ac(n.nodePubkey.toBuffer()),authorizedVoter:Ac(n.authorizedVoter.toBuffer()),authorizedWithdrawer:Ac(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:lh,isSigner:!1,isWritable:!1},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new nh(o)}static createAccount(t){const e=new ih;return e.add(Mh.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,o=wh(Zd.Authorize,{newAuthorized:Ac(n.toBuffer()),voteAuthorizationType:i.index}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ih).add({keys:s,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:s}=t,a=wh(Zd.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ac(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:Ac(i.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ah,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new ih).add({keys:u,programId:this.programId,data:a})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,o=wh(Zd.Withdraw,{lamports:n}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ih).add({keys:s,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insuffcient funds.");return Yd.withdraw(t)}}Yd.programId=new Cc("Vote111111111111111111111111111111111111111"),Yd.space=3731;const Xd=new Cc("Va1idator1nfo111111111111111111111111111111"),Qd=ga({name:fa(),website:la(fa()),details:la(fa()),keybaseUsername:la(fa())});class tf{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(2!==Gc(e))return null;const r=[];for(let t=0;t<2;t++){const t=new Cc(e.slice(0,Lc));e=e.slice(Lc);const n=1===e.slice(0,1)[0];e=e.slice(1),r.push({publicKey:t,isSigner:n})}if(r[0].publicKey.equals(Xd)&&r[1].isSigner){const t=Hc().decode(rn.Buffer.from(e)),n=JSON.parse(t);return ta(n,Qd),new tf(r[1].publicKey,n)}return null}}const ef=new Cc("Vote111111111111111111111111111111111111111"),rf=js([Dc("nodePubkey"),Dc("authorizedWithdrawer"),Cs("commission"),zs(),qs(js([zs("slot"),Us("confirmationCount")]),Ts(Us(),-8),"votes"),Cs("rootSlotValid"),zs("rootSlot"),zs(),qs(js([zs("epoch"),Dc("authorizedVoter")]),Ts(Us(),-8),"authorizedVoters"),js([qs(js([Dc("authorizedPubkey"),zs("epochOfLastAuthorizedSwitch"),zs("targetEpoch")]),32,"buf"),zs("idx"),Cs("isEmpty")],"priorVoters"),zs(),qs(js([zs("epoch"),zs("credits"),zs("prevCredits")]),Ts(Us(),-8),"epochCredits"),js([zs("slot"),zs("timestamp")],"lastTimestamp")]);class nf{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=rf.decode(Ac(t),4);let r=e.rootSlot;return e.rootSlotValid||(r=null),new nf({nodePubkey:new Cc(e.nodePubkey),authorizedWithdrawer:new Cc(e.authorizedWithdrawer),commission:e.commission,votes:e.votes,rootSlot:r,authorizedVoters:e.authorizedVoters.map(of),priorVoters:af(e.priorVoters),epochCredits:e.epochCredits,lastTimestamp:e.lastTimestamp})}}function of({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new Cc(t)}}function sf({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new Cc(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function af({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map(sf),...t.slice(0,e).map(sf)]}const uf={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};var cf=Object.freeze({__proto__:null,Account:class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Ac(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Ac(kc()),this._publicKey=Ac(xc(this._secretKey))}get publicKey(){return new Cc(this._publicKey)}get secretKey(){return rn.Buffer.concat([this._secretKey,this._publicKey],64)}},AddressLookupTableAccount:qh,AddressLookupTableInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=Us("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Rd))if(n.index==e){r=t;break}if(!r)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return r}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=bh(Rd.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=bh(Rd.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map((t=>new Cc(t)))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ld.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},AddressLookupTableProgram:Ld,Authorized:Fd,BLOCKHASH_CACHE_TIMEOUT_MS:3e4,BPF_LOADER_DEPRECATED_PROGRAM_ID:Nc,BPF_LOADER_PROGRAM_ID:Bh,BpfLoader:class{static getMinNumSignatures(t){return Ah.getMinNumSignatures(t)}static load(t,e,r,n,i){return Ah.load(t,e,r,i,n)}},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Td,ComputeBudgetInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=Cs("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Td))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=bh(Td.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=bh(Td.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=bh(Td.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=bh(Td.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Cd.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},ComputeBudgetProgram:Cd,Connection:class{constructor(t,e){let r,n,i,o,s,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:r,config:n}=Vh(e),i=this._buildArgs([],r,void 0,n),o=Th(i);return t[o]=t[o]??(async()=>{try{const t=ea(await this._rpcRequest("getBlockHeight",i),Jh(ha()));if("error"in t)throw new zh(t.error,"failed to get block height information");return t.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,s=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=r||function(t){const e=t.match(Fh);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${n}${null==a?"":`:${a+1}`}${o}`}(t),this._rpcClient=function(t,e,r,n,i,o){const s=r||Wh;let a;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(t,e)=>{const r=await new Promise(((r,i)=>{try{n(t,e,((t,e)=>r([t,e])))}catch(t){i(t)}}));return await s(...r)}),new Ya((async(r,n)=>{const o={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},Pd)};try{let e,r=5,u=500;for(;e=a?await a(t,o):await s(t,o),429===e.status&&!0!==i&&(r-=1,0!==r);)console.log(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${u}ms delay...`),await yh(u),u*=2;const c=await e.text();e.ok?n(null,c):n(new Error(`${e.status} ${e.statusText}: ${c}`))}catch(t){t instanceof Error&&n(t)}}),{})}(t,n,i,o,s,a),this._rpcRequest=function(t){return(e,r)=>new Promise(((n,i)=>{t.request(e,r,((t,e)=>{t?i(t):n(e)}))}))}(this._rpcClient),this._rpcBatchRequest=function(t){return e=>new Promise(((r,n)=>{0===e.length&&r([]);const i=e.map((e=>t.request(e.methodName,e.args)));t.request(i,((t,e)=>{t?n(t):r(e)}))}))}(this._rpcClient),this._rpcWebSocket=new jh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgs([t.toBase58()],r,void 0,n),o=ea(await this._rpcRequest("getBalance",i),Yh(ha()));if("error"in o)throw new zh(o.error,`failed to get balance for ${t.toBase58()}`);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}))}async getBlockTime(t){const e=ea(await this._rpcRequest("getBlockTime",[t]),Jh(ca(ha())));if("error"in e)throw new zh(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){const t=ea(await this._rpcRequest("minimumLedgerSlot",[]),Jh(ha()));if("error"in t)throw new zh(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const t=ea(await this._rpcRequest("getFirstAvailableBlock",[]),bl);if("error"in t)throw new zh(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=ea(await this._rpcRequest("getSupply",[e]),vl);if("error"in r)throw new zh(r.error,"failed to get supply");return r.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=ea(await this._rpcRequest("getTokenSupply",r),Yh(_l));if("error"in n)throw new zh(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=ea(await this._rpcRequest("getTokenAccountBalance",r),Yh(_l));if("error"in n)throw new zh(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Vh(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const s=this._buildArgs(o,n,"base64",i),a=ea(await this._rpcRequest("getTokenAccountsByOwner",s),Sl);if("error"in a)throw new zh(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),o=ea(await this._rpcRequest("getTokenAccountsByOwner",i),El);if("error"in o)throw new zh(o.error,`failed to get token accounts owned by account ${t.toBase58()}`);return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=ea(await this._rpcRequest("getLargestAccounts",r),Il);if("error"in n)throw new zh(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=ea(await this._rpcRequest("getTokenLargestAccounts",r),kl);if("error"in n)throw new zh(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgs([t.toBase58()],r,"base64",n),o=ea(await this._rpcRequest("getAccountInfo",i),Yh(ca(Ml)));if("error"in o)throw new zh(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),o=ea(await this._rpcRequest("getAccountInfo",i),Yh(ca(Pl)));if("error"in o)throw new zh(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Vh(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],r,"jsonParsed",n),s=ea(await this._rpcRequest("getMultipleAccounts",o),Yh(oa(ca(Pl))));if("error"in s)throw new zh(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Vh(e),i=t.map((t=>t.toBase58())),o=this._buildArgs([i],r,"base64",n),s=ea(await this._rpcRequest("getMultipleAccounts",o),Yh(oa(ca(Ml))));if("error"in s)throw new zh(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Vh(e),o=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),s=ea(await this._rpcRequest("getStakeActivation",o),Jh(Rl));if("error"in s)throw new zh(s.error,`failed to get Stake Activation ${t.toBase58()}`);return s.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Vh(e),{encoding:i,...o}=n||{},s=this._buildArgs([t.toBase58()],r,i||"base64",o),a=await this._rpcRequest("getProgramAccounts",s),u=oa(Al),c=!0===o.withContext?ea(a,Yh(u)):ea(a,Jh(u));if("error"in c)throw new zh(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),o=ea(await this._rpcRequest("getProgramAccounts",i),Jh(oa(Ol)));if("error"in o)throw new zh(o.error,`failed to get accounts owned by program ${t.toBase58()}`);return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=no.decode(r)}catch(t){throw new Error("signature must be base58 encoded: "+r)}return Jc(64===n.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise(((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",(()=>{r(t.reason)})))}))}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise(((o,s)=>{try{r=this.onSignature(e,((t,e)=>{r=void 0;const n={context:e,value:t};o({__type:eh.PROCESSED,response:n})}),t);const a=new Promise((t=>{null==r?t():n=this._onSubscriptionStateChange(r,(e=>{"subscribed"===e&&t()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:u}=r;if(null!=u)if(u?.err)s(u.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===u.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===u.confirmationStatus||"confirmed"===u.confirmationStatus)return}i=!0,o({__type:eh.PROCESSED,response:{context:n,value:u}})}})()}catch(t){s(t)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const o=new Promise((e=>{const n=async()=>{try{return await this.getBlockHeight(t)}catch(t){return-1}};(async()=>{let t=await n();if(!i){for(;t<=r;){if(await yh(1e3),i)return;if(t=await n(),i)return}e({__type:eh.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),u=this.getCancellationPromise(e);let c;try{const t=await Promise.race([u,a,o]);if(t.__type!==eh.PROCESSED)throw new jc(n);c=t.response}finally{i=!0,s()}return c}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let s=!1;const a=new Promise((e=>{let o=i,a=null;const u=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,i?.nonce}catch(t){return o}};(async()=>{if(o=await u(),!s)for(;;){if(i!==o)return void e({__type:eh.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await yh(2e3),s)return;if(o=await u(),s)return}})()})),{abortConfirmation:u,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),h=this.getCancellationPromise(e);let l;try{const e=await Promise.race([h,c,a]);if(e.__type===eh.PROCESSED)l=e.response;else{let n;for(;;){const t=await this.getSignatureStatus(o);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??r))){n=t;break}await yh(400)}if(!n?.value)throw new Kc(o);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Kc(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Kc(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Kc(o)}l={context:n.context,value:{err:n.value.err}}}}}finally{s=!0,u()}return l}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise((e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>e({__type:eh.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let s;try{const t=await Promise.race([o,n]);if(t.__type!==eh.PROCESSED)throw new qc(e,t.timeoutMs/1e3);s=t.response}finally{clearTimeout(r),i()}return s}async getClusterNodes(){const t=ea(await this._rpcRequest("getClusterNodes",[]),Jh(oa(Dl)));if("error"in t)throw new zh(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=ea(await this._rpcRequest("getVoteAccounts",e),Hl);if("error"in r)throw new zh(r.error,"failed to get vote accounts");return r.result}async getSlot(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,void 0,r),i=ea(await this._rpcRequest("getSlot",n),Jh(ha()));if("error"in i)throw new zh(i.error,"failed to get slot");return i.result}async getSlotLeader(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,void 0,r),i=ea(await this._rpcRequest("getSlotLeader",n),Jh(fa()));if("error"in i)throw new zh(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){const r=[t,e],n=ea(await this._rpcRequest("getSlotLeaders",r),Jh(oa(Dh)));if("error"in n)throw new zh(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);Jc(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=ea(await this._rpcRequest("getSignatureStatuses",r),Zl);if("error"in n)throw new zh(n.error,"failed to get signature status");return n.result}async getTransactionCount(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,void 0,r),i=ea(await this._rpcRequest("getTransactionCount",n),Jh(ha()));if("error"in i)throw new zh(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=ea(await this._rpcRequest("getInflationGovernor",e),fl);if("error"in r)throw new zh(r.error,"failed to get inflation");return r.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Vh(r),o=this._buildArgs([t.map((t=>t.toBase58()))],n,void 0,{...i,epoch:null!=e?e:i?.epoch}),s=ea(await this._rpcRequest("getInflationReward",o),el);if("error"in s)throw new zh(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){const t=ea(await this._rpcRequest("getInflationRate",[]),pl);if("error"in t)throw new zh(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,void 0,r),i=ea(await this._rpcRequest("getEpochInfo",n),ml);if("error"in i)throw new zh(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const t=ea(await this._rpcRequest("getEpochSchedule",[]),yl);if("error"in t)throw new zh(t.error,"failed to get epoch schedule");const e=t.result;return new Nh(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){const t=ea(await this._rpcRequest("getLeaderSchedule",[]),wl);if("error"in t)throw new zh(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=ea(await this._rpcRequest("getMinimumBalanceForRentExemption",r),Jl);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=ea(await this._rpcRequest("getRecentBlockhash",e),_d);if("error"in r)throw new zh(r.error,"failed to get recent blockhash");return r.result}async getRecentPerformanceSamples(t){const e=ea(await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),xd);if("error"in e)throw new zh(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=ea(await this._rpcRequest("getFeeCalculatorForBlockhash",r),Ed);if("error"in n)throw new zh(n.error,"failed to get fee calculator");const{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ac(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=ea(await this._rpcRequest("getFeeForMessage",n),Yh(ca(ha())));if("error"in i)throw new zh(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map((t=>t.toBase58())),r=e?.length?[e]:[],n=ea(await this._rpcRequest("getRecentPrioritizationFees",r),gl);if("error"in n)throw new zh(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,void 0,r),i=ea(await this._rpcRequest("getLatestBlockhash",n),kd);if("error"in i)throw new zh(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgs([t],r,void 0,n),o=ea(await this._rpcRequest("isBlockhashValid",i),Sd);if("error"in o)throw new zh(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=ea(await this._rpcRequest("getVersion",[]),Jh(hl));if("error"in t)throw new zh(t.error,"failed to get version");return t.result}async getGenesisHash(){const t=ea(await this._rpcRequest("getGenesisHash",[]),Jh(fa()));if("error"in t)throw new zh(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=ea(o,fd);if("error"in t)throw t.error;return t.result}case"none":{const t=ea(o,dd);if("error"in t)throw t.error;return t.result}default:{const t=ea(o,ld);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map((({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:Qh(r,t.message)},version:r})))}:null}}}catch(t){throw new zh(t,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const t=ea(o,gd);if("error"in t)throw t.error;return t.result}case"none":{const t=ea(o,md);if("error"in t)throw t.error;return t.result}default:{const t=ea(o,pd);if("error"in t)throw t.error;return t.result}}}catch(t){throw new zh(t,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"==typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=ea(await this._rpcRequest("getBlockProduction",n),dl);if("error"in i)throw new zh(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),o=ea(await this._rpcRequest("getTransaction",i),bd);if("error"in o)throw new zh(o.error,"failed to get transaction");const s=o.result;return s?{...s,transaction:{...s.transaction,message:Qh(s.version,s.transaction.message)}}:s}async getParsedTransaction(t,e){const{commitment:r,config:n}=Vh(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),o=ea(await this._rpcRequest("getTransaction",i),vd);if("error"in o)throw new zh(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Vh(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=ea(t,vd);if("error"in e)throw new zh(e.error,"failed to get transactions");return e.result}))}async getTransactions(t,e){const{commitment:r,config:n}=Vh(e),i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((t=>{const e=ea(t,bd);if("error"in e)throw new zh(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:Qh(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=ea(await this._rpcRequest("getConfirmedBlock",r),yd);if("error"in n)throw new zh(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");const o={...i,transactions:i.transactions.map((({transaction:t,meta:e})=>{const r=new Xc(t.message);return{meta:e,transaction:{...t,message:r}}}))};return{...o,transactions:o.transactions.map((({transaction:t,meta:e})=>({meta:e,transaction:ih.populate(t.message,t.signatures)})))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=ea(await this._rpcRequest("getBlocks",n),Jh(oa(ha())));if("error"in i)throw new zh(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=ea(await this._rpcRequest("getBlock",r),wd);if("error"in n)throw new zh(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=ea(await this._rpcRequest("getConfirmedBlock",r),wd);if("error"in n)throw new zh(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=ea(await this._rpcRequest("getConfirmedTransaction",r),bd);if("error"in n)throw new zh(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const o=new Xc(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:ih.populate(o,s)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=ea(await this._rpcRequest("getConfirmedTransaction",r),vd);if("error"in n)throw new zh(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(t,e){const r=t.map((t=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((t=>{const e=ea(t,vd);if("error"in e)throw new zh(e.error,"failed to get confirmed transactions");return e.result}))}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let o=await this.getSlot("finalized");for(;!("before"in n||++r>o);)try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,n)).map((t=>t.signature))}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=ea(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),Ll);if("error"in i)throw new zh(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=ea(await this._rpcRequest("getSignaturesForAddress",n),Tl);if("error"in i)throw new zh(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new qh({key:t,state:qh.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=Sh.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}))}async requestAirdrop(t,e){const r=ea(await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),Id);if("error"in r)throw new zh(r.error,`airdrop to ${t.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await yh(100);const t=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await yh(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Vh(t),n=this._buildArgs([],e,"base64",r),i=ea(await this._rpcRequest("getStakeMinimumDelegation",n),Yh(ha()));if("error"in i)throw new zh(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,r){if("message"in t){const n=t.serialize(),i=rn.Buffer.from(n).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment);const s=[i,o],a=ea(await this._rpcRequest("simulateTransaction",s),ll);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let n;if(t instanceof ih){let e=t;n=new ih,n.feePayer=e.feePayer,n.instructions=t.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures}else n=ih.populate(t),n._message=n._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(n.nonceInfo&&i)n.sign(...i);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(n.lastValidBlockHeight=e.lastValidBlockHeight,n.recentBlockhash=e.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=n._compile(),s=o.serialize(),a=n._serialize(s).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map((t=>t.toBase58()));u.accounts={encoding:"base64",addresses:t}}i&&(u.sigVerify=!0);const c=[a,u],h=ea(await this._rpcRequest("simulateTransaction",c),ll);if("error"in h){let t;if("data"in h.error&&(t=h.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(h.error.message,r)}throw new Uh("failed to simulate transaction: "+h.error.message,t)}return h.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ac(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const o=[t,r],s=ea(await this._rpcRequest("sendTransaction",o),Md);if("error"in s){let t;throw"data"in s.error&&(t=s.error.data.logs),new Uh("failed to send transaction: "+s.error.message,t)}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([t,e])=>{this._setSubscription(t,{...e,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach((t=>{try{t(e.state)}catch{}}))}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(e),()=>{n.delete(e),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&console.log(`Error when closing socket connection: ${t.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(o){if(o instanceof Error&&console.error(`${i} error for argument`,n,o.message),!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach((t=>{try{t(...e)}catch(t){console.error(t)}}))}_wsOnAccountNotification(t){const{result:e,subscription:r}=ea(t,Cl);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=Th([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];Jc(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=ea(t,Ul);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=ea(t,Bd);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=ea(t,Wl);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=ea(t,ql);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=ea(t,Kl);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],n,void 0,i),s=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(s)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=ea(t,Fl);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},Ed25519Program:Ud,Enum:class extends Bc{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map((t=>{this.enum=t}))}},EpochSchedule:Nh,FeeCalculatorLayout:vh,Keypair:Od,LAMPORTS_PER_SOL:1e9,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Rd,Loader:Ah,Lockup:Dd,MAX_SEED_LENGTH:32,Message:Xc,MessageAccountKeys:Fc,MessageV0:Qc,NONCE_ACCOUNT_LENGTH:kh,NonceAccount:Sh,PACKET_DATA_SIZE:Uc,PUBLIC_KEY_LENGTH:Lc,PublicKey:Cc,SIGNATURE_LENGTH_IN_BYTES:Wc,SOLANA_SCHEMA:Pc,STAKE_CONFIG_ID:Kd,STAKE_INSTRUCTION_LAYOUTS:$d,SYSTEM_INSTRUCTION_LAYOUTS:Ih,SYSVAR_CLOCK_PUBKEY:ah,SYSVAR_EPOCH_SCHEDULE_PUBKEY:uh,SYSVAR_INSTRUCTIONS_PUBKEY:ch,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:hh,SYSVAR_RENT_PUBKEY:lh,SYSVAR_REWARDS_PUBKEY:dh,SYSVAR_SLOT_HASHES_PUBKEY:fh,SYSVAR_SLOT_HISTORY_PUBKEY:ph,SYSVAR_STAKE_HISTORY_PUBKEY:gh,Secp256k1Program:jd,SendTransactionError:Uh,SolanaJSONRPCError:zh,SolanaJSONRPCErrorCode:{JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},StakeAuthorizationLayout:Hd,StakeInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=Us("instruction").decode(t.data);let r;for(const[t,n]of Object.entries($d))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=bh($d.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Fd(new Cc(e.staker),new Cc(e.withdrawer)),lockup:new Dd(r.unixTimestamp,r.epoch,new Cc(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),bh($d.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=bh($d.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Cc(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=bh($d.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new Cc(i),newAuthorizedPubkey:new Cc(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=bh($d.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bh($d.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=bh($d.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bh($d.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Vd.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},StakeProgram:Vd,Struct:Bc,SystemInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=Us("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Ih))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=bh(Ih.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new Cc(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=bh(Ih.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=bh(Ih.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new Cc(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=bh(Ih.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=bh(Ih.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Cc(e),seed:r,space:n,programId:new Cc(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=bh(Ih.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new Cc(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=bh(Ih.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Cc(e),seed:r,programId:new Cc(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:o}=bh(Ih.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new Cc(e),seed:r,lamports:n,space:i,programId:new Cc(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=bh(Ih.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new Cc(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),bh(Ih.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=bh(Ih.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=bh(Ih.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new Cc(e)}}static checkProgramId(t){if(!t.equals(Mh.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},SystemProgram:Mh,Transaction:ih,TransactionExpiredBlockheightExceededError:jc,TransactionExpiredNonceInvalidError:Kc,TransactionExpiredTimeoutError:qc,TransactionInstruction:nh,TransactionMessage:oh,TransactionStatus:eh,VALIDATOR_INFO_KEY:Xd,VERSION_PREFIX_MASK:zc,VOTE_PROGRAM_ID:ef,ValidatorInfo:tf,VersionedMessage:th,VersionedTransaction:sh,VoteAccount:nf,VoteAuthorizationLayout:Jd,VoteInit:Gd,VoteInstruction:class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=Us("instruction").decode(t.data);let r;for(const[t,n]of Object.entries(Zd))if(n.index==e){r=t;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=bh(Zd.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Gd(new Cc(e.nodePubkey),new Cc(e.authorizedVoter),new Cc(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=bh(Zd.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Cc(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=bh(Zd.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Cc(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new Cc(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=bh(Zd.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Yd.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}},VoteProgram:Yd,clusterApiUrl:function(t,e){const r=!1===e?"http":"https";if(!t)return uf[r].devnet;const n=uf[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n},sendAndConfirmRawTransaction:async function(t,e,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await t.sendRawTransaction(e,s),u=o&&o.commitment,c=i?t.confirmTransaction(i,u):t.confirmTransaction(a,u),h=(await c).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a},sendAndConfirmTransaction:mh});var hf=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),c=Math.log(256)/Math.log(s);function h(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var h=e[t.charCodeAt(r)];if(255===h)return;for(var l=0,d=o-1;(0!==h||l<i)&&-1!==d;d--,l++)h+=s*c[d]>>>0,c[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=l,r++}for(var f=o-i;f!==o&&0===c[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=c[f++];return p}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,h=new Uint8Array(u);i!==o;){for(var l=e[i],d=0,f=u-1;(0!==l||d<n)&&-1!==f;f--,d++)l+=256*h[f]>>>0,h[f]=l%s>>>0,l=l/s>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,i++}for(var p=u-n;p!==u&&0===h[p];)p++;for(var g=a.repeat(r);p<u;++p)g+=t.charAt(h[p]);return g},decodeUnsafe:h,decode:function(t){var e=h(t);if(e)return e;throw new Error("Non-base"+s+" character")}}};var lf=hf("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),df=e({__proto__:null,default:lf},[lf]);t.AuthProvider=class{constructor(t,e){this.initStatus=Tt.CREATED,this.initPromises=[],this.loginWithOTPStart=t=>r(this,void 0,void 0,(function*(){return yield this.init(),{begin:()=>this._loginWithOTPStart(t),isCompleteRequired:!("global"===(yield this._provider.getKeySpaceConfigType()))}})),this.loginWithOTPComplete=(t,e)=>r(this,void 0,void 0,(function*(){if("global"===(yield this._provider.getKeySpaceConfigType()))throw new Error("complete is not required for global login");yield this._loginWithOTPComplete(t,e)})),this.loginWithSocial=t=>r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return this._provider;if(!(yield this._provider.isLoginAvailable(t)))throw new Error(`${t} login is not available`);const e=yield this._provider.initSocialLogin(t);return this.beginLogin(e)})),this.loginWithLink=(t,e)=>r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return this._provider;if(!Lr(t))throw new Error("Invalid email");const r=yield this._provider.initPasswordlessLogin(t);return r&&"string"==typeof r?this.beginLogin(r):(e&&e(),yield this.waitForConnect())})),this._loginWithOTPStart=t=>r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return;if(!Lr(t))throw new Error("Invalid email");const e=yield this._provider.initOTPLogin(t);e&&"string"==typeof e&&(yield this.beginLogin(e))})),this._loginWithOTPComplete=(t,e)=>r(this,void 0,void 0,(function*(){return yield this.init(),(yield this.isLoggedIn())?this._provider:(this._provider.once("message",(t=>{"mfa_flow"===t&&e&&e()})),yield this._provider.completeOTPLogin(t),yield this.waitForConnect())})),this.loginWithBearer=(t,e)=>r(this,void 0,void 0,(function*(){return yield this.init(),yield this.iframeWrapper.triggerBearerAuthentication(t,e)}));let n=null==e?void 0:e.network,i=t;if((t=>{if(!bt(t))throw new tt("invalid_client_id","Invalid Client ID");return 3==t.split("_").length})(t)){const e=(t=>{const e=t.split("_"),[,r,n]=e;if(!vt(n))throw new Error("Invalid ClientId");if("live"==r)return{network:"mainnet",address:n};if("test"==r)return{network:"testnet",address:n};if("dev"==r)return{network:"dev",address:n};throw new Error("Invalid ClientId")})(t);n=e.network,i=e.address}var o;(t=>{if(!(t=>null!=t)(t))throw new Error("appAddress is required");if(!bt(t))throw new Error("appAddress is required to be a non-empty string");if(!vt(t))throw new Error("appAddress is required to be an ethereum address")})(i),this.appId=kt(i),this.params=(t=>{var e;const r={network:"testnet",debug:!1,position:"right",theme:"dark",alwaysVisible:!0,setWindowProvider:!1,connectOptions:{compact:!1}};return(null==t?void 0:t.network)&&(r.network=t.network),void 0!==(null==t?void 0:t.debug)&&(r.debug=t.debug),(null==t?void 0:t.theme)&&(r.theme=t.theme),(null==t?void 0:t.position)&&(r.position=t.position),void 0!==(null==t?void 0:t.alwaysVisible)&&(r.alwaysVisible=t.alwaysVisible),void 0!==(null===(e=null==t?void 0:t.connectOptions)||void 0===e?void 0:e.compact)&&(r.connectOptions.compact=t.connectOptions.compact),"testnet"!=r.network&&"dev"!=r.network||console.log(`%c[XAR_AUTH_SDK] You are currently on ${r.network} network.`,"color: red"),r})(Object.assign(Object.assign({},e),{network:n})),this.networkConfig=(t=>{if("string"==typeof t&&"testnet"==t)return ie;if("string"==typeof t&&"dev"==t)return ne;if("string"==typeof t&&"mainnet"==t)return oe;if(function(t){return"string"!=typeof t&&(!("object"!=typeof t||!t.gatewayUrl)&&(!("object"!=typeof t||!t.walletUrl)&&!("object"!=typeof t||!t.authUrl)))}(t))return t;throw new Error("Invalid network config passed")})(this.params.network),function(t,e){try{if("undefined"==typeof document)return;const r=document.createElement("link");r.href=`${t}/${e}/login`,r.type="text/html",r.rel="prefetch",document.head.appendChild(r)}catch(t){console.warn(t)}}(this.networkConfig.walletUrl,this.appId),this._provider=new Ot(this.networkConfig.authUrl),this.params.debug?(ht(it),o=t=>{console.error(t)},dt.exceptionReporter=o):ht(ut)}init(){var t;return r(this,void 0,void 0,(function*(){if(this.initStatus===Tt.CREATED){if(this.initStatus=Tt.RUNNING,this.iframeWrapper)return this;if(yield this.setAppConfig(),this.iframeWrapper=new re({appId:this.appId,iframeUrl:this.networkConfig.walletUrl,appConfig:this.appConfig,position:this.params.position,standaloneMode:this._standaloneMode}),this.iframeWrapper.setWalletType(null!==(t=this.params.appMode)&&void 0!==t?t:this.params.alwaysVisible?Nt.Full:Nt.Widget),yield this._provider.init(this.iframeWrapper,this),this.setProviders(),this.appConfig.chainType===Ct.solana_cv25519)this._solanaAPI=yield en.create(this._provider);return this.initStatus=Tt.DONE,this.resolveInitPromises(),this}return this.initStatus===Tt.RUNNING?yield this.waitForInit():this}))}connect(){return r(this,void 0,void 0,(function*(){if(this.initStatus!==Tt.DONE&&(yield this.init()),yield this.isLoggedIn())return this._provider;const t=yield this.getLogins();return this.connectCtrl||(this.connectCtrl=new tn({loginWithOTPStart:this.loginWithOTPStart,loginWithOTPComplete:this.loginWithOTPComplete,loginWithSocial:this.loginWithSocial,loginList:t,mode:this.theme,logo:this.logo.vertical,options:this.params.connectOptions})),new Promise(((t,e)=>{this.connectCtrl.open((t=>{if(t)return e(t)})),this.waitForConnect().then((e=>{this.connectCtrl.close(),t(e)})).catch(e)}))}))}showWallet(){if(!this.connected)throw new Error("no connection yet, cannot show wallet");this._provider.expandWallet()}get connected(){return this._provider.connected}getUser(){if(this.initStatus===Tt.DONE)return this._provider.requestUserInfo();throw rt}isLoggedIn(){return r(this,void 0,void 0,(function*(){if(this.initStatus===Tt.DONE){return yield this._provider.isLoggedIn()}throw rt}))}logout(){if(this.initStatus===Tt.DONE)return this._provider.triggerLogout();throw rt}getPublicKey(t,e="google"){return r(this,void 0,void 0,(function*(){if(this.initStatus===Tt.DONE){if(!t||""===t)throw new tt("email_required",`Email is required in getPublicKey, got ${t}`);return yield this._provider.getPublicKey(t,e)}throw rt}))}getLogins(){return r(this,void 0,void 0,(function*(){if(this.initStatus===Tt.DONE)return yield this._provider.getAvailableLogins();throw rt}))}getProvider(){if(this.initStatus===Tt.DONE)return this._provider;throw rt}canReconnect(){return r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return!1;const t=this.iframeWrapper.getSessionID();return!!t&&!(t.expiry<Date.now())}))}reconnect(){return r(this,void 0,void 0,(function*(){if(yield this.init(),yield this.isLoggedIn())return void(yield this.waitForConnect());const t=this.iframeWrapper.getSessionID();if(t){if(t.expiry<Date.now())throw new Error("cannot reconnect, session expired");const e=new URL(yield this._provider.getReconnectionUrl());e.searchParams.set("sessionID",t.id);const r=new ft(e.toString());return yield r.open(),void(yield this.waitForConnect())}throw new Error("cannot reconnect, no session found")}))}get chainId(){return this._provider.chainId}beginLogin(t){return r(this,void 0,void 0,(function*(){const e=new ft(t);return yield e.open(),yield this.waitForConnect()}))}waitForConnect(){return new Promise((t=>{if(this.connected)return t(this._provider);this._provider.once("connect",(()=>t(this._provider)))}))}setAppConfig(){return r(this,void 0,void 0,(function*(){const[t,e]=yield Promise.all([se(this.appId,this.networkConfig.gatewayUrl),ae(this.appId,this.networkConfig.gatewayUrl)]),r=function(t,e,r){const n=new URL(`/api/v2/app/${t}/logo?type=${e}`,r);return{horizontal:`${n.toString()}&orientation=horizontal`,vertical:`${n.toString()}&orientation=vertical`}}(this.appId,this.params.theme,this.networkConfig.gatewayUrl),n=t.logo.dark_horizontal||t.logo.light_horizontal,i=t.logo.dark_vertical||t.logo.light_vertical;this.appConfig={name:e.name,chainType:"evm"===e.chain_type.toLowerCase()?Ct.evm_secp256k1:Ct.solana_cv25519,themeConfig:{assets:{logo:{horizontal:n?r.horizontal:"",vertical:i?r.vertical:""}},theme:this.params.theme}}}))}waitForInit(){return r(this,void 0,void 0,(function*(){const t=new Promise((t=>{this.initPromises.push(t)}));return yield t}))}resolveInitPromises(){const t=this.initPromises;this.initPromises=[];for(const e of t)e(this)}get provider(){if(this._provider)return this._provider;throw rt}get solana(){if(this._solanaAPI)return this._solanaAPI;throw rt}get logo(){if(this.initStatus===Tt.DONE)return this.appConfig.themeConfig.assets.logo;throw rt}get theme(){if(this.initStatus===Tt.DONE)return this.appConfig.themeConfig.theme;throw rt}setProviders(){var t;void 0!==typeof window&&(this.providerInfo={uuid:window.crypto.randomUUID(),name:"Arcana Wallet",icon:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'/>",rdns:"network.arcana.wallet"},t=()=>{var t,e,r;const n=window;try{n.arcana=null!==(t=n.arcana)&&void 0!==t?t:{},n.arcana.provider=this._provider}catch(t){}if(this.params.setWindowProvider)try{n.ethereum=null!==(e=n.ethereum)&&void 0!==e?e:this._provider,n.ethereum.providers=null!==(r=n.ethereum.providers)&&void 0!==r?r:[],n.ethereum.providers.push(this._provider)}catch(t){console.error(t)}this.announceProvider(),window.addEventListener("eip6963:requestProvider",(()=>{this.announceProvider()}))},"complete"===document.readyState?t():window.addEventListener("load",t))}announceProvider(){window.dispatchEvent(new CustomEvent("eip6963:announceProvider",{detail:Object.freeze({info:this.providerInfo,provider:this._provider})}))}standaloneMode(t,e){this._standaloneMode={mode:t,handler:e}}},Object.defineProperty(t,"__esModule",{value:!0})}));